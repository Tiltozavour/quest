
# Firebase Services

<details>
  <summary> <h2> üå± Junior </h2> </summary>

<details>
  <summary> –†–∞—Å—Å–∫–∞–∂–∏—Ç–µ –ø—Ä–æ —Å–µ—Ä–≤–∏—Å—ã –≤ Firebase </summary>

**Firebase Services** ‚Äî –Ω–∞–±–æ—Ä –≥–æ—Ç–æ–≤—ã—Ö –±—ç–∫–µ–Ω–¥-—Å–µ—Ä–≤–∏—Å–æ–≤ –æ—Ç Google –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö –∏ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π.

---

## **–û—Å–Ω–æ–≤–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã:**

### **1. –ë–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö**
- **Cloud Firestore** (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è) ‚Äî –¥–æ–∫—É–º–µ–Ω—Ç–Ω–∞—è –ë–î
- **Realtime Database** ‚Äî JSON-–¥–µ—Ä–µ–≤–æ, –ø—Ä–æ—â–µ –¥–ª—è –ø—Ä–æ—Å—Ç—ã—Ö —Å–ª—É—á–∞–µ–≤

### **2. –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (Auth)**
- –ì–æ—Ç–æ–≤—ã–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã: Email/–ø–∞—Ä–æ–ª—å, Google, Facebook –∏ –¥—Ä.
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏

### **3. –•—Ä–∞–Ω–∏–ª–∏—â–µ (Storage)**
- Cloud Storage –¥–ª—è —Ñ–∞–π–ª–æ–≤ (—Ñ–æ—Ç–æ, –≤–∏–¥–µ–æ)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ

### **4. Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (Cloud Messaging - FCM)**
- –û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞

### **5. –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ (Analytics)**
- –ë–µ—Å–ø–ª–∞—Ç–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø–æ–≤–µ–¥–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### **6. –ö—Ä–∞—à-—Ä–µ–ø–æ—Ä—Ç—ã (Crashlytics)**
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫ –∏ –∫—Ä–∞—à–µ–π

### **7. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (Remote Config)**
- –ò–∑–º–µ–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –±–µ–∑ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π

### **8. Cloud Functions**
- –°–µ—Ä–≤–µ—Ä–Ω—ã–π –∫–æ–¥ –±–µ–∑ —Å–µ—Ä–≤–µ—Ä–æ–≤ (–±–µ—Å—Å–µ—Ä–≤–µ—Ä–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏)
- –ó–∞–ø—É—Å–∫ –ø–æ —Å–æ–±—ã—Ç–∏—è–º (Auth, Database, Storage)

### **9. –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (Performance Monitoring)**
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–∫–æ—Ä–æ—Å—Ç–∏ —Ä–∞–±–æ—Ç—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

---

## **–ö–ª—é—á–µ–≤—ã–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**

‚úÖ **–ù–µ—Ç —Å–µ—Ä–≤–µ—Ä–Ω–æ–≥–æ –∫–æ–¥–∞** ‚Äî –≥–æ—Ç–æ–≤—ã–µ —Ä–µ—à–µ–Ω–∏—è  
‚úÖ **–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç** ‚Äî –º–∏–Ω—É—Ç—ã –≤–º–µ—Å—Ç–æ –Ω–µ–¥–µ–ª—å  
‚úÖ **–ê–≤—Ç–æ–º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ** ‚Äî –Ω–µ –Ω—É–∂–Ω–æ –∞–¥–º–∏–Ω–∏—Ç—å  
‚úÖ **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** ‚Äî –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã —Ä–∞–±–æ—Ç–∞—é—Ç –≤–º–µ—Å—Ç–µ  
‚úÖ **–ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π —Ç–∞—Ä–∏—Ñ** –¥–ª—è —Å—Ç–∞—Ä—Ç–∞  

---

## **–¢–∏–ø–∏—á–Ω—ã–π —Å—Ç–µ–∫:**

**–î–ª—è MVP:** Auth + Firestore + Analytics + Crashlytics  
**–î–ª—è —Å–æ—Ü—Å–µ—Ç–∏:** Auth + Firestore + Storage + FCM  
**–î–ª—è e-commerce:** Auth + Firestore + Analytics + Remote Config  

---

## **–ö–∞–∫ –ø–æ–¥–∫–ª—é—á–∏—Ç—å:**

1. –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–µ–∫—Ç –≤ [Firebase Console](https://console.firebase.google.com)
2. –°–∫–∞—á–∞—Ç—å `google-services.json`
3. –î–æ–±–∞–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –≤ `build.gradle`
4. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –≤ –∫–æ–¥–µ

---

**–ò—Ç–æ–≥:** Firebase ‚Äî —ç—Ç–æ –≥–æ—Ç–æ–≤—ã–π –±—ç–∫–µ–Ω–¥ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –±–µ–∑ —Å–µ—Ä–≤–µ—Ä–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏.

</details>

<details>
  <summary> –ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å Firebase –≤ –ø—Ä–æ–µ–∫—Ç?  </summary>

  **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ Firebase –≤ Android –ø—Ä–æ–µ–∫—Ç:**

## **–®–∞–≥ 1: –°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–µ–∫—Ç –≤ Firebase Console**
1. –ó–∞–π—Ç–∏ –Ω–∞ [console.firebase.google.com](https://console.firebase.google.com)
2. –ù–∞–∂–∞—Ç—å "–°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–µ–∫—Ç"
3. –í–≤–µ—Å—Ç–∏ –Ω–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞
4. –í—ã–∫–ª—é—á–∏—Ç—å Google Analytics (–∏–ª–∏ –æ—Å—Ç–∞–≤–∏—Ç—å)
5. –°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–µ–∫—Ç

## **–®–∞–≥ 2: –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ Android**
1. –í –ø—Ä–æ–µ–∫—Ç–µ –Ω–∞–∂–∞—Ç—å `+ –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ`
2. –í—ã–±—Ä–∞—Ç—å Android (—Å–∏–º–≤–æ–ª Android)
3. **–£–∫–∞–∑–∞—Ç—å:**
   - **–ò–º—è –ø–∞–∫–µ—Ç–∞** (–∏–∑ `build.gradle` ‚Üí `applicationId`)
   - **–ù–∏–∫–Ω–µ–π–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è** (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
   - **SHA-1** (–¥–ª—è Auth —Å Google Sign-In, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
4. –ù–∞–∂–∞—Ç—å "–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ"

## **–®–∞–≥ 3: –°–∫–∞—á–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥ —Ñ–∞–π–ª**
1. –°–∫–∞—á–∞—Ç—å `google-services.json`
2. –ü–æ–ª–æ–∂–∏—Ç—å –≤ **–∫–æ—Ä–µ–Ω—å –º–æ–¥—É–ª—è app** –ø—Ä–æ–µ–∫—Ç–∞:
```
project/
‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îú‚îÄ‚îÄ google-services.json  ‚Üê –í–û–¢ –°–Æ–î–ê
‚îÇ   ‚îú‚îÄ‚îÄ build.gradle
‚îÇ   ‚îî‚îÄ‚îÄ src/
```

## **–®–∞–≥ 4: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Gradle**

### **project-level `build.gradle`**:
```gradle
// Top-level build.gradle
buildscript {
    dependencies {
        // –î–æ–±–∞–≤–∏—Ç—å —ç—Ç–æ—Ç classpath
        classpath 'com.google.gms:google-services:4.4.0'
    }
}
```

### **app-level `build.gradle`**:
```gradle
// app/build.gradle
plugins {
    id 'com.android.application'
    id 'com.google.gms.google-services'  // –î–æ–±–∞–≤–∏—Ç—å —ç—Ç–æ—Ç plugin
}

dependencies {
    // Firebase BoM (Bill of Materials) - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–µ—Ä—Å–∏—è–º–∏
    implementation platform('com.google.firebase:firebase-bom:32.4.0')
    
    // –î–æ–±–∞–≤–∏—Ç—å –Ω—É–∂–Ω—ã–µ Firebase –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
    implementation 'com.google.firebase:firebase-analytics'
    implementation 'com.google.firebase:firebase-auth'
    implementation 'com.google.firebase:firebase-firestore'
    implementation 'com.google.firebase:firebase-storage'
    // –î–æ–±–∞–≤–ª—è—Ç—å —Ç–æ–ª—å–∫–æ –Ω—É–∂–Ω—ã–µ!
}
```

## **–®–∞–≥ 5: –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–µ–∫—Ç**
1. –ù–∞–∂–∞—Ç—å "Sync Now" –≤ Android Studio
2. –ò–ª–∏ –≤—ã–ø–æ–ª–Ω–∏—Ç—å `./gradlew clean build`

## **–®–∞–≥ 6: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ** (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
```kotlin
// –í MainActivity –∏–ª–∏ Application
class MyApp : Application() {
    override fun onCreate() {
        super.onCreate()
        FirebaseApp.initializeApp(this)
        Log.d("Firebase", "Initialized: ${FirebaseApp.getInstance().name}")
    }
}
```

## **–í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã:**

### **1. –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
```gradle
// –ú–∏–Ω–∏–º—É–º –¥–ª—è —Å—Ç–∞—Ä—Ç–∞:
dependencies {
    implementation platform('com.google.firebase:firebase-bom:32.4.0')
    implementation 'com.google.firebase:firebase-analytics' // –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è —Å–±–æ—Ä–∞ –¥–∞–Ω–Ω—ã—Ö
}
```

### **2. –î–ª—è —Ä–∞–∑–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤:**
```gradle
// –î–æ–±–∞–≤–ª—è—Ç—å –ø–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏:
implementation 'com.google.firebase:firebase-auth'        // –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
implementation 'com.google.firebase:firebase-firestore'   // –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
implementation 'com.google.firebase:firebase-storage'     // –§–∞–π–ª—ã
implementation 'com.google.firebase:firebase-messaging'   // Push
implementation 'com.google.firebase:firebase-crashlytics' // –ö—Ä–∞—à–∏
implementation 'com.google.firebase:firebase-config'      // Remote Config
```

### **3. –î–ª—è Kotlin:**
```gradle
plugins {
    id 'com.android.application'
    id 'kotlin-android'
    id 'com.google.gms.google-services'  // plugin –í –ö–û–ù–¶–ï —Å–ø–∏—Å–∫–∞
    id 'kotlin-kapt'  // –ï—Å–ª–∏ –Ω—É–∂–Ω–æ
}
```

### **4. –ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –æ—à–∏–±–∫–∞:**
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–µ—Ä—Å–∏—é `google-services` –≤ classpath
- –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ `google-services.json` –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –ø–∞–ø–∫–µ
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å package name –≤ —Ñ–∞–π–ª–µ –∏ –≤ build.gradle

## **–ü—Ä–∏–º–µ—Ä –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:**

**project/build.gradle:**
```gradle
buildscript {
    dependencies {
        classpath 'com.android.tools.build:gradle:8.1.0'
        classpath 'com.google.gms:google-services:4.4.0'
    }
}
```

**app/build.gradle:**
```gradle
plugins {
    id 'com.android.application'
    id 'com.google.gms.google-services'
}

android {
    namespace 'com.example.myapp'
    // –æ—Å—Ç–∞–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
}

dependencies {
    implementation platform('com.google.firebase:firebase-bom:32.4.0')
    implementation 'com.google.firebase:firebase-analytics'
}
```

## **–ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å–ø–µ—à–Ω–æ–≥–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:**

1. –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
2. –í Firebase Console ‚Üí Project Overview
3. –î–æ–ª–∂–Ω–∞ –ø–æ—è–≤–∏—Ç—å—Å—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞ 1 –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
4. –í –ª–æ–≥–∞—Ö Android Studio: `FirebaseApp initialization successful`

## **–ò—Ç–æ–≥:**
1. **–°–æ–∑–¥–∞—Ç—å** –ø—Ä–æ–µ–∫—Ç –≤ –∫–æ–Ω—Å–æ–ª–∏ Firebase
2. **–î–æ–±–∞–≤–∏—Ç—å** Android –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
3. **–°–∫–∞—á–∞—Ç—å** `google-services.json` ‚Üí –≤ `app/`
4. **–î–æ–±–∞–≤–∏—Ç—å** classpath –∏ plugin –≤ Gradle
5. **–î–æ–±–∞–≤–∏—Ç—å** –Ω—É–∂–Ω—ã–µ Firebase –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
6. **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å** –ø—Ä–æ–µ–∫—Ç

**–í–∞–∂–Ω–æ:** –î–æ–±–∞–≤–ª—è—Ç—å —Ç–æ–ª—å–∫–æ —Ç–µ —Å–µ—Ä–≤–∏—Å—ã Firebase, –∫–æ—Ç–æ—Ä—ã–µ —Ä–µ–∞–ª—å–Ω–æ –Ω—É–∂–Ω—ã –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏!

  </details>

<details>
  <summary> –î–ª—è —á–µ–≥–æ –Ω—É–∂–µ–Ω —Ñ–∞–π–ª google-services.xml </summary>

  **`google-services.json` (–∏–ª–∏ `.xml` –¥–ª—è —Å—Ç–∞—Ä—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤)** ‚Äî —ç—Ç–æ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª Firebase –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

---

## **–î–ª—è —á–µ–≥–æ –Ω—É–∂–µ–Ω:**

### **1. –°–æ–¥–µ—Ä–∂–∏—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Firebase-–ø—Ä–æ–µ–∫—Ç–∞:**
```json
{
  "project_info": {
    "project_number": "123456789012",      // –ù–æ–º–µ—Ä –ø—Ä–æ–µ–∫—Ç–∞ (Sender ID)
    "firebase_url": "https://...",         // URL –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
    "project_id": "myapp-12345",          // ID –ø—Ä–æ–µ–∫—Ç–∞
    "storage_bucket": "myapp-12345.appspot.com"
  },
  "client": [
    {
      "client_info": {
        "mobilesdk_app_id": "1:123456789012:android:abcdef", // App ID
        "android_client_info": {
          "package_name": "com.example.myapp"               // –í–∞—à package name
        }
      },
      "oauth_client": [],          // –î–ª—è Google Sign-In
      "api_key": [                 // API –∫–ª—é—á–∏
        {
          "current_key": "AIzaSyB...123"  // –ì–ª–∞–≤–Ω—ã–π –∫–ª—é—á
        }
      ],
      "services": {
        "analytics_service": {...},
        "appinvite_service": {...}
      }
    }
  ]
}
```

### **2. –ß—Ç–æ —Ö—Ä–∞–Ω–∏—Ç:**
- **Project ID** ‚Äî –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –≤–∞—à–µ–≥–æ Firebase-–ø—Ä–æ–µ–∫—Ç–∞
- **API Keys** ‚Äî –∫–ª—é—á–∏ –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ Firebase API
- **Package name** ‚Äî –∏–º—è –ø–∞–∫–µ—Ç–∞ –≤–∞—à–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- **App ID** ‚Äî —É–Ω–∏–∫–∞–ª—å–Ω—ã–π ID –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ Firebase
- **Database URL** ‚Äî –∞–¥—Ä–µ—Å Realtime Database
- **Storage bucket** ‚Äî –∞–¥—Ä–µ—Å Cloud Storage
- **Sender ID** ‚Äî –¥–ª—è FCM (push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π)
- **OAuth clients** ‚Äî –¥–ª—è Google Sign-In

---

## **–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:**

### **–ü—Ä–∏ —Å–±–æ—Ä–∫–µ –ø—Ä–æ–µ–∫—Ç–∞:**
1. **Gradle plugin** `com.google.gms.google-services` —á–∏—Ç–∞–µ—Ç `google-services.json`
2. **–ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç** XML/Java —Ä–µ—Å—É—Ä—Å—ã —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏:
   - `values/values.xml` —Å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π
   - `AndroidManifest.xml` –¥–æ–±–∞–≤–ª—è–µ—Ç –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
3. **–ò–Ω–∂–µ–∫—Ç–∏—Ä—É–µ—Ç** –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

### **–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:**
```
app/build/generated/res/google-services/{buildType}/values/values.xml
```
–°–æ–¥–µ—Ä–∂–∏—Ç:
```xml
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <string name="firebase_database_url" 
            translatable="false">https://myapp-12345.firebaseio.com</string>
    <string name="gcm_defaultSenderId" 
            translatable="false">123456789012</string>
    <string name="google_api_key" 
            translatable="false">AIzaSyB...123</string>
    <string name="google_app_id" 
            translatable="false">1:123456789012:android:abcdef</string>
    <string name="google_crash_reporting_api_key"
            translatable="false">AIzaSyB...123</string>
    <string name="google_storage_bucket"
            translatable="false">myapp-12345.appspot.com</string>
    <string name="project_id" 
            translatable="false">myapp-12345</string>
</resources>
```

---

## **–ü–æ—á–µ–º—É –Ω–µ —Ö–∞—Ä–¥–∫–æ–¥–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:**

### **‚ùå –ü–õ–û–•–û (—Ö–∞—Ä–¥–∫–æ–¥ –≤ –∫–æ–¥–µ):**
```kotlin
class FirebaseConfig {
    companion object {
        const val API_KEY = "AIzaSyB...123"
        const val PROJECT_ID = "myapp-12345"
        const val DATABASE_URL = "https://myapp-12345.firebaseio.com"
        // –ü—Ä–æ–±–ª–µ–º—ã:
        // 1. –ö–ª—é—á–∏ –≤ –∫–æ–¥–µ (security risk)
        // 2. –†–∞–∑–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –±–∏–ª–¥–æ–≤
        // 3. –°–ª–æ–∂–Ω–æ –º–µ–Ω—è—Ç—å
    }
}
```

### **‚úÖ –•–û–†–û–®–û (—á–µ—Ä–µ–∑ google-services.json):**
- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** ‚Äî –∫–ª—é—á–∏ –Ω–µ –≤ –∏—Å—Ö–æ–¥–Ω–æ–º –∫–æ–¥–µ
- **–†–∞–∑–Ω—ã–µ –∫–æ–Ω—Ñ–∏–≥–∏** –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –±–∏–ª–¥–æ–≤ (debug/release)
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ** –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –≤ Firebase Console
- **–¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ** ‚Äî –æ–¥–∏–Ω —Ñ–∞–π–ª –¥–ª—è –≤—Å–µ—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫

---

## **–†–∞–±–æ—Ç–∞ —Å —Ä–∞–∑–Ω—ã–º–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è–º–∏:**

### **–†–∞–∑–Ω—ã–µ —Ñ–∞–π–ª—ã –¥–ª—è debug/release:**
```
app/
‚îú‚îÄ‚îÄ google-services.json          // Production (release)
‚îî‚îÄ‚îÄ src/
    ‚îú‚îÄ‚îÄ debug/
    ‚îÇ   ‚îî‚îÄ‚îÄ google-services.json  // Debug (—Ç–µ—Å—Ç–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç)
    ‚îî‚îÄ‚îÄ release/
        ‚îî‚îÄ‚îÄ google-services.json  // Release (–ø—Ä–æ–¥–∞–∫—à–µ–Ω)
```

### **–ò–ª–∏ —á–µ—Ä–µ–∑ flavors:**
```
app/
‚îî‚îÄ‚îÄ src/
    ‚îú‚îÄ‚îÄ dev/
    ‚îÇ   ‚îî‚îÄ‚îÄ google-services.json  // Development
    ‚îú‚îÄ‚îÄ staging/
    ‚îÇ   ‚îî‚îÄ‚îÄ google-services.json  // Staging
    ‚îî‚îÄ‚îÄ prod/
        ‚îî‚îÄ‚îÄ google-services.json  // Production
```

---

## **–í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã:**

### **1. –ù–µ –∫–æ–º–º–∏—Ç–∏—Ç—å –≤ git?**
- **–ù–ï –∫–æ–º–º–∏—Ç–∏—Ç—å** –µ—Å–ª–∏ –ø—Ä–æ–µ–∫—Ç –ø—É–±–ª–∏—á–Ω—ã–π
- **–ú–û–ñ–ù–û –∫–æ–º–º–∏—Ç–∏—Ç—å** –¥–ª—è –ø—Ä–∏–≤–∞—Ç–Ω—ã—Ö —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤
- **–õ—É—á—à–µ:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å CI/CD –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ

### **2. –ï—Å–ª–∏ —Ñ–∞–π–ª –ø–æ—Ç–µ—Ä—è–Ω:**
1. –ó–∞–π—Ç–∏ –≤ Firebase Console
2. Project Settings ‚Üí Your apps
3. –°–∫–∞—á–∞—Ç—å `google-services.json` –∑–∞–Ω–æ–≤–æ

### **3. –î–ª—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π:**
- –ö–∞–∂–¥–æ–º—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é –≤ Firebase ‚Äî —Å–≤–æ–π —Ñ–∞–π–ª
- –ú–æ–∂–Ω–æ –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤ –æ–¥–Ω–æ–º –ø—Ä–æ–µ–∫—Ç–µ (com.myapp, com.myapp.debug)

### **4. –ú–∏–≥—Ä–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞:**
–ü—Ä–∏ —Å–º–µ–Ω–µ package name:
1. –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ Firebase Console
2. –°–∫–∞—á–∞—Ç—å –Ω–æ–≤—ã–π `google-services.json`
3. –ó–∞–º–µ–Ω–∏—Ç—å —Å—Ç–∞—Ä—ã–π —Ñ–∞–π–ª

---

## **–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ –∫–æ–¥–µ:**

```kotlin
// Firebase –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–∏—Ç–∞–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–∑ google-services.json
// –í–∞–º –Ω–µ –Ω—É–∂–Ω–æ –¥–µ–ª–∞—Ç—å —ç—Ç–æ –≤—Ä—É—á–Ω—É—é!

class MainActivity : AppCompatActivity() {
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate()
        
        // Firebase —É–∂–µ –∑–Ω–∞–µ—Ç –≤—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–∑ google-services.json
        val db = Firebase.firestore // URL —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω
        val auth = Firebase.auth    // API key —É–∂–µ –µ—Å—Ç—å
        val storage = Firebase.storage // Bucket —É–∂–µ —É–∫–∞–∑–∞–Ω
        
        // –í—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ —Ö–∞—Ä–¥–∫–æ–¥–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫!
    }
}
```

---

## **–ò—Ç–æ–≥ –¥–ª—è Junior:**

**`google-services.json` –Ω—É–∂–µ–Ω –¥–ª—è:**
1. **–•—Ä–∞–Ω–µ–Ω–∏—è** –≤—Å–µ—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫ Firebase –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ
2. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏** ‚Äî –∫–ª—é—á–∏ –Ω–µ –≤ –∏—Å—Ö–æ–¥–Ω–æ–º –∫–æ–¥–µ
3. **–£–ø—Ä–æ—â–µ–Ω–∏—è** ‚Äî –Ω–µ –Ω—É–∂–Ω–æ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–æ–≤–∞—Ç—å Firebase –≤—Ä—É—á–Ω—É—é
4. **–ì–∏–±–∫–æ—Å—Ç–∏** ‚Äî —Ä–∞–∑–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –±–∏–ª–¥–æ–≤
5. **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏** ‚Äî –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ Firebase Console –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è

**–ü—Ä–æ—Å—Ç–æ –ø–æ–ª–æ–∂–∏—Ç–µ —Ñ–∞–π–ª –≤ `app/` –∏ –¥–æ–±–∞–≤—å—Ç–µ Gradle plugin ‚Äî Firebase —Å–∞–º –≤—Å–µ –Ω–∞—Å—Ç—Ä–æ–∏—Ç!**


</details>

<details>
  <summary> –ö–∞–∫–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –Ω–µ–æ–±—Ö–æ–¥–∏–º–∞ –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –ø—É—à–µ–π? –ö–∞–∫ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –ø—É—à–∞? </summary>

  ## **–î–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –ø—É—à–µ–π (FCM) –Ω—É–∂–Ω—ã –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**

### **1. –û—Å–Ω–æ–≤–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –≤ `build.gradle`:**
```gradle
dependencies {
    // Firebase BoM –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤–µ—Ä—Å–∏—è–º–∏
    implementation platform('com.google.firebase:firebase-bom:32.4.0')
    
    // –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –¥–ª—è FCM:
    implementation 'com.google.firebase:firebase-messaging'
    implementation 'com.google.firebase:firebase-analytics' // –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è
    
    // –î–ª—è —Ä–∞–±–æ—Ç—ã —Å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):
    implementation 'androidx.core:core-ktx:1.10.1'
}
```

---

## **–†–µ–∞–ª–∏–∑–∞—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø—É—à–µ–π:**

### **–®–∞–≥ 1: –°–æ–∑–¥–∞—Ç—å —Å–µ—Ä–≤–∏—Å –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π**
```kotlin
import com.google.firebase.messaging.FirebaseMessagingService
import com.google.firebase.messaging.RemoteMessage

class MyFirebaseMessagingService : FirebaseMessagingService() {

    // 1. –í—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –Ω–æ–≤–æ–≥–æ FCM —Ç–æ–∫–µ–Ω–∞
    override fun onNewToken(token: String) {
        Log.d("FCM", "New token: $token")
        // –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ç–æ–∫–µ–Ω –Ω–∞ –≤–∞—à —Å–µ—Ä–≤–µ—Ä
        sendTokenToServer(token)
    }

    // 2. –í—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
    override fun onMessageReceived(message: RemoteMessage) {
        Log.d("FCM", "Message received")
        
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ç–∏–ø —Å–æ–æ–±—â–µ–Ω–∏—è
        message.notification?.let { notification ->
            // –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —Å –∑–∞–≥–æ–ª–æ–≤–∫–æ–º –∏ —Ç–µ–ª–æ–º
            showNotification(
                notification.title ?: "–ù–æ–≤–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ",
                notification.body ?: "",
                message.data // –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
            )
        }
        
        // –ò–ª–∏ –¥–∞–Ω–Ω—ã–µ –±–µ–∑ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
        message.data.let { data ->
            if (data.isNotEmpty()) {
                handleDataMessage(data)
            }
        }
    }
    
    private fun showNotification(title: String, body: String, data: Map<String, String>) {
        // –°–æ–∑–¥–∞–µ–º –∫–∞–Ω–∞–ª —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π (–¥–ª—è Android 8.0+)
        createNotificationChannel()
        
        // –°–æ–∑–¥–∞–µ–º Intent –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
        val intent = Intent(this, MainActivity::class.java).apply {
            flags = Intent.FLAG_ACTIVITY_NEW_TASK or Intent.FLAG_ACTIVITY_CLEAR_TASK
            putExtra("data", data["key"]) // –ø–µ—Ä–µ–¥–∞–µ–º –¥–∞–Ω–Ω—ã–µ
        }
        
        val pendingIntent = PendingIntent.getActivity(
            this, 0, intent,
            PendingIntent.FLAG_UPDATE_CURRENT or PendingIntent.FLAG_IMMUTABLE
        )
        
        // –°—Ç—Ä–æ–∏–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
        val notification = NotificationCompat.Builder(this, "fcm_channel")
            .setContentTitle(title)
            .setContentText(body)
            .setSmallIcon(R.drawable.ic_notification)
            .setContentIntent(pendingIntent)
            .setAutoCancel(true)
            .setPriority(NotificationCompat.PRIORITY_HIGH)
            .build()
        
        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
        NotificationManagerCompat.from(this)
            .notify(System.currentTimeMillis().toInt(), notification)
    }
    
    private fun createNotificationChannel() {
        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.O) {
            val channel = NotificationChannel(
                "fcm_channel",
                "–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è",
                NotificationManager.IMPORTANCE_HIGH
            ).apply {
                description = "–ö–∞–Ω–∞–ª –¥–ª—è push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π"
            }
            
            val manager = getSystemService(NotificationManager::class.java)
            manager.createNotificationChannel(channel)
        }
    }
    
    private fun handleDataMessage(data: Map<String, String>) {
        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö (–±–µ–∑ –ø–æ–∫–∞–∑–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è)
        when (data["type"]) {
            "sync" -> syncData()
            "update" -> checkForUpdates()
        }
    }
    
    private fun sendTokenToServer(token: String) {
        // –û—Ç–ø—Ä–∞–≤–∫–∞ —Ç–æ–∫–µ–Ω–∞ –Ω–∞ –≤–∞—à –±—ç–∫–µ–Ω–¥
        // –ù–∞–ø—Ä–∏–º–µ—Ä —á–µ—Ä–µ–∑ Retrofit –∏–ª–∏ Firestore
        Log.d("FCM", "Token to server: $token")
    }
}
```

### **–®–∞–≥ 2: –û–±—ä—è–≤–∏—Ç—å —Å–µ—Ä–≤–∏—Å –≤ `AndroidManifest.xml`**
```xml
<service
    android:name=".MyFirebaseMessagingService"
    android:exported="false">
    <intent-filter>
        <action android:name="com.google.firebase.MESSAGING_EVENT" />
    </intent-filter>
</service>

<!-- –î–ª—è Android 13+ (API 33) –Ω—É–∂–Ω–æ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ -->
<uses-permission android:name="android.permission.POST_NOTIFICATIONS" />
```

### **–®–∞–≥ 3: –ó–∞–ø—Ä–æ—Å–∏—Ç—å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è (–¥–ª—è Android 13+)**
```kotlin
class MainActivity : AppCompatActivity() {
    
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        
        // –ó–∞–ø—Ä–æ—Å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –Ω–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (Android 13+)
        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.TIRAMISU) {
            if (ContextCompat.checkSelfPermission(
                    this,
                    Manifest.permission.POST_NOTIFICATIONS
                ) != PackageManager.PERMISSION_GRANTED
            ) {
                ActivityCompat.requestPermissions(
                    this,
                    arrayOf(Manifest.permission.POST_NOTIFICATIONS),
                    REQUEST_NOTIFICATION_PERMISSION
                )
            }
        }
        
        // –ü–æ–ª—É—á–∏—Ç—å —Ç–µ–∫—É—â–∏–π FCM —Ç–æ–∫–µ–Ω
        FirebaseMessaging.getInstance().token.addOnCompleteListener { task ->
            if (task.isSuccessful) {
                val token = task.result
                Log.d("FCM", "Current token: $token")
            }
        }
    }
}
```

### **–®–∞–≥ 4: –ü–æ–¥–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ —Ç–µ–º—ã (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)**
```kotlin
// –ü–æ–¥–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ —Ç–µ–º—É
FirebaseMessaging.getInstance().subscribeToTopic("news")
    .addOnCompleteListener { task ->
        if (task.isSuccessful) {
            Log.d("FCM", "Subscribed to news topic")
        }
    }

// –û—Ç–ø–∏—Å–∞—Ç—å—Å—è –æ—Ç —Ç–µ–º—ã
FirebaseMessaging.getInstance().unsubscribeFromTopic("news")
```

---

## **–¢–∏–ø—ã push-—Å–æ–æ–±—â–µ–Ω–∏–π:**

### **1. Notification messages (–∞–≤—Ç–æ-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è):**
```json
{
  "to": "token...",
  "notification": {
    "title": "–ó–∞–≥–æ–ª–æ–≤–æ–∫",
    "body": "–¢–µ–∫—Å—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è",
    "icon": "ic_notification"
  }
}
```
- **–ü–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏** –µ—Å–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ –±—ç–∫–≥—Ä–∞—É–Ω–¥–µ
- **`onMessageReceived` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è** –µ—Å–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ –ø–µ—Ä–µ–¥–Ω–µ–º –ø–ª–∞–Ω–µ

### **2. Data messages (–¥–∞–Ω–Ω—ã–µ):**
```json
{
  "to": "token...",
  "data": {
    "type": "message",
    "user": "–ò–≤–∞–Ω",
    "text": "–ü—Ä–∏–≤–µ—Ç!"
  }
}
```
- **–ù–µ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏**
- **–í—Å–µ–≥–¥–∞ –ø–æ–ø–∞–¥–∞—é—Ç –≤ `onMessageReceived`**
- **–ù—É–∂–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –≤—Ä—É—á–Ω—É—é**

### **3. –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ:**
```json
{
  "to": "token...",
  "notification": {
    "title": "–ù–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ"
  },
  "data": {
    "chat_id": "123",
    "message_id": "456"
  }
}
```

---

## **–û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞–∂–∞—Ç–∏—è –Ω–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ:**

### **–í Activity:**
```kotlin
class MainActivity : AppCompatActivity() {
    
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –æ—Ç–∫—Ä—ã–ª–∏ –ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ –Ω–∞–∂–∞—Ç–∏—é –Ω–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
        if (intent.extras != null) {
            for (key in intent.extras!!.keySet()) {
                val value = intent.extras!![key]
                Log.d("FCM", "Key: $key Value: $value")
            }
            
            // –ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ –∏–∑ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
            val data = intent.getStringExtra("data")
            if (data != null) {
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π —ç–∫—Ä–∞–Ω
                showNotificationScreen(data)
            }
        }
    }
}
```

---

## **–í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã:**

### **1. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π:**
```kotlin
// –ü—Ä–æ–≤–µ—Ä—è–µ–º, –≤–∫–ª—é—á–µ–Ω—ã –ª–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
val areNotificationsEnabled = NotificationManagerCompat
    .from(context)
    .areNotificationsEnabled()

if (!areNotificationsEnabled) {
    // –ü–æ–∫–∞–∑–∞—Ç—å –¥–∏–∞–ª–æ–≥ –æ –≤–∫–ª—é—á–µ–Ω–∏–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
    showEnableNotificationsDialog()
}
```

### **2. –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤ –±—ç–∫–≥—Ä–∞—É–Ω–¥–µ:**
- –ï—Å–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ **–∑–∞–∫—Ä—ã—Ç–æ** ‚Üí —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –≤ —Å—Ç–∞—Ç—É—Å-–±–∞—Ä–µ
- –ï—Å–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ **–≤ –±—ç–∫–≥—Ä–∞—É–Ω–¥–µ** ‚Üí —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –≤ —Å—Ç–∞—Ç—É—Å-–±–∞—Ä–µ
- –ï—Å–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ **–Ω–∞ –ø–µ—Ä–µ–¥–Ω–µ–º –ø–ª–∞–Ω–µ** ‚Üí `onMessageReceived` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è —Å—Ä–∞–∑—É

### **3. –õ–∏–º–∏—Ç—ã FCM:**
- –†–∞–∑–º–µ—Ä —Å–æ–æ–±—â–µ–Ω–∏—è: **4KB** –¥–ª—è –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö
- –ß–∞—Å—Ç–æ—Ç–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏: –ª–∏–º–∏—Ç—ã –¥–ª—è –±–µ—Å–ø–ª–∞—Ç–Ω–æ–≥–æ —Ç–∞—Ä–∏—Ñ–∞

---

## **–ò—Ç–æ–≥ –¥–ª—è Junior:**

### **–ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å:**
1. **–î–æ–±–∞–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏** `firebase-messaging` –∏ `firebase-analytics`
2. **–°–æ–∑–¥–∞—Ç—å —Å–µ—Ä–≤–∏—Å**, –Ω–∞—Å–ª–µ–¥—É—é—â–∏–π `FirebaseMessagingService`
3. **–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å** `onNewToken()` –∏ `onMessageReceived()`
4. **–û–±—ä—è–≤–∏—Ç—å —Å–µ—Ä–≤–∏—Å** –≤ –º–∞–Ω–∏—Ñ–µ—Å—Ç–µ
5. **–ó–∞–ø—Ä–æ—Å–∏—Ç—å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è** –¥–ª—è Android 13+
6. **–ü–æ–ª—É—á–∏—Ç—å —Ç–æ–∫–µ–Ω** –∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä

### **–ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç–æ–¥—ã:**
- `onNewToken()` ‚Äî –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è/–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ç–æ–∫–µ–Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
- `onMessageReceived()` ‚Äî –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø—Ä–∏—à–µ–¥—à–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
- `FirebaseMessaging.getInstance().token` ‚Äî –ø–æ–ª—É—á–∏—Ç—å —Ç–µ–∫—É—â–∏–π —Ç–æ–∫–µ–Ω

**–ü—Ä–æ—Å—Ç–æ–π –ø—Ä–∏–º–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç –∏–∑ –∫–æ—Ä–æ–±–∫–∏, –∫–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è ‚Äî –≤ `onMessageReceived()`.**

</details>  

<details>
  <summary>–ö–∞–∫ –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è –æ—Ç–ø—Ä–∞–≤–∫–∞ –æ—à–∏–±–æ–∫ –≤ –∫–æ–Ω—Å–æ–ª—å Firebase? </summary>

  ## **–î–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –æ—à–∏–±–æ–∫ –≤ Firebase Crashlytics:**

### **1. –î–æ–±–∞–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å:**
```gradle
dependencies {
    implementation platform('com.google.firebase:firebase-bom:32.4.0')
    implementation 'com.google.firebase:firebase-crashlytics'
}
```

### **2. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è):**
Crashlytics –≤–∫–ª—é—á–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏ `google-services.json`.

---

## **–û—Ç–ø—Ä–∞–≤–∫–∞ –æ—à–∏–±–æ–∫:**

### **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ (–∫—Ä–∞—à–∏):**
```kotlin
// –í—Å–µ –Ω–µ–æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è
fun riskyFunction() {
    // –ï—Å–ª–∏ –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏–µ - Crashlytics –æ—Ç–ø—Ä–∞–≤–∏—Ç –µ–≥–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
    val result = 10 / 0 // ArithmeticException
}
```

### **–í—Ä—É—á–Ω—É—é (–Ω–µ—Ñ–∞—Ç–∞–ª—å–Ω—ã–µ –æ—à–∏–±–∫–∏):**
```kotlin
try {
    // –ö–æ–¥, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–µ—Ç –≤—ã–∑–≤–∞—Ç—å –æ—à–∏–±–∫—É
    processUserData()
} catch (e: Exception) {
    // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –æ—à–∏–±–∫—É –≤—Ä—É—á–Ω—É—é
    FirebaseCrashlytics.getInstance().recordException(e)
    
    // –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
    FirebaseCrashlytics.getInstance().log("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è")
    
    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —Å–æ–æ–±—â–µ–Ω–∏–µ
    showErrorToast("–ß—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫")
}
```

---

## **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏:**

### **1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –∫–ª—é—á–∏:**
```kotlin
// –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∫–ª—é—á–∏ –¥–ª—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –æ—à–∏–±–∫–∏
val crashlytics = FirebaseCrashlytics.getInstance()

crashlytics.setCustomKey("user_id", userId)
crashlytics.setCustomKey("app_version", BuildConfig.VERSION_NAME)
crashlytics.setCustomKey("android_version", Build.VERSION.SDK_INT)
crashlytics.setCustomKey("device_model", Build.MODEL)

// –í —Å–ª—É—á–∞–µ –æ—à–∏–±–∫–∏ —ç—Ç–∏ –∫–ª—é—á–∏ –±—É–¥—É—Ç –ø—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω—ã –∫ –æ—Ç—á–µ—Ç—É
```

### **2. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:**
```kotlin
// –î–æ–±–∞–≤–ª—è–µ–º –ª–æ–≥–∏ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –ø–æ—Ç–æ–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
FirebaseCrashlytics.getInstance().log("–ù–∞—á–∞–ª–æ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö")
// ... –∫–æ–¥ ...
FirebaseCrashlytics.getInstance().log("–î–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ")
// ... –∫–æ–¥ ...
FirebaseCrashlytics.getInstance().log("–û—à–∏–±–∫–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞ JSON")
```

---

## **–ü–æ–ª–Ω—ã–π –ø—Ä–∏–º–µ—Ä:**
```kotlin
class DataProcessor {
    fun processData(userId: String, json: String) {
        val crashlytics = FirebaseCrashlytics.getInstance()
        
        // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç
        crashlytics.setCustomKey("user_id", userId)
        crashlytics.setCustomKey("data_size", json.length)
        crashlytics.log("–ù–∞—á–∞–ª–æ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: $userId")
        
        try {
            // –ü–∞—Ä—Å–∏–º JSON
            val data = JSONObject(json)
            crashlytics.log("JSON —É—Å–ø–µ—à–Ω–æ —Ä–∞—Å–ø–∞—Ä—Å–µ–Ω")
            
            // –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –¥–∞–Ω–Ω—ã–µ
            val result = complexProcessing(data)
            crashlytics.log("–û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ")
            
        } catch (e: JSONException) {
            // –û—à–∏–±–∫–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞
            crashlytics.log("–û—à–∏–±–∫–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞ JSON: ${e.message}")
            crashlytics.setCustomKey("json_error", "invalid_format")
            crashlytics.recordException(e)
            
        } catch (e: IOException) {
            // –°–µ—Ç–µ–≤–∞—è –æ—à–∏–±–∫–∞
            crashlytics.log("IO –æ—à–∏–±–∫–∞: ${e.message}")
            crashlytics.recordException(e)
            
        } catch (e: Exception) {
            // –õ—é–±–∞—è –¥—Ä—É–≥–∞—è –æ—à–∏–±–∫–∞
            crashlytics.log("–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞: ${e.message}")
            crashlytics.recordException(e)
            throw e // –ë—Ä–æ—Å–∞–µ–º –¥–∞–ª—å—à–µ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∫—Ä–∞—à-—Ä–µ–ø–æ—Ä—Ç–∞
        }
    }
}
```

---

## **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Å–±–æ—Ä–æ–∫:**

### **–í `build.gradle`:**
```gradle
android {
    buildTypes {
        debug {
            // –û—Ç–∫–ª—é—á–∞–µ–º Crashlytics –¥–ª—è debug —Å–±–æ—Ä–æ–∫
            firebaseCrashlytics {
                mappingFileUploadEnabled false
            }
        }
        release {
            // –í–∫–ª—é—á–∞–µ–º –¥–ª—è release
            firebaseCrashlytics {
                nativeSymbolUploadEnabled true
                unstrippedNativeLibsDir 'path/to/unstripped/libs'
            }
        }
    }
}
```

### **–ü—Ä–æ–≥—Ä–∞–º–º–Ω–æ–µ –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ:**
```kotlin
// –û—Ç–∫–ª—é—á–∏—Ç—å Crashlytics (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è debug)
FirebaseCrashlytics.getInstance().setCrashlyticsCollectionEnabled(false)

// –í–∫–ª—é—á–∏—Ç—å –æ–±—Ä–∞—Ç–Ω–æ
FirebaseCrashlytics.getInstance().setCrashlyticsCollectionEnabled(true)
```

---

## **–ü—Ä–æ—Å–º–æ—Ç—Ä –æ—à–∏–±–æ–∫ –≤ –∫–æ–Ω—Å–æ–ª–∏:**

1. **–ó–∞–π—Ç–∏ –≤** [Firebase Console](https://console.firebase.google.com)
2. **–í—ã–±—Ä–∞—Ç—å –ø—Ä–æ–µ–∫—Ç** ‚Üí **Crashlytics** –≤ –º–µ–Ω—é —Å–ª–µ–≤–∞
3. **–í–∏–¥–µ—Ç—å:**
   - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫—Ä–∞—à–µ–π
   - –°—Ç–µ–∫ —Ç—Ä–µ–π—Å—ã
   - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –∫–ª—é—á–∏ –∏ –ª–æ–≥–∏
   - –£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –∏ –≤–µ—Ä—Å–∏–∏ –û–°

---

## **–í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã:**

### **1. –î–ª—è NDK (–Ω–∞—Ç–∏–≤–Ω—ã–µ –∫—Ä–∞—à–∏):**
```gradle
android {
    buildTypes {
        release {
            firebaseCrashlytics {
                nativeSymbolUploadEnabled true
                unstrippedNativeLibsDir 'build/intermediates/merged_native_libs/release/out/lib'
            }
        }
    }
}
```

### **2. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã:**
```kotlin
// –¢–µ—Å—Ç–æ–≤–∞—è –æ—à–∏–±–∫–∞ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏
fun testCrashlytics() {
    // –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –∫–Ω–æ–ø–∫—É –¥–ª—è —Ç–µ—Å—Ç–∞
    FirebaseCrashlytics.getInstance().log("–¢–µ—Å—Ç Crashlytics")
    throw RuntimeException("–¢–µ—Å—Ç–æ–≤–∞—è –æ—à–∏–±–∫–∞ –¥–ª—è Crashlytics")
}
```

### **3. –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:**
- –î–∞–Ω–Ω—ã–µ –æ–± –æ—à–∏–±–∫–∞—Ö –ø–æ—è–≤–ª—è—é—Ç—Å—è —á–µ—Ä–µ–∑ **5-10 –º–∏–Ω—É—Ç**
- –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π —Ç–∞—Ä–∏—Ñ: **–±–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π** –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –æ—Ç—á–µ—Ç–æ–≤
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ: **90 –¥–Ω–µ–π** –∏—Å—Ç–æ—Ä–∏–∏

---

## **–ò—Ç–æ–≥ –¥–ª—è Junior:**

### **–ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å:**
1. **–î–æ–±–∞–≤–∏—Ç—å** `firebase-crashlytics` –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å
2. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏** –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –≤—Å–µ –Ω–µ–æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è
3. **–í—Ä—É—á–Ω—É—é** –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —á–µ—Ä–µ–∑ `recordException()`
4. **–î–æ–±–∞–≤–ª—è—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç** —á–µ—Ä–µ–∑ `setCustomKey()` –∏ `log()`

### **–ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç–æ–¥—ã:**
- `recordException(e)` ‚Äî –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –æ—à–∏–±–∫—É
- `setCustomKey(key, value)` ‚Äî –¥–æ–±–∞–≤–∏—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç
- `log(message)` ‚Äî –¥–æ–±–∞–≤–∏—Ç—å –ª–æ–≥
- `setCrashlyticsCollectionEnabled()` ‚Äî –≤–∫–ª—é—á–∏—Ç—å/–≤—ã–∫–ª—é—á–∏—Ç—å

**–ü—Ä–æ—Å—Ç–æ –¥–æ–±–∞–≤—å—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å ‚Äî –∫—Ä–∞—à–∏ –Ω–∞—á–Ω—É—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏!** 

  <details>
  <summary> –ß—Ç–æ —Å–æ–¥–µ—Ä–∂–∏—Ç –≤ —Å–µ–±–µ google-services.xml </summary>

  **–í Android –ø—Ä–æ–µ–∫—Ç–∞—Ö –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `google-services.json`, –∞ –Ω–µ `.xml`. XML –≤–µ—Ä—Å–∏—è ‚Äî —É—Å—Ç–∞—Ä–µ–≤—à–∏–π —Ñ–æ—Ä–º–∞—Ç –¥–ª—è –æ—á–µ–Ω—å —Å—Ç–∞—Ä—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤.**

---

## **–ß—Ç–æ —Å–æ–¥–µ—Ä–∂–∏—Ç `google-services.json`:**

### **1. –û—Å–Ω–æ–≤–Ω—ã–µ —Ä–∞–∑–¥–µ–ª—ã —Ñ–∞–π–ª–∞:**
```json
{
  "project_info": {
    "project_number": "123456789012",      // –ù–æ–º–µ—Ä –ø—Ä–æ–µ–∫—Ç–∞ (Sender ID –¥–ª—è FCM)
    "firebase_url": "https://myapp-12345.firebaseio.com", // Realtime DB URL
    "project_id": "myapp-12345",          // –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID –ø—Ä–æ–µ–∫—Ç–∞
    "storage_bucket": "myapp-12345.appspot.com" // Cloud Storage bucket
  },
  
  "client": [
    {
      "client_info": {
        "mobilesdk_app_id": "1:123456789012:android:abcdef123456", // App ID
        "android_client_info": {
          "package_name": "com.example.myapp" // –í–∞—à package name
        }
      },
      "oauth_client": [ // –î–ª—è Google Sign-In
        {
          "client_id": "123456-abcdef.apps.googleusercontent.com",
          "client_type": 3
        }
      ],
      "api_key": [ // API –∫–ª—é—á–∏
        {
          "current_key": "AIzaSyB...123" // –ì–ª–∞–≤–Ω—ã–π API –∫–ª—é—á
        }
      ],
      "services": { // –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤
        "analytics_service": {
          "status": 1
        },
        "appinvite_service": {
          "status": 2,
          "other_platform_oauth_client": []
        },
        "ads_service": {
          "status": 2
        }
      }
    }
  ],
  
  "configuration_version": "1" // –í–µ—Ä—Å–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
}
```

---

## **–ö–ª—é—á–µ–≤—ã–µ –ø–æ–ª—è:**

### **–î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ –≤–∞–∂–Ω—ã:**
1. **`project_number`** (Sender ID) ‚Äî –¥–ª—è FCM push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
2. **`project_id`** ‚Äî —É–Ω–∏–∫–∞–ª—å–Ω—ã–π ID Firebase –ø—Ä–æ–µ–∫—Ç–∞
3. **`mobilesdk_app_id`** ‚Äî ID –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ Firebase
4. **`package_name`** ‚Äî –∏–º—è –ø–∞–∫–µ—Ç–∞ –≤–∞—à–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
5. **`current_key`** ‚Äî API –∫–ª—é—á –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ Firebase
6. **`firebase_url`** ‚Äî URL Realtime Database
7. **`storage_bucket`** ‚Äî URL Cloud Storage

---

## **–ö–∞–∫ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Gradle plugin'–æ–º:**

–ü—Ä–∏ —Å–±–æ—Ä–∫–µ –ø—Ä–æ–µ–∫—Ç–∞ plugin:
1. **–ß–∏—Ç–∞–µ—Ç** `google-services.json`
2. **–ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç** `values.xml` –≤ `build/generated/res/`:
```xml
<resources>
    <string name="firebase_database_url">https://myapp-12345.firebaseio.com</string>
    <string name="gcm_defaultSenderId">123456789012</string>
    <string name="google_api_key">AIzaSyB...123</string>
    <string name="google_app_id">1:123456789012:android:abcdef</string>
    <string name="google_storage_bucket">myapp-12345.appspot.com</string>
    <string name="project_id">myapp-12345</string>
</resources>
```

3. **–î–æ–±–∞–≤–ª—è–µ—Ç** –≤ `AndroidManifest.xml`:
```xml
<meta-data
    android:name="com.google.android.gms.version"
    android:value="@integer/google_play_services_version" />
```

---

## **–î–ª—è —Ä–∞–∑–Ω—ã—Ö —Å–±–æ—Ä–æ–∫ (debug/release):**

–ú–æ–∂–Ω–æ –∏–º–µ—Ç—å —Ä–∞–∑–Ω—ã–µ —Ñ–∞–π–ª—ã:
```
app/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ debug/google-services.json     // –î–ª—è debug
‚îÇ   ‚îî‚îÄ‚îÄ release/google-services.json   // –î–ª—è release
```

–ò–ª–∏ –æ–¥–∏–Ω —Ñ–∞–π–ª, –Ω–æ —Å —Ä–∞–∑–Ω—ã–º–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è–º–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –≤ Firebase Console.

---

## **–ò—Ç–æ–≥ –¥–ª—è Junior:**

**`google-services.json` —Å–æ–¥–µ—Ä–∂–∏—Ç:**
1. **–ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã** –ø—Ä–æ–µ–∫—Ç–∞ –∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
2. **API –∫–ª—é—á–∏** –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ Firebase
3. **URL –∞–¥—Ä–µ—Å–∞** —Å–µ—Ä–≤–∏—Å–æ–≤ (DB, Storage)
4. **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é** OAuth –¥–ª—è Google Sign-In
5. **–ù–∞—Å—Ç—Ä–æ–π–∫–∏** –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤

**–ù–µ —Ö—Ä–∞–Ω–∏—Ç–µ –µ–≥–æ –≤ –ø—É–±–ª–∏—á–Ω—ã—Ö —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è—Ö** ‚Äî —Å–æ–¥–µ—Ä–∂–∏—Ç API –∫–ª—é—á–∏!

  </details

  <details>
  <summary> –î–ª—è —á–µ–≥–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º Channel –≤ –ø—É—à–∞—Ö? </summary>  

  ## **Notification Channels (–∫–∞–Ω–∞–ª—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π) –Ω—É–∂–Ω—ã –¥–ª—è Android 8.0 (API 26) –∏ –≤—ã—à–µ.**

---

## **–ó–∞—á–µ–º –Ω—É–∂–Ω—ã:**

### **1. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º:**
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç **–Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –∫–∞–∂–¥—É—é –∫–∞—Ç–µ–≥–æ—Ä–∏—é —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ—Ç–¥–µ–ª—å–Ω–æ**:
- –ó–≤—É–∫/–≤–∏–±—Ä–∞—Ü–∏—è
- –í–∞–∂–Ω–æ—Å—Ç—å (priority)
- –ü–æ–∫–∞–∑ –Ω–∞ —ç–∫—Ä–∞–Ω–µ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏
- Badge icon (—Ü–∏—Ñ—Ä–∞ –Ω–∞ –∏–∫–æ–Ω–∫–µ)

### **2. –ü—Ä–∏–º–µ—Ä –∏–∑ –Ω–∞—Å—Ç—Ä–æ–µ–∫ —Ç–µ–ª–µ—Ñ–æ–Ω–∞:**
```
–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è "–ú–æ–µ–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ"
‚îú‚îÄ‚îÄ üì¢ –ù–æ–≤–æ—Å—Ç–∏ (–º–æ–∂–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å)
‚îú‚îÄ‚îÄ üîî –°–æ–æ–±—â–µ–Ω–∏—è (–º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –∑–≤—É–∫)
‚îú‚îÄ‚îÄ üí∞ –ê–∫—Ü–∏–∏ (–º–æ–∂–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å –≤–∏–±—Ä–∞—Ü–∏—é)
‚îî‚îÄ‚îÄ üéØ –í–∞–∂–Ω—ã–µ (–ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –Ω–∞ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω–æ–º —ç–∫—Ä–∞–Ω–µ)
```

---

## **–ö–∞–∫ —Å–æ–∑–¥–∞—Ç—å –∫–∞–Ω–∞–ª:**

### **–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è Android 8.0+:**
```kotlin
fun createNotificationChannel() {
    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.O) {
        // 1. –°–æ–∑–¥–∞–µ–º –∫–∞–Ω–∞–ª
        val channel = NotificationChannel(
            "news_channel",          // ID –∫–∞–Ω–∞–ª–∞ (—É–Ω–∏–∫–∞–ª—å–Ω—ã–π)
            "–ù–æ–≤–æ—Å—Ç–∏",               // –ù–∞–∑–≤–∞–Ω–∏–µ (–≤–∏–¥–∏—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å)
            NotificationManager.IMPORTANCE_HIGH // –í–∞–∂–Ω–æ—Å—Ç—å
        ).apply {
            description = "–ù–æ–≤–æ—Å—Ç–∏ –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è" // –û–ø–∏—Å–∞–Ω–∏–µ
            enableLights(true)       // –°–≤–µ—Ç–æ–¥–∏–æ–¥
            lightColor = Color.RED   // –¶–≤–µ—Ç —Å–≤–µ—Ç–æ–¥–∏–æ–¥–∞
            enableVibration(true)    // –í–∏–±—Ä–∞—Ü–∏—è
            vibrationPattern = longArrayOf(100, 200, 300) // –ü–∞—Ç—Ç–µ—Ä–Ω –≤–∏–±—Ä–∞—Ü–∏–∏
        }
        
        // 2. –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ–º –∫–∞–Ω–∞–ª –≤ —Å–∏—Å—Ç–µ–º–µ
        val manager = getSystemService(NotificationManager::class.java)
        manager.createNotificationChannel(channel)
    }
}
```

---

## **–¢–∏–ø—ã –≤–∞–∂–Ω–æ—Å—Ç–∏ (importance):**

| IMPORTANCE | –û–ø–∏—Å–∞–Ω–∏–µ | –ü–æ–≤–µ–¥–µ–Ω–∏–µ |
|------------|----------|-----------|
| **HIGH** | –í—ã—Å–æ–∫–∞—è | –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –≤–µ–∑–¥–µ, –º–æ–∂–µ—Ç –ø—Ä–µ—Ä—ã–≤–∞—Ç—å |
| **DEFAULT** | –°—Ä–µ–¥–Ω—è—è | –ó–≤—É–∫, –Ω–æ –Ω–µ –ø—Ä–µ—Ä—ã–≤–∞–µ—Ç |
| **LOW** | –ù–∏–∑–∫–∞—è | –ë–µ–∑ –∑–≤—É–∫–∞, –≤ —à—Ç–æ—Ä–∫–µ |
| **MIN** | –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è | –¢–æ–ª—å–∫–æ –≤ —à—Ç–æ—Ä–∫–µ, –±–µ–∑ –∑–≤—É–∫–∞/–≤–∏–±—Ä–∞—Ü–∏–∏ |
| **NONE** | –ë–µ–∑ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è | –°–∫—Ä—ã—Ç–æ |

---

## **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–∏:**

```kotlin
fun showNotification(title: String, body: String) {
    // –°–æ–∑–¥–∞–µ–º –∫–∞–Ω–∞–ª (–µ—Å–ª–∏ –µ—â–µ –Ω–µ —Å–æ–∑–¥–∞–Ω)
    createNotificationChannel()
    
    // –°—Ç—Ä–æ–∏–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –∫–∞–Ω–∞–ª–∞
    val notification = NotificationCompat.Builder(this, "news_channel") // ‚Üê ID –∫–∞–Ω–∞–ª–∞
        .setContentTitle(title)
        .setContentText(body)
        .setSmallIcon(R.drawable.ic_notification)
        .setPriority(NotificationCompat.PRIORITY_HIGH)
        .setAutoCancel(true)
        .build()
    
    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º
    NotificationManagerCompat.from(this).notify(1, notification)
}
```

---

## **–î–ª—è FCM (Firebase Cloud Messaging):**

### **–í —Å–µ—Ä–≤–∏—Å–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø—É—à–µ–π:**
```kotlin
class MyFirebaseMessagingService : FirebaseMessagingService() {
    
    override fun onMessageReceived(message: RemoteMessage) {
        // –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ç–∏–ø —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –¥–ª—è –≤—ã–±–æ—Ä–∞ –∫–∞–Ω–∞–ª–∞
        val channelId = when (message.data["type"]) {
            "news" -> "news_channel"
            "message" -> "messages_channel"
            "promo" -> "promo_channel"
            else -> "default_channel"
        }
        
        showNotification(channelId, message)
    }
    
    private fun showNotification(channelId: String, message: RemoteMessage) {
        // –ö–∞–Ω–∞–ª –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Å–æ–∑–¥–∞–Ω –∑–∞—Ä–∞–Ω–µ–µ!
        val notification = NotificationCompat.Builder(this, channelId)
            .setContentTitle(message.notification?.title)
            .setContentText(message.notification?.body)
            .setSmallIcon(R.drawable.ic_notification)
            .build()
        
        NotificationManagerCompat.from(this).notify(1, notification)
    }
}
```

---

## **–õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏:**

### **1. –°–æ–∑–¥–∞–≤–∞—Ç—å –∫–∞–Ω–∞–ª—ã –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:**
```kotlin
class MyApp : Application() {
    override fun onCreate() {
        super.onCreate()
        createNotificationChannels()
    }
    
    private fun createNotificationChannels() {
        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.O) {
            // –û—Å–Ω–æ–≤–Ω—ã–µ –∫–∞–Ω–∞–ª—ã
            createChannel("messages", "–°–æ–æ–±—â–µ–Ω–∏—è", 
                "–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏—è—Ö", 
                NotificationManager.IMPORTANCE_HIGH)
            
            createChannel("news", "–ù–æ–≤–æ—Å—Ç–∏",
                "–ù–æ–≤–æ—Å—Ç–∏ –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è",
                NotificationManager.IMPORTANCE_DEFAULT)
            
            createChannel("promo", "–ê–∫—Ü–∏–∏",
                "–°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è",
                NotificationManager.IMPORTANCE_LOW)
        }
    }
}
```

### **2. –ù–µ —Å–æ–∑–¥–∞–≤–∞—Ç—å —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –∫–∞–Ω–∞–ª–æ–≤:**
- **–û–ø—Ç–∏–º–∞–ª—å–Ω–æ:** 3-5 –∫–∞–Ω–∞–ª–æ–≤
- **–ú–∞–∫—Å–∏–º—É–º:** 8-10 (–±–æ–ª—å—à–µ ‚Äî –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–ø—É—Ç–∞–µ—Ç—Å—è)

### **3. –ù–µ –º–µ–Ω—è—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–∞–Ω–∞–ª–æ–≤ –ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è:**
–ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –∫–∞–Ω–∞–ª–∞ **–Ω–µ–ª—å–∑—è –∏–∑–º–µ–Ω–∏—Ç—å** –≤–∞–∂–Ω–æ—Å—Ç—å –∏ –¥—Ä—É–≥–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏.
–ú–æ–∂–Ω–æ —Ç–æ–ª—å–∫–æ —É–¥–∞–ª–∏—Ç—å –∏ —Å–æ–∑–¥–∞—Ç—å –∑–∞–Ω–æ–≤–æ.

---

## **–ü—Ä–æ–≤–µ—Ä–∫–∞ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**

### **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ –∫–∞–Ω–∞–ª–∞:**
```kotlin
fun isChannelExists(channelId: String): Boolean {
    val manager = getSystemService(NotificationManager::class.java)
    
    return if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.O) {
        manager.getNotificationChannel(channelId) != null
    } else {
        true // –î–ª—è —Å—Ç–∞—Ä—ã—Ö –≤–µ—Ä—Å–∏–π –∫–∞–Ω–∞–ª–æ–≤ –Ω–µ—Ç
    }
}
```

### **–£–¥–∞–ª–∏—Ç—å –∫–∞–Ω–∞–ª:**
```kotlin
if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.O) {
    val manager = getSystemService(NotificationManager::class.java)
    manager.deleteNotificationChannel("old_channel_id")
}
```

---

## **–î–ª—è —Å—Ç–∞—Ä—ã—Ö –≤–µ—Ä—Å–∏–π Android (< 8.0):**

–î–ª—è API < 26 –∫–∞–Ω–∞–ª—ã **–Ω–µ –Ω—É–∂–Ω—ã**, –Ω–æ –∫–æ–¥ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –æ–±—Ä–∞—Ç–Ω–æ —Å–æ–≤–º–µ—Å—Ç–∏–º—ã–º:
```kotlin
fun showNotification(title: String, body: String) {
    val builder = NotificationCompat.Builder(this, 
        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.O) {
            "channel_id" // –î–ª—è Android 8.0+
        } else {
            "" // –î–ª—è —Å—Ç–∞—Ä—ã—Ö –≤–µ—Ä—Å–∏–π
        }
    )
    // –æ—Å—Ç–∞–ª—å–Ω–æ–π –∫–æ–¥...
}
```

---

## **–ò—Ç–æ–≥ –¥–ª—è Junior:**

**Notification Channels –Ω—É–∂–Ω—ã –¥–ª—è:**
1. **–£–ø—Ä–∞–≤–ª–µ–Ω–∏—è** ‚Äî –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç —Ä–∞–∑–Ω—ã–µ —Ç–∏–ø—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
2. **–û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏** ‚Äî —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
3. **–ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏–∏** ‚Äî —Ä–∞–∑–Ω—ã–π –∑–≤—É–∫/–≤–∏–±—Ä–∞—Ü–∏—è –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤
4. **–¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ Android** ‚Äî –Ω–∞—á–∏–Ω–∞—è —Å API 26 **–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã**

**–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ:**
- –°–æ–∑–¥–∞–≤–∞—Ç—å –∫–∞–Ω–∞–ª—ã –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ
- –£–∫–∞–∑—ã–≤–∞—Ç—å channel ID –ø—Ä–∏ –ø–æ–∫–∞–∑–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- –î–ª—è Android < 8.0 ‚Äî –∫–æ–¥ –¥–æ–ª–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å –±–µ–∑ –∫–∞–Ω–∞–ª–æ–≤

**–ë–µ–∑ –∫–∞–Ω–∞–ª–∞ –Ω–∞ Android 8.0+ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ù–ï –ü–û–ö–ê–ñ–£–¢–°–Ø!**

  </details


</details> 

</details>

<details> 
  <summary> <h2> üåø Middle </h2> </summary>

  <details>
  <summary> –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ –≤ –∫–æ–Ω—Å–æ–ª–∏ Firebase </summary>

  ## **–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ Android –ø—Ä–æ–µ–∫—Ç–∞ –∫ Firebase Console**

### **–®–∞–≥ 1: –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ –≤ Firebase Console**
1. **–ü–µ—Ä–µ–π—Ç–∏ –Ω–∞** [console.firebase.google.com](https://console.firebase.google.com)
2. **–ù–∞–∂–∞—Ç—å** "–°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–µ–∫—Ç" –∏–ª–∏ "–î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–µ–∫—Ç"
3. **–í–≤–µ—Å—Ç–∏:**
   - **–ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞** (–Ω–∞–ø—Ä–∏–º–µ—Ä: `MyApp-Production`)
   - **–ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –ø—Ä–æ–µ–∫—Ç–∞** (–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏, –º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å)
4. **–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ:** –ø–æ–¥–∫–ª—é—á–∏—Ç—å Google Analytics (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
5. **–°–æ–≥–ª–∞—Å–∏—Ç—å—Å—è** —Å —É—Å–ª–æ–≤–∏—è–º–∏ –∏ —Å–æ–∑–¥–∞—Ç—å –ø—Ä–æ–µ–∫—Ç

---

### **–®–∞–≥ 2: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ Android –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è**
1. **–í Dashboard –ø—Ä–æ–µ–∫—Ç–∞** –Ω–∞–∂–∞—Ç—å –∑–Ω–∞—á–æ–∫ Android `+`
2. **–ó–∞–ø–æ–ª–Ω–∏—Ç—å —Ñ–æ—Ä–º—É:**
   ```
   Android package name: com.example.myapp (–î–û–õ–ñ–ï–ù —Å–æ–≤–ø–∞–¥–∞—Ç—å —Å build.gradle)
   App nickname (optional): MyApp Android
   SHA-1 signing certificate (optional): –¥–ª—è Google Sign-In
   ```
3. **–ù–∞–∂–∞—Ç—å** "–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ"

---

### **–®–∞–≥ 3: –°–∫–∞—á–∏–≤–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ —Ñ–∞–π–ª–∞**
1. **–°–∫–∞—á–∞—Ç—å** `google-services.json`
2. **–ü–æ–º–µ—Å—Ç–∏—Ç—å** –≤ –∫–æ—Ä–µ–Ω—å –º–æ–¥—É–ª—è app:
   ```
   project/
   ‚îú‚îÄ‚îÄ app/
   ‚îÇ   ‚îú‚îÄ‚îÄ google-services.json  ‚Üê –í–û–¢ –°–Æ–î–ê
   ‚îÇ   ‚îú‚îÄ‚îÄ build.gradle
   ‚îÇ   ‚îî‚îÄ‚îÄ src/
   ```
3. **–ù–∞–∂–∞—Ç—å** "–î–∞–ª–µ–µ"

---

### **–®–∞–≥ 4: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Gradle**
#### **Project-level `build.gradle`** (–∫–æ—Ä–Ω–µ–≤–æ–π):
```gradle
// Top-level build.gradle
buildscript {
    repositories {
        google()
        mavenCentral()
    }
    dependencies {
        classpath 'com.android.tools.build:gradle:8.1.0'
        classpath 'com.google.gms:google-services:4.4.0'  // <-- –î–û–ë–ê–í–ò–¢–¨
    }
}
```

#### **App-level `build.gradle`** (–º–æ–¥—É–ª—å app):
```gradle
// app/build.gradle
plugins {
    id 'com.android.application'
    id 'com.google.gms.google-services'  // <-- –î–û–ë–ê–í–ò–¢–¨ –≤ –∫–æ–Ω—Ü–µ
}

android {
    // –≤–∞—à–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
}

dependencies {
    // Firebase BoM (Bill of Materials)
    implementation platform('com.google.firebase:firebase-bom:32.4.0')
    
    // Firebase —Å–µ—Ä–≤–∏—Å—ã (–¥–æ–±–∞–≤–ª—è—Ç—å –ø–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏)
    implementation 'com.google.firebase:firebase-analytics'
    implementation 'com.google.firebase:firebase-auth'
    implementation 'com.google.firebase:firebase-firestore'
    implementation 'com.google.firebase:firebase-storage'
    implementation 'com.google.firebase:firebase-messaging'
    implementation 'com.google.firebase:firebase-crashlytics'
    implementation 'com.google.firebase:firebase-config'
}
```

---

### **–®–∞–≥ 5: –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞**
1. **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å** Gradle (Sync Now)
2. **–°–æ–±—Ä–∞—Ç—å** –ø—Ä–æ–µ–∫—Ç (`Build ‚Üí Make Project`)
3. **–ó–∞–ø—É—Å—Ç–∏—Ç—å** –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ/—ç–º—É–ª—è—Ç–æ—Ä–µ
4. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å** –≤ Firebase Console:
   - **Analytics**: –¥–æ–ª–∂–µ–Ω –ø–æ—è–≤–∏—Ç—å—Å—è 1 –∞–∫—Ç–∏–≤–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
   - **Crashlytics**: –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ ~5 –º–∏–Ω—É—Ç

---

## **–†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–ª—è Middle**

### **1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏–π (Flavors)**
```gradle
// app/build.gradle
android {
    flavorDimensions "environment"
    productFlavors {
        dev {
            dimension "environment"
            applicationId "com.example.myapp.dev"
            resValue "string", "app_name", "MyApp Dev"
        }
        staging {
            dimension "environment"
            applicationId "com.example.myapp.staging"
            resValue "string", "app_name", "MyApp Staging"
        }
        production {
            dimension "environment"
            applicationId "com.example.myapp"
            resValue "string", "app_name", "MyApp"
        }
    }
    
    // –†–∞–∑–º–µ—â–µ–Ω–∏–µ google-services.json –¥–ª—è –∫–∞–∂–¥–æ–≥–æ flavor
    sourceSets {
        dev {
            resources.srcDirs = ['src/dev']
        }
        staging {
            resources.srcDirs = ['src/staging']
        }
        production {
            resources.srcDirs = ['src/production']
        }
    }
}
```

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤:**
```
app/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ dev/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ google-services.json      // Dev Firebase –ø—Ä–æ–µ–∫—Ç
‚îÇ   ‚îú‚îÄ‚îÄ staging/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ google-services.json      // Staging Firebase –ø—Ä–æ–µ–∫—Ç
‚îÇ   ‚îî‚îÄ‚îÄ production/
‚îÇ       ‚îî‚îÄ‚îÄ google-services.json      // Production Firebase –ø—Ä–æ–µ–∫—Ç
```

### **2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ SHA-1 –¥–ª—è Google Sign-In**
```bash
# –ü–æ–ª—É—á–µ–Ω–∏–µ SHA-1 –¥–ª—è debug
keytool -list -v -keystore ~/.android/debug.keystore -alias androiddebugkey -storepass android -keypass android

# –ü–æ–ª—É—á–µ–Ω–∏–µ SHA-1 –¥–ª—è release
keytool -list -v -keystore your-release-key.keystore
```

**–î–æ–±–∞–≤–∏—Ç—å –≤ Firebase Console:**
1. **Project Settings** ‚Üí **Your apps** ‚Üí **Android app**
2. **–î–æ–±–∞–≤–∏—Ç—å** –æ—Ç–ø–µ—á–∞—Ç–∫–∏ SHA-1
3. **–°–∫–∞—á–∞—Ç—å** –Ω–æ–≤—ã–π `google-services.json`

### **3. –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Firebase**
```kotlin
// –î–ª—è —Ä–∞–∑–Ω—ã—Ö flavor –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º Firebase —Å —Ä–∞–∑–Ω—ã–º–∏ –æ–ø—Ü–∏—è–º–∏
class MyApplication : Application() {
    
    override fun onCreate() {
        super.onCreate()
        
        when (BuildConfig.FLAVOR) {
            "dev" -> {
                // Dev –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
                val options = FirebaseOptions.Builder()
                    .setApplicationId("dev-app-id")
                    .setApiKey("dev-api-key")
                    .setDatabaseUrl("https://dev-db.firebaseio.com")
                    .setProjectId("dev-project-id")
                    .setStorageBucket("dev-bucket.appspot.com")
                    .build()
                
                FirebaseApp.initializeApp(this, options, "dev")
            }
            "production" -> {
                // Production –∏—Å–ø–æ–ª—å–∑—É–µ—Ç google-services.json
                FirebaseApp.initializeApp(this)
            }
        }
    }
}
```

### **4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Crashlytics –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Å–±–æ—Ä–æ–∫**
```gradle
// app/build.gradle
android {
    buildTypes {
        debug {
            // –û—Ç–∫–ª—é—á–∞–µ–º Crashlytics –¥–ª—è debug
            firebaseCrashlytics {
                mappingFileUploadEnabled false
            }
            // –û—Ç–∫–ª—é—á–∞–µ–º Analytics –¥–ª—è debug
            manifestPlaceholders = [
                'firebaseAnalyticsCollectionEnabled': 'false',
                'firebaseCrashlyticsCollectionEnabled': 'false'
            ]
        }
        release {
            // –í–∫–ª—é—á–∞–µ–º –¥–ª—è release
            firebaseCrashlytics {
                nativeSymbolUploadEnabled true
                unstrippedNativeLibsDir 'build/intermediates/merged_native_libs/release/out/lib'
                strippedNativeLibsDir 'build/intermediates/stripped_native_libs/release/out/lib'
            }
            manifestPlaceholders = [
                'firebaseAnalyticsCollectionEnabled': 'true',
                'firebaseCrashlyticsCollectionEnabled': 'true'
            ]
        }
    }
}
```

### **5. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ App Distribution (Beta-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)**
```gradle
// app/build.gradle
android {
    buildTypes {
        release {
            // –í–∫–ª—é—á–∏—Ç—å App Distribution
            firebaseAppDistribution {
                serviceCredentialsFile = "firebase-app-distribution-key.json"
                releaseNotes = "–ù–æ–≤–∞—è –≤–µ—Ä—Å–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è"
                groups = "qa-team, beta-testers"
            }
        }
    }
}
```

**–î–µ–ø–ª–æ–π:**
```bash
./gradlew assembleRelease appDistributionUploadRelease
```

### **6. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Performance Monitoring**
```gradle
// app/build.gradle
dependencies {
    implementation 'com.google.firebase:firebase-perf'
}

// –í –∫–æ–¥–µ –¥–æ–±–∞–≤—å—Ç–µ —Ç—Ä–µ–π—Å—ã
val trace = FirebasePerformance.getInstance().newTrace("screen_trace")
trace.start()
// ... –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ ...
trace.stop()
```

### **7. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Remote Config**
```kotlin
// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
val remoteConfig = FirebaseRemoteConfig.getInstance()
val configSettings = remoteConfigSettings {
    minimumFetchIntervalInSeconds = 3600 // 1 —á–∞—Å
    fetchTimeoutInSeconds = 60
}
remoteConfig.setConfigSettingsAsync(configSettings)

// –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –¥–µ—Ñ–æ–ª—Ç–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π
remoteConfig.setDefaultsAsync(R.xml.remote_config_defaults)

// –ü–æ–ª—É—á–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏–π
val welcomeMessage = remoteConfig.getString("welcome_message")
```

---

## **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è**

### **1. –î–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏–π –∫–æ–¥**
```kotlin
fun checkFirebaseConnection() {
    try {
        val firebaseApp = FirebaseApp.getInstance()
        Log.d("Firebase", "App name: ${firebaseApp.name}")
        Log.d("Firebase", "Options: ${firebaseApp.options}")
        
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–∏—Å–æ–≤
        val auth = FirebaseAuth.getInstance()
        val currentUser = auth.currentUser
        Log.d("Firebase", "Auth initialized, user: $currentUser")
        
    } catch (e: IllegalStateException) {
        Log.e("Firebase", "Firebase not initialized", e)
    }
}
```

### **2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ Firebase Console**
- **Analytics**: Events ‚Üí should see `first_open` event
- **Crashlytics**: Issues ‚Üí no crashes initially
- **Authentication**: Users ‚Üí empty until first sign-in
- **Firestore/Database**: Data ‚Üí shows empty collections

---

## **Troubleshooting –¥–ª—è Middle**

### **–ü—Ä–æ–±–ª–µ–º–∞: "Default FirebaseApp is not initialized"**
**–†–µ—à–µ–Ω–∏–µ:**
```kotlin
// –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ google-services.json
// –ü—Ä–æ–≤–µ—Ä–∏—Ç—å applicationId –≤ build.gradle –∏ google-services.json
// –ü—Ä–æ–≤–µ—Ä–∏—Ç—å plugin application –≤ build.gradle
```

### **–ü—Ä–æ–±–ª–µ–º–∞: –†–∞–∑–Ω—ã–µ –ø—Ä–æ–µ–∫—Ç—ã –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Å–±–æ—Ä–æ–∫**
**–†–µ—à–µ–Ω–∏–µ:**
```kotlin
// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å flavors —Å —Ä–∞–∑–Ω—ã–º–∏ google-services.json
// –ò–ª–∏ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫—É—é –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é FirebaseApp
```

### **–ü—Ä–æ–±–ª–µ–º–∞: –ù–µ —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã**
**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –≤ build.gradle
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∏–ª–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –≤ Firebase Console
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö permissions –≤ AndroidManifest.xml

---

## **Security Best Practices**

### **1. –ó–∞—â–∏—Ç–∞ –ø—Ä–∞–≤–∏–ª Firestore/Realtime Database**
```javascript
// –ü—Ä–∏–º–µ—Ä –ø—Ä–∞–≤–∏–ª –¥–ª—è Firestore
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    // –¢–æ–ª—å–∫–æ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç —á–∏—Ç–∞—Ç—å/–ø–∏—Å–∞—Ç—å
    match /users/{userId} {
      allow read, write: if request.auth != null && request.auth.uid == userId;
    }
  }
}
```

### **2. –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ API –∫–ª—é—á–µ–π –≤ Google Cloud Console**
1. **–ü–µ—Ä–µ–π—Ç–∏** –≤ Google Cloud Console
2. **API & Services** ‚Üí **Credentials**
3. **–û–≥—Ä–∞–Ω–∏—á–∏—Ç—å** –∫–ª—é—á:
   - Android apps
   - Firebase services
   - IP addresses (–¥–ª—è server keys)

### **3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ App Check**
```gradle
// –î–æ–±–∞–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å
implementation 'com.google.firebase:firebase-appcheck-playintegrity'
```

```kotlin
// –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å
FirebaseApp.initializeApp(this)
FirebaseAppCheck.getInstance().installAppCheckProviderFactory(
    PlayIntegrityAppCheckProviderFactory.getInstance()
)
```

---

## **–ò—Ç–æ–≥ –¥–ª—è Middle —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞:**

1. **–ü—Ä–∞–≤–∏–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞** —Å flavors –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏–π
2. **–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è** Firebase –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
3. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ SHA-1** –¥–ª—è –≤—Å–µ—Ö –∫–ª—é—á–µ–π –ø–æ–¥–ø–∏—Å–∏
4. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π** ‚Äî –¥–æ–±–∞–≤–ª—è—Ç—å —Ç–æ–ª—å–∫–æ –Ω—É–∂–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã
5. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** ‚Äî –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ API –∫–ª—é—á–µ–π, –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–∞–≤–∏–ª –ë–î
6. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** ‚Äî Crashlytics, Performance, Analytics
7. **CI/CD –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** ‚Äî App Distribution, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –¥–µ–ø–ª–æ–∏

**–ö–ª—é—á–µ–≤–æ–µ:** Firebase –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ development workflow ‚Äî —Ä–∞–∑–Ω—ã–µ –ø—Ä–æ–µ–∫—Ç—ã –¥–ª—è dev/staging/production, –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏, –∏ –ø–æ–ª–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤ production.

  </details>


   <details>
  <summary> –ó–∞—á–µ–º –Ω—É–∂–µ–Ω Sha-1 –≤ Firebase? </summary>

  **SHA-1 –≤ Firebase –Ω—É–∂–µ–Ω –¥–ª—è –¥–≤—É—Ö –∫–ª—é—á–µ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π: –±–µ–∑–æ–ø–∞—Å–Ω–æ–π –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.**

---

## **1. –î–ª—è Google Sign-In (–æ—Å–Ω–æ–≤–Ω–æ–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ)**

### **–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
```kotlin
// –ë–µ–∑ SHA-1: Google Sign-In –ù–ï –†–ê–ë–û–¢–ê–ï–¢
// –° SHA-1: –ø–æ–∑–≤–æ–ª—è–µ—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
```

**–ë–µ–∑–æ–ø–∞—Å–Ω—ã–π –æ–±–º–µ–Ω –¥–∞–Ω–Ω—ã–º–∏:**
```
[–í–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ] ‚Üê(SHA-1 –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è)‚Üí [Google –°–µ—Ä–≤–µ—Ä–∞] ‚Üê(—Ç–æ–∫–µ–Ω)‚Üí [Firebase]
```

### **–ü–æ—á–µ–º—É –∏–º–µ–Ω–Ω–æ SHA-1?**
- **–¶–∏—Ñ—Ä–æ–≤–∞—è –ø–æ–¥–ø–∏—Å—å** –≤–∞—à–µ–≥–æ APK
- **–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç**, —á—Ç–æ –∑–∞–ø—Ä–æ—Å –ø—Ä–∏—à–µ–ª –∏–º–µ–Ω–Ω–æ –æ—Ç –≤–∞—à–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- **–ó–∞—â–∏—â–∞–µ—Ç** –æ—Ç –ø–æ–¥–¥–µ–ª—å–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π

---

## **2. –î–ª—è Firebase Dynamic Links**

### **–í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –ø–µ—Ä–µ—Ö–æ–¥–∞:**
```kotlin
// –ö–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç Dynamic Link:
// 1. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è SHA-1 –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è
// 2. –ï—Å–ª–∏ —Å–æ–≤–ø–∞–¥–∞–µ—Ç ‚Üí –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
// 3. –ï—Å–ª–∏ –Ω–µ—Ç ‚Üí –≤–µ–¥–µ—Ç –≤ Play Store
```

---

## **3. –î–ª—è Firebase App Indexing (–ø–æ–∏—Å–∫ –≤ Google)**

**–ò–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ Google Search:**
- SHA-1 –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–Ω–æ—Å—Ç—å –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –≤–∞—à–µ–º—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é
- –ë–µ–∑ –Ω–µ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç –Ω–µ –±—É–¥–µ—Ç –∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞—Ç—å—Å—è

---

## **–ì–¥–µ –≤–∑—è—Ç—å SHA-1:**

### **1. Debug –∫–ª—é—á (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é):**
```bash
keytool -list -v \
  -keystore ~/.android/debug.keystore \
  -alias androiddebugkey \
  -storepass android \
  -keypass android
```

**–í—ã–≤–æ–¥:**
```
Alias name: androiddebugkey
SHA1: AB:CD:EF:12:34:56:78:90:AB:CD:EF:12:34:56:78:90:AB:CD:EF:12
```

### **2. Release –∫–ª—é—á:**
```bash
keytool -list -v \
  -keystore /path/to/your/release-key.keystore
# –í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å –æ—Ç keystore
```

### **3. –ò–∑ Android Studio:**
1. **Gradle** ‚Üí **Tasks** ‚Üí **android** ‚Üí **signingReport**
2. –ò–ª–∏: **Build** ‚Üí **Generate Signed Bundle/APK**

---

## **–ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å SHA-1 –≤ Firebase:**

### **–ß–µ—Ä–µ–∑ Firebase Console:**
1. **Project Settings** ‚Üí **Your apps** ‚Üí –≤—ã–±–µ—Ä–∏—Ç–µ Android –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
2. **–î–æ–±–∞–≤–∏—Ç—å –æ—Ç–ø–µ—á–∞—Ç–æ–∫ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞**
3. **–í—Å—Ç–∞–≤–∏—Ç—å SHA-1**
4. **–°–æ—Ö—Ä–∞–Ω–∏—Ç—å**

### **–î–ª—è —Ä–∞–∑–Ω—ã—Ö –∫–ª—é—á–µ–π:**
```yaml
–î–æ–±–∞–≤–∏—Ç—å –í–°–ï –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ SHA-1:
- Debug (–¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)
- Release (–¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞)
- CI/CD –∫–ª—é—á (–¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Å–±–æ—Ä–æ–∫)
- –î—Ä—É–≥–∏–µ keystore (–µ—Å–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ)
```

---

## **–û—Å–æ–±—ã–µ —Å–ª—É—á–∞–∏:**

### **1. App Bundle (AAB) –≤ Play Console:**
- Play Console –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç APK —Å–≤–æ–∏–º –∫–ª—é—á–æ–º
- **–ù—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å SHA-1 –∏–∑ Play Console:**
  1. Play Console ‚Üí –í–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ ‚Üí Setup ‚Üí App integrity
  2. –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å SHA-1 certificate fingerprint
  3. –î–æ–±–∞–≤–∏—Ç—å –≤ Firebase

### **2. –†–∞–∑–Ω—ã–µ —Å—Ä–µ–¥—ã (dev/staging/prod):**
```bash
# –î–ª—è –∫–∞–∂–¥–æ–≥–æ environment —Å–≤–æ–π SHA-1
- dev.keystore ‚Üí SHA1_DEV
- staging.keystore ‚Üí SHA1_STAGING  
- production.keystore ‚Üí SHA1_PROD
```

### **3. CI/CD —Å–µ—Ä–≤–µ—Ä—ã:**
```yaml
# –í Jenkins/GitLab CI/etc:
- –ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å SHA-1 –∏–∑ CI keystore
- –î–æ–±–∞–≤–∏—Ç—å –≤ Firebase —á–µ—Ä–µ–∑ API
```

---

## **–ü—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è:**

### **–ü—Ä–æ–±–ª–µ–º–∞: "12500: Unknown error" –ø—Ä–∏ Google Sign-In**
**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ –¥–æ–±–∞–≤–ª–µ–Ω SHA-1 –∏–ª–∏ –¥–æ–±–∞–≤–ª–µ–Ω –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π  
**–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π SHA-1 –≤ Firebase Console

### **–ü—Ä–æ–±–ª–µ–º–∞: Dynamic Links –æ—Ç–∫—Ä—ã–≤–∞—é—Ç Play Store –≤–º–µ—Å—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è**
**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ —Å–æ–≤–ø–∞–¥–∞–µ—Ç SHA-1  
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∫–ª—é—á–∏ –ø–æ–¥–ø–∏—Å–∏

### **–ü—Ä–æ–±–ª–µ–º–∞: –†–∞–∑–Ω—ã–µ SHA-1 –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Å–±–æ—Ä–æ–∫**
**–†–µ—à–µ–Ω–∏–µ:**
```gradle
// –í build.gradle
android {
    signingConfigs {
        debug {
            storeFile file('debug.keystore')
            // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–µ—Ñ–æ–ª—Ç–Ω—ã–π debug SHA-1
        }
        release {
            storeFile file('release.keystore')
            storePassword 'password'
            keyAlias 'alias'
            keyPassword 'password'
        }
        staging {
            storeFile file('staging.keystore')
            // –°–≤–æ–π SHA-1 –¥–ª—è staging
        }
    }
}
```

---

## **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:**

### **–ß—Ç–æ –¥–∞–µ—Ç SHA-1:**
1. **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è** ‚Äî –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç, —á—Ç–æ –∑–∞–ø—Ä–æ—Å –æ—Ç –≤–∞—à–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
2. **–ó–∞—â–∏—Ç–∞ –æ—Ç –ø–æ–¥–¥–µ–ª–∫–∏** ‚Äî –Ω–µ–ª—å–∑—è —É–∫—Ä–∞—Å—Ç—å OAuth —Ç–æ–∫–µ–Ω—ã
3. **–í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –∏—Å—Ç–æ—á–Ω–∏–∫–∞** ‚Äî –¥–ª—è Dynamic Links –∏ App Indexing

### **–í–∞–∂–Ω–æ:**
- **SHA-1 –Ω–µ —Å–µ–∫—Ä–µ—Ç–Ω—ã–π** ‚Äî –µ–≥–æ –º–æ–∂–Ω–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ –ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å
- **–ù–µ –∑–∞–º–µ–Ω—è–µ—Ç** –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –Ω–∞ –±—ç–∫–µ–Ω–¥–µ
- **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π —Å–ª–æ–π** –∑–∞—â–∏—Ç—ã

---

## **–ü—Ä–∏–º–µ—Ä —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Å–±–æ—Ä–æ–∫:**

### **1. –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö SHA-1 –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:**
```bash
#!/bin/bash
# –°–∫—Ä–∏–ø—Ç –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –≤—Å–µ—Ö SHA-1

echo "Debug SHA-1:"
keytool -list -v -keystore ~/.android/debug.keystore -alias androiddebugkey -storepass android -keypass android 2>/dev/null | grep SHA1

echo "Release SHA-1:"
keytool -list -v -keystore app/release.keystore -alias release -storepass ${RELEASE_PASSWORD} 2>/dev/null | grep SHA1
```

### **2. –í –∫–æ–¥–µ –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ø–∏—Å–∏:**
```kotlin
fun getCurrentSignature(context: Context): String {
    val info = context.packageManager
        .getPackageInfo(context.packageName, PackageManager.GET_SIGNATURES)
    
    val signature = info.signatures[0].toByteArray()
    val md = MessageDigest.getInstance("SHA-1")
    val digest = md.digest(signature)
    
    return digest.joinToString(":") { "%02X".format(it) }
}
```

---

## **–ú–∏–≥—Ä–∞—Ü–∏—è –∏–ª–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–µ SHA-1:**

### **–ï—Å–ª–∏ —Å–º–µ–Ω–∏–ª–∏ keystore:**
1. **–î–æ–±–∞–≤–∏—Ç—å** –Ω–æ–≤—ã–π SHA-1 –≤ Firebase Console
2. **–û—Å—Ç–∞–≤–∏—Ç—å —Å—Ç–∞—Ä—ã–π** SHA-1 –Ω–∞ 30 –¥–Ω–µ–π (–ø–æ–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –Ω–µ –æ–±–Ω–æ–≤—è—Ç—Å—è)
3. **–£–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—ã–π** SHA-1 —á–µ—Ä–µ–∑ –º–µ—Å—è—Ü

### **–≠—Ñ—Ñ–µ–∫—Ç –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:**
- **–°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏:** –ø—Ä–æ–¥–æ–ª–∂–∞—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å–æ —Å—Ç–∞—Ä—ã–º SHA-1
- **–ù–æ–≤—ã–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏:** –±—É–¥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–æ–≤—ã–π SHA-1
- **Google Sign-In:** –ø–æ—Ç—Ä–µ–±—É–µ—Ç –ø–µ—Ä–µ–ª–æ–≥–∏–Ω–∞ –ø—Ä–∏ —Å–º–µ–Ω–µ SHA-1

---

## **–ò—Ç–æ–≥ –¥–ª—è Middle —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞:**

**SHA-1 –Ω—É–∂–µ–Ω –¥–ª—è:**

1. **Google Sign-In** ‚Äî –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ –¥–ª—è —Ä–∞–±–æ—Ç—ã
2. **Firebase Auth** ‚Äî –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –∑–∞–ø—Ä–æ—Å–æ–≤  
3. **Dynamic Links** ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞, –∫–∞–∫–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –æ—Ç–∫—Ä—ã–≤–∞—Ç—å
4. **App Indexing** ‚Äî –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –≤ Google

**–ö–ª—é—á–µ–≤—ã–µ –º–æ–º–µ–Ω—Ç—ã:**
- –î–æ–±–∞–≤–ª—è—Ç—å **–í–°–ï –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ** –∫–ª—é—á–∏ –ø–æ–¥–ø–∏—Å–∏
- –î–ª—è **App Bundle** –±—Ä–∞—Ç—å SHA-1 –∏–∑ Play Console
- –ü—Ä–∏ —Å–º–µ–Ω–µ keystore **–æ–±–µ—Å–ø–µ—á–∏—Ç—å –ø–ª–∞–≤–Ω—ã–π –ø–µ—Ä–µ—Ö–æ–¥**
- **–ù–µ —è–≤–ª—è–µ—Ç—Å—è —Å–µ–∫—Ä–µ—Ç–æ–º**, –Ω–æ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–µ–Ω –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

**–ü—Ä–æ–≤–µ—Ä–∫–∞:** –ü–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è SHA-1 –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å Google Sign-In –∏ Dynamic Links –Ω–∞ –≤—Å–µ—Ö —Ç–∏–ø–∞—Ö —Å–±–æ—Ä–æ–∫ (debug/release).

  </details>

  <details>
  <summary> –ß—Ç–æ —Ç–∞–∫–æ–µ Realtime Database? –∫–∞–∫ –∏ –¥–ª—è —á–µ–≥–æ –æ–Ω–∞ –Ω—É–∂–Ω–∞?  </summary>  

  **Realtime Database ‚Äî —ç—Ç–æ –æ–±–ª–∞—á–Ω–∞—è NoSQL –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –æ—Ç Firebase, –∫–æ—Ç–æ—Ä–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ –º–µ–∂–¥—É –∫–ª–∏–µ–Ω—Ç–∞–º–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏.**

---

## **–ß—Ç–æ —ç—Ç–æ:**

### **–û—Å–Ω–æ–≤–Ω—ã–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:**
- **NoSQL JSON –±–∞–∑–∞** ‚Äî –¥–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –∫–∞–∫ JSON –¥–µ—Ä–µ–≤–æ
- **–†–µ–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è** ‚Äî –∏–∑–º–µ–Ω–µ–Ω–∏—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç—Å—è
- **–û—Ñ—Ñ–ª–∞–π–Ω –ø–æ–¥–¥–µ—Ä–∂–∫–∞** ‚Äî —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞
- **–ö—Ä–æ—Å—Å–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–æ—Å—Ç—å** ‚Äî Android, iOS, Web

---

## **–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:**

```javascript
// –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö –∫–∞–∫ JSON –¥–µ—Ä–µ–≤–æ
{
  "users": {
    "user1": {
      "name": "–ò–≤–∞–Ω",
      "email": "ivan@example.com",
      "chats": {
        "chat1": true,
        "chat2": true
      }
    }
  },
  "chats": {
    "chat1": {
      "name": "–û–±—â–∏–π —á–∞—Ç",
      "messages": {
        "msg1": {
          "text": "–ü—Ä–∏–≤–µ—Ç!",
          "timestamp": 1634567890,
          "userId": "user1"
        }
      }
    }
  }
}
```

---

## **–î–ª—è —á–µ–≥–æ –Ω—É–∂–Ω–∞:**

### **1. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏:**
```kotlin
// –ß–∞—Ç-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
val database = Firebase.database
val messagesRef = database.getReference("chats/chat1/messages")

// –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è
messagesRef.push().setValue(Message(
    text = "–ü—Ä–∏–≤–µ—Ç!",
    userId = currentUserId,
    timestamp = ServerValue.TIMESTAMP
))

// –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
messagesRef.addChildEventListener(object : ChildEventListener {
    override fun onChildAdded(snapshot: DataSnapshot, previousChildName: String?) {
        val message = snapshot.getValue(Message::class.java)
        displayMessage(message)
    }
})
```

### **2. –ö–æ–ª–ª–∞–±–æ—Ä–∞—Ç–∏–≤–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:**
```kotlin
// –°–æ–≤–º–µ—Å—Ç–Ω–æ–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞
val docRef = Firebase.database.getReference("documents/doc1/content")

// –í—Å–µ –≤–∏–¥—è—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
docRef.addValueEventListener { snapshot ->
    val content = snapshot.getValue(String::class.java)
    updateEditor(content)
}

// –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π
docRef.setValue(newContent)
```

### **3. –ú—É–ª—å—Ç–∏–ø–ª–µ–µ—Ä–Ω—ã–µ –∏–≥—Ä—ã:**
```kotlin
// –ò–≥—Ä–æ–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
val gameRef = Firebase.database.getReference("games/game1")

// –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø–æ–∑–∏—Ü–∏–π –∏–≥—Ä–æ–∫–æ–≤
gameRef.child("players/$playerId/position").setValue(
    mapOf("x" to posX, "y" to posY)
)

// –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–π –¥—Ä—É–≥–∏—Ö –∏–≥—Ä–æ–∫–æ–≤
gameRef.child("players").addChildEventListener { snapshot ->
    val player = snapshot.getValue(Player::class.java)
    renderOtherPlayer(player)
}
```

### **4. Live –¥–∞–Ω–Ω—ã–µ (—Ç—Ä–µ–∫–∏–Ω–≥, –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥):**
```kotlin
// –¢—Ä–µ–∫–∏–Ω–≥ –¥–æ—Å—Ç–∞–≤–∫–∏
val deliveryRef = Firebase.database.getReference("deliveries/delivery123")

// –ö—É—Ä—å–µ—Ä –æ–±–Ω–æ–≤–ª—è–µ—Ç –≥–µ–æ–ø–æ–∑–∏—Ü–∏—é
deliveryRef.child("location").setValue(
    mapOf("lat" to latitude, "lng" to longitude)
)

// –ö–ª–∏–µ–Ω—Ç –≤–∏–¥–∏—Ç –¥–≤–∏–∂–µ–Ω–∏–µ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
deliveryRef.child("location").addValueEventListener { snapshot ->
    val location = snapshot.getValue(Location::class.java)
    updateMap(location)
}
```

---

## **–ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**

### **1. –†–µ–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è:**
```kotlin
// –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è
val ref = Firebase.database.getReference("posts")

ref.addValueEventListener(object : ValueEventListener {
    override fun onDataChange(snapshot: DataSnapshot) {
        // –í—ã–∑—ã–≤–∞–µ—Ç—Å—è –ü–†–ò –ö–ê–ñ–î–û–ú –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö
        val posts = snapshot.children.map { it.getValue(Post::class.java) }
        updatePostsList(posts)
    }
    
    override fun onCancelled(error: DatabaseError) {
        Log.e("RealtimeDB", "Error: ${error.message}")
    }
})
```

### **2. –û—Ñ—Ñ–ª–∞–π–Ω –ø–æ–¥–¥–µ—Ä–∂–∫–∞:**
```kotlin
// –í–∫–ª—é—á–∞–µ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ª–æ–∫–∞–ª—å–Ω–æ
Firebase.database.setPersistenceEnabled(true)

// –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ä–∞–∑–º–µ—Ä –∫—ç—à–∞ (–≤ –ú–ë)
Firebase.database.setPersistenceCacheSizeBytes(10 * 1024 * 1024)

// –î–∞–Ω–Ω—ã–µ –¥–æ—Å—Ç—É–ø–Ω—ã –¥–∞–∂–µ –±–µ–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞
```

### **3. –ü—Ä–∞–≤–∏–ª–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:**
```javascript
// firebase_database_rules.json
{
  "rules": {
    ".read": "auth != null",  // –¢–æ–ª—å–∫–æ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ
    ".write": "auth != null",
    
    "users": {
      "$userId": {
        ".read": "$userId === auth.uid",  // –¢–æ–ª—å–∫–æ —Å–≤–æ–∏ –¥–∞–Ω–Ω—ã–µ
        ".write": "$userId === auth.uid"
      }
    },
    
    "posts": {
      ".read": true,  // –í—Å–µ –º–æ–≥—É—Ç —á–∏—Ç–∞—Ç—å
      ".write": "auth != null"  // –ü–∏—Å–∞—Ç—å —Ç–æ–ª—å–∫–æ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ
    }
  }
}
```

---

## **–°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å Cloud Firestore:**

| –ü–∞—Ä–∞–º–µ—Ç—Ä | **Realtime Database** | **Cloud Firestore** |
|----------|----------------------|---------------------|
| **–°—Ç—Ä—É–∫—Ç—É—Ä–∞** | JSON –¥–µ—Ä–µ–≤–æ | –î–æ–∫—É–º–µ–Ω—Ç—ã –∏ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ |
| **–ó–∞–ø—Ä–æ—Å—ã** | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–µ | –°–ª–æ–∂–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã |
| **–ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ** | –î–æ ~200k –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö | –ú–∏–ª–ª–∏–æ–Ω—ã —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π |
| **–¶–µ–Ω–∞** | –ü–æ –∑–∞–≥—Ä—É–∑–∫–µ/—Å–∫–∞—á–∏–≤–∞–Ω–∏—é | –ü–æ –æ–ø–µ—Ä–∞—Ü–∏—è–º —á—Ç–µ–Ω–∏—è/–∑–∞–ø–∏—Å–∏ |
| **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è** | –ü—Ä–æ—Å—Ç—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ | –°–ª–æ–∂–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è |

---

## **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è Middle:**

### **1. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö:**
```kotlin
// ‚ùå –ü–õ–û–•–û: –í–ª–æ–∂–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
"users": {
  "user1": {
    "name": "–ò–≤–∞–Ω",
    "chats": {
      "chat1": {
        "name": "–ß–∞—Ç",
        "messages": { ... }  // –ì–ª—É–±–æ–∫–æ–µ –≤–ª–æ–∂–µ–Ω–∏–µ
      }
    }
  }
}

// ‚úÖ –•–û–†–û–®–û: –î–µ–Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è
"users": {
  "user1": {
    "name": "–ò–≤–∞–Ω"
  }
}

"userChats": {
  "user1": {
    "chat1": {
      "name": "–ß–∞—Ç",
      "lastMessage": "–ü—Ä–∏–≤–µ—Ç",
      "timestamp": 1234567890
    }
  }
}

"messages": {
  "chat1": {
    "msg1": {
      "text": "–ü—Ä–∏–≤–µ—Ç",
      "userId": "user1",
      "timestamp": 1234567890
    }
  }
}
```

### **2. –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:**
```kotlin
// –°–æ–∑–¥–∞–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–∞ –≤ –ø—Ä–∞–≤–∏–ª–∞—Ö
{
  "rules": {
    "posts": {
      ".indexOn": ["timestamp", "userId"]
    }
  }
}

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –∑–∞–ø—Ä–æ—Å–µ
val query = Firebase.database.reference
    .child("posts")
    .orderByChild("timestamp")
    .limitToLast(50)
```

### **3. –ü–∞–∫–µ—Ç–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏:**
```kotlin
// –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —É–∑–ª–æ–≤ –∞—Ç–æ–º–∞—Ä–Ω–æ
val updates = HashMap<String, Any>()

updates["users/user1/lastSeen"] = ServerValue.TIMESTAMP
updates["chats/chat1/lastMessage"] = "–ù–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ"
updates["notifications/user1/count"] = 0

Firebase.database.reference.updateChildren(updates)
```

### **4. –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏:**
```kotlin
// –ö–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—á–µ—Ç—á–∏–∫–∞
val counterRef = Firebase.database.getReference("counters/likes")

counterRef.runTransaction(object : Transaction.Handler {
    override fun doTransaction(currentData: MutableData): Transaction.Result {
        val value = currentData.getValue(Int::class.java) ?: 0
        currentData.value = value + 1
        return Transaction.success(currentData)
    }
    
    override fun onComplete(error: DatabaseError?, committed: Boolean, data: DataSnapshot?) {
        if (committed) {
            Log.d("Transaction", "Counter updated")
        }
    }
})
```

### **5. –û—Ç–º–µ–Ω–∞ –ø–æ–¥–ø–∏—Å–æ–∫:**
```kotlin
class ChatActivity : AppCompatActivity() {
    private lateinit var messagesListener: ValueEventListener
    
    override fun onCreate(savedInstanceState: Bundle?) {
        val messagesRef = Firebase.database.getReference("chats/chat1/messages")
        messagesListener = messagesRef.addValueEventListener { snapshot ->
            // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
        }
    }
    
    override fun onDestroy() {
        super.onDestroy()
        Firebase.database.getReference("chats/chat1/messages")
            .removeEventListener(messagesListener) // –í–∞–∂–Ω–æ!
    }
}
```

---

## **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –æ—Ç–ª–∞–¥–∫–∞:**

### **1. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–π:**
```kotlin
// –í–∫–ª—é—á–∞–µ–º –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
Firebase.database.setLogLevel(Logger.Level.DEBUG)

// –í –ª–æ–≥–∞—Ö —É–≤–∏–¥–∏–º:
// - –ó–∞–ø—Ä–æ—Å—ã –∫ –±–∞–∑–µ
// - –ü–æ–ª—É—á–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
// - –û—à–∏–±–∫–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
```

### **2. –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:**
```kotlin
// –ò–∑–º–µ—Ä–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –æ–ø–µ—Ä–∞—Ü–∏–π
val trace = Firebase.performance.newTrace("database_operation")
trace.start()

// –í—ã–ø–æ–ª–Ω—è–µ–º –æ–ø–µ—Ä–∞—Ü–∏—é —Å –±–∞–∑–æ–π
val data = fetchDataFromDatabase()

trace.stop()
```

### **3. –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö:**
```kotlin
// –ù–µ –∑–∞–≥—Ä—É–∂–∞—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ
val query = Firebase.database.reference
    .child("messages")
    .orderByChild("timestamp")
    .startAt(lastTimestamp)  // –¢–æ–ª—å–∫–æ –Ω–æ–≤—ã–µ
    .limitToLast(100)        // –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É
```

---

## **Security Rules –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ:**

```javascript
{
  "rules": {
    "posts": {
      "$postId": {
        ".read": true,
        ".write": "data.child('userId').val() === auth.uid || 
                  newData.child('userId').val() === auth.uid",
        ".validate": "newData.hasChildren(['title', 'content'])",
        "title": {
          ".validate": "newData.isString() && newData.val().length > 0"
        },
        "content": {
          ".validate": "newData.isString() && newData.val().length < 1000"
        },
        "createdAt": {
          ".validate": "newData.val() === now"
        }
      }
    }
  }
}
```

---

## **–ú–∏–≥—Ä–∞—Ü–∏—è —Å Realtime Database:**

### **–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–π—Ç–∏ –Ω–∞ Firestore:**
```kotlin
// 1. –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö –∏–∑ Realtime Database
// 2. –ò–º–ø–æ—Ä—Ç –≤ Firestore
// 3. –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –æ–±–æ–∏—Ö –ë–î –≤–æ –≤—Ä–µ–º—è –º–∏–≥—Ä–∞—Ü–∏–∏
// 4. –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω—ã–π –ø–µ—Ä–µ—Ö–æ–¥

// –í –∫–æ–¥–µ:
object DatabaseManager {
    fun getDatabase(): Any {
        return if (useFirestore) {
            Firebase.firestore
        } else {
            Firebase.database
        }
    }
}
```

---

## **–ò—Ç–æ–≥ –¥–ª—è Middle:**

**Realtime Database –∏–¥–µ–∞–ª—å–Ω–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è:**

1. **–ß–∞—Ç-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π** ‚Äî –º–≥–Ω–æ–≤–µ–Ω–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π
2. **–ö–æ–ª–ª–∞–±–æ—Ä–∞—Ç–∏–≤–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤** ‚Äî —Å–æ–≤–º–µ—Å—Ç–Ω–æ–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
3. **–ú—É–ª—å—Ç–∏–ø–ª–µ–µ—Ä–Ω—ã—Ö –∏–≥—Ä** ‚Äî —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∏–≥—Ä–æ–≤–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è
4. **–¢—Ä–µ–∫–∏–Ω–≥–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏** ‚Äî –¥–æ—Å—Ç–∞–≤–∫–∞, —Ç–∞–∫—Å–∏
5. **Live-–¥–∞—à–±–æ—Ä–¥–æ–≤** ‚Äî –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –¥–∞–Ω–Ω—ã—Ö

**–ö–ª—é—á–µ–≤—ã–µ –Ω–∞–≤—ã–∫–∏ Middle:**
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö (–¥–µ–Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è)
- –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–æ–≤
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∞–º–∏ –∏ –ø–∞–º—è—Ç—å—é
- –ù–∞–ø–∏—Å–∞–Ω–∏–µ —Å–ª–æ–∂–Ω—ã—Ö –ø—Ä–∞–≤–∏–ª –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

**–ö–æ–≥–¥–∞ –≤—ã–±—Ä–∞—Ç—å Realtime Database:**
- –ü—Ä–æ—Å—Ç—ã–µ –∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ
- –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç ‚Äî —Ä–µ–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è
- –ù–µ –Ω—É–∂–Ω—ã —Å–ª–æ–∂–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã
- –ú–µ–Ω—å—à–µ 200k –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

**–ö–æ–≥–¥–∞ –≤—ã–±—Ä–∞—Ç—å Firestore:**
- –°–ª–æ–∂–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö
- –ù—É–∂–Ω—ã —Å–ª–æ–∂–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã
- –ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ
- –¢—Ä–µ–±—É–µ—Ç—Å—è –±–æ–ª—å—à–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π –∑–∞–ø—Ä–æ—Å–æ–≤

  </details>

    <details>
  <summary> –í –∫–∞–∫–∏—Ö —Å–µ—Ä–≤–∏—Å–∞—Ö –µ—Å—Ç—å –≤—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞? </summary>

  ## **Firebase —Å–µ—Ä–≤–∏—Å—ã —Å–æ –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–π –∞–Ω–∞–ª–∏—Ç–∏–∫–æ–π:**

---

### **1. Firebase Analytics (–æ—Å–Ω–æ–≤–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞)**
**–ß—Ç–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:**
```kotlin
// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –±–µ–∑ –∫–æ–¥–∞:
- first_open (–ø–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫)
- session_start (–Ω–∞—á–∞–ª–æ —Å–µ—Å—Å–∏–∏)
- app_remove (—É–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è)
- screen_view (–ø—Ä–æ—Å–º–æ—Ç—Ä —ç–∫—Ä–∞–Ω–∞)
- user_engagement (–≤—Ä–µ–º—è –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏)
```

**–†—É—á–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:**
```kotlin
FirebaseAnalytics.getInstance(context).logEvent(
    FirebaseAnalytics.Event.SELECT_ITEM,
    Bundle().apply {
        putString(FirebaseAnalytics.Param.ITEM_ID, "product_123")
        putString(FirebaseAnalytics.Param.ITEM_NAME, "–ö—Ä—É—Ç–æ–π —Ç–æ–≤–∞—Ä")
        putString(FirebaseAnalytics.Param.CONTENT_TYPE, "product")
    }
)
```

---

### **2. Firebase Crashlytics (–∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –æ—à–∏–±–æ–∫)**
**–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:**
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫—Ä–∞—à–µ–π –∏ –Ω–µ—Ñ–∞—Ç–∞–ª—å–Ω—ã—Ö –æ—à–∏–±–æ–∫
- –£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –∏ –≤–µ—Ä—Å–∏–∏ –û–° —Å –æ—à–∏–±–∫–∞–º–∏
- –°—Ç–µ–∫ —Ç—Ä–µ–π—Å—ã

**–° –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–º–∏ –º–µ—Ç—Ä–∏–∫–∞–º–∏:**
```kotlin
FirebaseCrashlytics.getInstance().apply {
    setCustomKey("user_level", 5)
    setCustomKey("app_version", BuildConfig.VERSION_NAME)
    log("–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–ø–æ–ª–Ω–∏–ª –¥–µ–π—Å—Ç–≤–∏–µ X")
    recordException(e)
}
```

**–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –≤ –∫–æ–Ω—Å–æ–ª–∏:**
- –¢—Ä–µ–Ω–¥—ã –∫—Ä–∞—à–µ–π
- –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ –ø—Ä–∏—á–∏–Ω–∞–º
- –í–ª–∏—è–Ω–∏–µ –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

---

### **3. Firebase Performance Monitoring**
**–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç:**
```kotlin
// –ë–µ–∑ –∫–æ–¥–∞:
- App start time (—Ö–æ–ª–æ–¥–Ω—ã–π/—Ç–µ–ø–ª—ã–π/–≥–æ—Ä—è—á–∏–π —Å—Ç–∞—Ä—Ç)
- Screen rendering performance
- Network requests (–∏–∑ Firebase/HTTP –∫–ª–∏–µ–Ω—Ç–æ–≤)

// –†—É—á–Ω—ã–µ —Ç—Ä–µ–π—Å—ã:
val trace = FirebasePerformance.getInstance().newTrace("checkout_process")
trace.start()
// ... –ø—Ä–æ—Ü–µ—Å—Å –æ–ø–ª–∞—Ç—ã ...
trace.stop()
```

**–ú–µ—Ç—Ä–∏–∫–∏:**
- –í—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏ —ç–∫—Ä–∞–Ω–æ–≤
- –°–∫–æ—Ä–æ—Å—Ç—å —Å–µ—Ç–∏
- –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö

---

### **4. Firebase Remote Config**
**–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤ (A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ):**
```kotlin
// –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞ –≤ –∫–æ–Ω—Å–æ–ª–∏
// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–±–æ—Ä –º–µ—Ç—Ä–∏–∫:
- –í–∞—Ä–∏–∞–Ω—Ç A vs –í–∞—Ä–∏–∞–Ω—Ç B
- –ö–æ–Ω–≤–µ—Ä—Å–∏—è
- –í–æ–≤–ª–µ—á–µ–Ω–Ω–æ—Å—Ç—å

// –í –∫–æ–¥–µ:
val remoteConfig = FirebaseRemoteConfig.getInstance()
val welcomeMessage = remoteConfig.getString("welcome_message_variant")
// Firebase –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –∫–∞–∫–æ–π –≤–∞—Ä–∏–∞–Ω—Ç –ª—É—á—à–µ
```

---

### **5. Firebase Predictions (AI-–ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è)**
**–ù–∞ –æ—Å–Ω–æ–≤–µ Analytics –¥–∞–Ω–Ω—ã—Ö:**
```kotlin
// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–µ–¥—Å–∫–∞–∑—ã–≤–∞–µ—Ç:
- –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å —É—Ö–æ–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (churn prediction)
- –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –ø–æ–∫—É–ø–∫–∏
- –°–µ–≥–º–µ–Ω—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:
FirebaseAuth.getInstance().addAuthStateListener { auth ->
    val user = auth.currentUser
    user?.let {
        val predictions = FirebasePredictions.getInstance()
        predictions.getPrediction("churn_probability") { probability ->
            if (probability > 0.7) {
                showSpecialOffer() // –£–¥–µ—Ä–∂–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            }
        }
    }
}
```

---

### **6. Google Analytics for Firebase**
**–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Google Analytics:**
- –ê—É–¥–∏—Ç–æ—Ä–∏–∏ (–∞—É–¥–∏—Ç–æ—Ä–Ω—ã–µ –æ—Ç—á–µ—Ç—ã)
- –ü—É—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (user journey)
- –≠–∫–æ–Ω–æ–º–∏–∫–∞ (–¥–æ—Ö–æ–¥, ARPU)
- –°–æ–±—ã—Ç–∏—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

---

## **–°–µ—Ä–≤–∏—Å—ã —Å –∫–æ—Å–≤–µ–Ω–Ω–æ–π –∞–Ω–∞–ª–∏—Ç–∏–∫–æ–π:**

### **1. Firebase Cloud Messaging (FCM)**
**–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π:**
```kotlin
// –í –∫–æ–Ω—Å–æ–ª–∏ FCM:
- Delivery rates (–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–æ/–æ—Ç–∫—Ä—ã—Ç–æ)
- Open rates (—Å–∫–æ–ª—å–∫–æ –æ—Ç–∫—Ä—ã–ª–∏)
- –í—Ä–µ–º—è —Ä–µ–∞–∫—Ü–∏–∏
- –£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞/–ø–ª–∞—Ç—Ñ–æ—Ä–º—ã
```

### **2. Firebase A/B Testing**
**–ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–æ —Å Remote Config –∏ Analytics:**
```kotlin
// –≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç—ã —Å:
- –¶–≤–µ—Ç–∞–º–∏ –∫–Ω–æ–ø–æ–∫
- –¢–µ–∫—Å—Ç–∞–º–∏
- –†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ–º —ç–ª–µ–º–µ–Ω—Ç–æ–≤
- –¶–µ–Ω–∞–º–∏

// –ê–Ω–∞–ª–∏–∑:
- –ö–æ–Ω–≤–µ—Ä—Å–∏—è
- Retention
- Revenue
```

### **3. Firebase Dynamic Links**
**–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø–µ—Ä–µ—Ö–æ–¥–æ–≤:**
- –ò—Å—Ç–æ—á–Ω–∏–∫–∏ —Ç—Ä–∞—Ñ–∏–∫–∞
- –ö–æ–Ω–≤–µ—Ä—Å–∏—è –ø–æ —Å—Å—ã–ª–∫–∞–º
- –ì–ª—É–±–∏–Ω–∞ –≤–æ—Ä–æ–Ω–∫–∏

---

## **–ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –¥–ª—è Middle:**

### **1. User Properties (—Å–≤–æ–π—Å—Ç–≤–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è):**
```kotlin
val analytics = FirebaseAnalytics.getInstance(context)

// –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–≤–æ–π—Å—Ç–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
analytics.setUserProperty("subscription_type", "premium")
analytics.setUserProperty("registration_source", "google")
analytics.setUserProperty("user_segment", "power_user")

// –°–µ–≥–º–µ–Ω—Ç–∞—Ü–∏—è –≤ –∫–æ–Ω—Å–æ–ª–∏ –ø–æ —ç—Ç–∏–º —Å–≤–æ–π—Å—Ç–≤–∞–º
```

### **2. Event Parameters (–ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Å–æ–±—ã—Ç–∏–π):**
```kotlin
fun logPurchase(product: Product, value: Double) {
    val bundle = Bundle().apply {
        putString(FirebaseAnalytics.Param.CURRENCY, "RUB")
        putDouble(FirebaseAnalytics.Param.VALUE, value)
        putString("product_category", product.category)
        putInt("product_rating", product.rating)
        putString("payment_method", "credit_card")
    }
    
    FirebaseAnalytics.getInstance(context)
        .logEvent(FirebaseAnalytics.Event.PURCHASE, bundle)
}
```

### **3. Conversion Tracking (–æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∫–æ–Ω–≤–µ—Ä—Å–∏–π):**
```kotlin
// –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ü–µ–ª–µ–π –≤ Firebase Console
// –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –≤–æ—Ä–æ–Ω–∫–∏:

// 1. –ü—Ä–æ—Å–º–æ—Ç—Ä —Ç–æ–≤–∞—Ä–∞
logEvent("view_item", product)

// 2. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –∫–æ—Ä–∑–∏–Ω—É  
logEvent("add_to_cart", product)

// 3. –ù–∞—á–∞–ª–æ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è
logEvent("begin_checkout", cart)

// 4. –ü–æ–∫—É–ø–∫–∞
logEvent("purchase", order)

// –í –∫–æ–Ω—Å–æ–ª–∏: conversion funnel analysis
```

### **4. Audience Building (—Å–æ–∑–¥–∞–Ω–∏–µ –∞—É–¥–∏—Ç–æ—Ä–∏–π):**
```kotlin
// –ê—É–¥–∏—Ç–æ—Ä–∏–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø–æ–≤–µ–¥–µ–Ω–∏—è:
// - "–í—ã—Å–æ–∫–æ–∞–∫—Ç–∏–≤–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏" (10+ —Å–µ—Å—Å–∏–π –≤ –Ω–µ–¥–µ–ª—é)
// - "–ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –ø–æ–∫—É–ø–∞—Ç–µ–ª–∏" (—Å–º–æ—Ç—Ä–µ–ª–∏ —Ç–æ–≤–∞—Ä 3+ —Ä–∞–∑–∞)
// - "–†–∏—Å–∫ —É—Ö–æ–¥–∞" (–Ω–µ –∑–∞—Ö–æ–¥–∏–ª–∏ 30 –¥–Ω–µ–π)

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∞—É–¥–∏—Ç–æ—Ä–∏–π:
// - –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø—É—à-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
// - –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è
// - A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —Å–µ–≥–º–µ–Ω—Ç–∞—Ö
```

### **5. E-commerce analytics:**
```kotlin
// Enhanced e-commerce —Å–æ–±—ã—Ç–∏—è
fun logEcommerceEvent(product: Product, action: String) {
    val params = Bundle().apply {
        putString("item_id", product.id)
        putString("item_name", product.name)
        putString("item_category", product.category)
        putDouble("price", product.price)
        putInt("quantity", 1)
        putString("currency", "RUB")
    }
    
    FirebaseAnalytics.getInstance(context)
        .logEvent("ecommerce_$action", params)
}

// –¢—Ä–µ–∫–∏–Ω–≥ –≤—Å–µ–π –≤–æ—Ä–æ–Ω–∫–∏ –ø—Ä–æ–¥–∞–∂
```

---

## **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å BigQuery –¥–ª—è –ø—Ä–æ–¥–≤–∏–Ω—É—Ç–æ–π –∞–Ω–∞–ª–∏—Ç–∏–∫–∏:**

### **1. –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö –≤ BigQuery:**
```sql
-- SQL –∑–∞–ø—Ä–æ—Å—ã –∫ –¥–∞–Ω–Ω—ã–º Firebase
SELECT 
  user_pseudo_id,
  event_name,
  COUNT(*) as event_count
FROM `project.analytics_events.*`
WHERE event_name = 'purchase'
GROUP BY user_pseudo_id, event_name
ORDER BY event_count DESC
```

### **2. –ö–∞—Å—Ç–æ–º–Ω—ã–µ –æ—Ç—á–µ—Ç—ã:**
```kotlin
// –î–∞–Ω–Ω—ã–µ –∏–∑ Firebase Analytics + –∫–∞—Å—Ç–æ–º–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
class AnalyticsManager {
    fun exportCustomMetrics() {
        // 1. –°–æ–±—ã—Ç–∏—è –∏–∑ Firebase
        // 2. –î–∞–Ω–Ω—ã–µ –∏–∑ –≤–∞—à–µ–π –ë–î
        // 3. –í–Ω–µ—à–Ω–∏–µ –¥–∞–Ω–Ω—ã–µ (CRM, ERP)
        // ‚Üí BigQuery –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞
    }
}
```

---

## **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –∞–ª–µ—Ä—Ç—ã:**

### **1. Crash-free users metric:**
```kotlin
// –í –∫–æ–Ω—Å–æ–ª–∏ Crashlytics:
- Crash-free users (% –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –±–µ–∑ –∫—Ä–∞—à–µ–π)
- –¢—Ä–µ–Ω–¥—ã —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏
- –ê–ª—ë—Ä—Ç—ã –ø—Ä–∏ —É—Ö—É–¥—à–µ–Ω–∏–∏

// –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–ª–µ—Ä—Ç–æ–≤:
- –ï—Å–ª–∏ crash-free < 99.5% ‚Üí email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
- –ï—Å–ª–∏ –Ω–æ–≤—ã–π —Ç–∏–ø –∫—Ä–∞—à–∞ ‚Üí Slack notification
```

### **2. Performance alerts:**
```kotlin
// –í Performance Monitoring:
- –ï—Å–ª–∏ –≤—Ä–µ–º—è —Å—Ç–∞—Ä—Ç–∞ > 5 —Å–µ–∫—É–Ω–¥
- –ï—Å–ª–∏ —Å–∫–æ—Ä–æ—Å—Ç—å —Å–µ—Ç–∏ < 100 KB/s –¥–ª—è 10% –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –ï—Å–ª–∏ –æ—à–∏–±–æ–∫ > 1% –∑–∞–ø—Ä–æ—Å–æ–≤
```

### **3. Custom dashboards:**
```kotlin
// –°–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Å—Ç–æ–º–Ω—ã—Ö –¥–∞—à–±–æ—Ä–¥–æ–≤:
// 1. Firebase –¥–∞–Ω–Ω—ã–µ
// 2. Google Data Studio
// 3. –ö–∞—Å—Ç–æ–º–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏

// –ü—Ä–∏–º–µ—Ä –º–µ—Ç—Ä–∏–∫ –¥–ª—è –¥–∞—à–±–æ—Ä–¥–∞:
- DAU/MAU (daily/monthly active users)
- Retention (1d, 7d, 30d)
- Average session duration
- Revenue per user
- Conversion rates
```

---

## **Best Practices –¥–ª—è Middle:**

### **1. –°–æ–≥–ª–∞—à–µ–Ω–∏–µ –ø–æ –∏–º–µ–Ω–æ–≤–∞–Ω–∏—é —Å–æ–±—ã—Ç–∏–π:**
```kotlin
// –°—Ç—Ä—É–∫—Ç—É—Ä–∞: object_action
object AnalyticsEvents {
    // –≠–∫—Ä–∞–Ω—ã
    const val SCREEN_HOME = "screen_home"
    const val SCREEN_PRODUCT = "screen_product"
    
    // –î–µ–π—Å—Ç–≤–∏—è
    const val BUTTON_SIGNUP_CLICK = "button_signup_click"
    const val PRODUCT_ADD_TO_CART = "product_add_to_cart"
    
    // –û—à–∏–±–∫–∏
    const val ERROR_NETWORK = "error_network"
    const val ERROR_PAYMENT = "error_payment"
}
```

### **2. –ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤:**
```kotlin
object AnalyticsParams {
    const val USER_ID = "user_id"
    const val SCREEN_NAME = "screen_name"
    const val ERROR_MESSAGE = "error_message"
    const val DURATION = "duration_ms"
    const val SUCCESS = "success"
}
```

### **3. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:**
```kotlin
// –ë–∞—Ç—á–∏–Ω–≥ —Å–æ–±—ã—Ç–∏–π
class BatchedAnalytics {
    private val events = mutableListOf<AnalyticsEvent>()
    
    fun logEvent(event: AnalyticsEvent) {
        events.add(event)
        if (events.size >= 10) {
            sendBatch()
        }
    }
    
    private fun sendBatch() {
        // –û—Ç–ø—Ä–∞–≤–∫–∞ –ø–∞—á–∫–æ–π
        FirebaseAnalytics.logEvents(events)
        events.clear()
    }
}
```

### **4. Privacy compliance (GDPR, CCPA):**
```kotlin
// –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ–≥–ª–∞—Å–∏–µ–º
fun setAnalyticsConsent(granted: Boolean) {
    FirebaseAnalytics.getInstance(context)
        .setAnalyticsCollectionEnabled(granted)
    
    if (!granted) {
        // –û—á–∏—Å—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö
        FirebaseAnalytics.getInstance(context)
            .resetAnalyticsData()
    }
}
```

---

## **–ò—Ç–æ–≥ –¥–ª—è Middle:**

**Firebase —Å–µ—Ä–≤–∏—Å—ã —Å–æ –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–π –∞–Ω–∞–ª–∏—Ç–∏–∫–æ–π:**

1. **Firebase Analytics** ‚Äî –æ—Å–Ω–æ–≤–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø–æ–≤–µ–¥–µ–Ω–∏—è
2. **Crashlytics** ‚Äî –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏ –∏ –æ—à–∏–±–æ–∫  
3. **Performance Monitoring** ‚Äî –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
4. **Remote Config + A/B Testing** ‚Äî –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤
5. **Predictions** ‚Äî AI-–ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –¥–∞–Ω–Ω—ã—Ö

**–ö–ª—é—á–µ–≤—ã–µ –Ω–∞–≤—ã–∫–∏ Middle:**
- –ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è —Å–æ–±—ã—Ç–∏–π –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- –°–æ–∑–¥–∞–Ω–∏–µ –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∞—É–¥–∏—Ç–æ—Ä–∏–π
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å BigQuery –¥–ª—è –ø—Ä–æ–¥–≤–∏–Ω—É—Ç–æ–π –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∏ –∞–ª–µ—Ä—Ç–æ–≤
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏ privacy

**–í–∞–∂–Ω–æ:** –ü—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –∞–Ω–∞–ª–∏—Ç–∏–∫—É —Å —Å–∞–º–æ–≥–æ –Ω–∞—á–∞–ª–∞ ‚Äî —Ä–µ—Ç—Ä–æ—Å–ø–µ–∫—Ç–∏–≤–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ!

  </details>

  <details>
  <summary> –ö–∞–∫ –ø–µ—Ä–µ–¥–∞—Ç—å appBundle —á–µ—Ä–µ–∑ App Distribution? </summary>

  ## **–ü–µ—Ä–µ–¥–∞—á–∞ App Bundle —á–µ—Ä–µ–∑ Firebase App Distribution:**

---

## **–°–ø–æ—Å–æ–± 1: –ß–µ—Ä–µ–∑ Firebase Console (—Ä—É—á–Ω–æ–π)**

### **–®–∞–≥ 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ App Bundle**
```bash
# –°–æ–∑–¥–∞—Ç—å App Bundle
./gradlew bundleRelease

# –†–µ–∑—É–ª—å—Ç–∞—Ç: app/build/outputs/bundle/release/app-release.aab
```

### **–®–∞–≥ 2: –ó–∞–≥—Ä—É–∑–∫–∞ –≤ Firebase Console**
1. **–ó–∞–π—Ç–∏ –≤** [Firebase Console](https://console.firebase.google.com)
2. **–í—ã–±—Ä–∞—Ç—å –ø—Ä–æ–µ–∫—Ç** ‚Üí **App Distribution** –≤ –º–µ–Ω—é
3. **–ù–∞–∂–∞—Ç—å** "–ù–æ–≤—ã–π —Ä–µ–ª–∏–∑"
4. **–ó–∞–≥—Ä—É–∑–∏—Ç—å** `.aab` —Ñ–∞–π–ª
5. **–ó–∞–ø–æ–ª–Ω–∏—Ç—å:**
   - Release notes (—á—Ç–æ –Ω–æ–≤–æ–≥–æ)
   - –ì—Ä—É–ø–ø—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤—â–∏–∫–æ–≤ (qa-team, beta-testers)
   - –í–∫–ª—é—á–∏—Ç—å/–≤—ã–∫–ª—é—á–∏—Ç—å "–§–∞–∑–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è"
6. **–û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å**

---

## **–°–ø–æ—Å–æ–± 2: –ß–µ—Ä–µ–∑ Gradle (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π)**

### **–®–∞–≥ 1: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ `build.gradle`**
```gradle
// app/build.gradle
android {
    buildTypes {
        release {
            // –í–∫–ª—é—á–∏—Ç—å App Distribution
            firebaseAppDistribution {
                // 1. –ü—É—Ç—å –∫ —Å–µ—Ä–≤–∏—Å–Ω–æ–º—É –∞–∫–∫–∞—É–Ω—Ç—É
                serviceCredentialsFile = file("firebase-app-distribution-key.json")
                
                // 2. Release notes
                releaseNotes = "–ù–æ–≤–∞—è –≤–µ—Ä—Å–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è–º–∏"
                
                // 3. –ì—Ä—É–ø–ø—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤—â–∏–∫–æ–≤
                groups = "qa-team, beta-testers"
                
                // 4. –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤—â–∏–∫–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
                testers = "tester1@example.com, tester2@example.com"
                
                // 5. –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
                artifactType = "AAB"  // –Ø–≤–Ω–æ —É–∫–∞–∑—ã–≤–∞–µ–º App Bundle
                appId = "1:123456789012:android:abcdef" // Firebase App ID
            }
        }
    }
}
```

### **–®–∞–≥ 2: –°–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–Ω–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞**
1. **Google Cloud Console** ‚Üí **IAM & Admin** ‚Üí **Service Accounts**
2. **–°–æ–∑–¥–∞—Ç—å —Å–µ—Ä–≤–∏—Å–Ω—ã–π –∞–∫–∫–∞—É–Ω—Ç** —Å —Ä–æ–ª—å—é `Firebase App Distribution Admin`
3. **–°–æ–∑–¥–∞—Ç—å JSON –∫–ª—é—á** ‚Üí —Å–∫–∞—á–∞—Ç—å –∫–∞–∫ `firebase-app-distribution-key.json`
4. **–ü–æ–ª–æ–∂–∏—Ç—å –≤ –∫–æ—Ä–µ–Ω—å –ø—Ä–æ–µ–∫—Ç–∞** (–Ω–µ –∫–æ–º–º–∏—Ç–∏—Ç—å!)

---

### **–®–∞–≥ 3: –í—ã–ø–æ–ª–Ω–∏—Ç—å –¥–µ–ø–ª–æ–π**
```bash
# –î–ª—è App Bundle:
./gradlew bundleRelease appDistributionUploadReleaseBundle

# –ò–ª–∏ —á–µ—Ä–µ–∑ –æ–¥–Ω—É –∫–æ–º–∞–Ω–¥—É:
./gradlew appDistributionUploadReleaseBundle
```

**–õ–æ–≥–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:**
```
> Task :app:appDistributionUploadReleaseBundle
‚úì Uploaded app-release.aab
‚úì Published release 1.2.3 (123) to 15 testers
```

---

## **–°–ø–æ—Å–æ–± 3: –ß–µ—Ä–µ–∑ Firebase CLI (–∫–æ–º–∞–Ω–¥–Ω–∞—è —Å—Ç—Ä–æ–∫–∞)**

### **–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞:**
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Firebase CLI
npm install -g firebase-tools

# –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
firebase login

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤ –ø—Ä–æ–µ–∫—Ç–µ
firebase init appdistribution
```

### **–ó–∞–≥—Ä—É–∑–∫–∞ App Bundle:**
```bash
# –ó–∞–≥—Ä—É–∑–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π .aab —Ñ–∞–π–ª
firebase appdistribution:distribute app-release.aab \
  --app 1:123456789012:android:abcdef \
  --release-notes "–ù–æ–≤–∞—è –≤–µ—Ä—Å–∏—è" \
  --groups "qa-team"
```

---

## **–°–ø–æ—Å–æ–± 4: –ß–µ—Ä–µ–∑ GitHub Actions (CI/CD)**

### **`.github/workflows/firebase-distribution.yml`:**
```yaml
name: Firebase App Distribution

on:
  push:
    branches: [ main, develop ]
  pull_request:
    branches: [ main ]

jobs:
  build-and-distribute:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout code
      uses: actions/checkout@v3
      
    - name: Setup Java
      uses: actions/setup-java@v3
      with:
        distribution: 'temurin'
        java-version: '17'
        
    - name: Setup Android SDK
      uses: android-actions/setup-android@v2
      
    - name: Build App Bundle
      run: ./gradlew bundleRelease
      
    - name: Upload to Firebase App Distribution
      uses: wzieba/Firebase-Distribution-Github-Action@v1
      with:
        appId: ${{ secrets.FIREBASE_APP_ID }}
        serviceCredentialsFileContent: ${{ secrets.FIREBASE_SERVICE_ACCOUNT }}
        groups: qa-team,beta-testers
        releaseNotes: |
          –ë–∏–ª–¥: ${{ github.sha }}
          –í–µ—Ç–∫–∞: ${{ github.ref }}
          –ê–≤—Ç–æ—Ä: ${{ github.actor }}
        file: app/build/outputs/bundle/release/app-release.aab
```

### **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–µ–∫—Ä–µ—Ç–æ–≤ –≤ GitHub:**
1. **FIREBASE_APP_ID** ‚Üí –∏–∑ Firebase Console
2. **FIREBASE_SERVICE_ACCOUNT** ‚Üí —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ JSON –∫–ª—é—á–∞

---

## **–°–ø–æ—Å–æ–± 5: –ß–µ—Ä–µ–∑ Fastlane (–ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π)**

### **`fastlane/Fastfile`:**
```ruby
lane :distribute_to_firebase do
  # 1. –°–±–æ—Ä–∫–∞ App Bundle
  gradle(
    task: 'bundle',
    build_type: 'Release'
  )
  
  # 2. –ó–∞–≥—Ä—É–∑–∫–∞ –≤ Firebase App Distribution
  firebase_app_distribution(
    app: ENV["FIREBASE_APP_ID"],
    service_credentials_file: "firebase-app-distribution-key.json",
    groups: "qa-team,beta-testers",
    release_notes: "–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –±–∏–ª–¥ –æ—Ç #{Time.now.strftime('%Y-%m-%d %H:%M')}",
    apk_path: lane_context[SharedValues::GRADLE_APK_OUTPUT_PATH]
  )
end
```

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```bash
fastlane distribute_to_firebase
```

---

## **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏–π (Middle):**

### **1. –†–∞–∑–Ω—ã–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö flavor:**
```gradle
// app/build.gradle
android {
    flavorDimensions "environment"
    productFlavors {
        dev {
            dimension "environment"
            firebaseAppDistribution {
                groups = "dev-team"
                releaseNotes = "Dev build"
            }
        }
        staging {
            dimension "environment"
            firebaseAppDistribution {
                groups = "qa-team,staging-testers"
                releaseNotes = "Staging build"
            }
        }
        production {
            dimension "environment"
            firebaseAppDistribution {
                groups = "beta-testers"
                releaseNotes = "Production beta"
            }
        }
    }
}
```

### **2. –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ release notes:**
```gradle
firebaseAppDistribution {
    releaseNotesFile = file("release_notes.txt")
    
    // –ò–ª–∏ –∏–∑ git
    def gitLog = "git log --oneline -10".execute().text.trim()
    releaseNotes = "–ü–æ—Å–ª–µ–¥–Ω–∏–µ –∫–æ–º–º–∏—Ç—ã:\n${gitLog}"
}
```

### **3. –£—Å–ª–æ–≤–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞:**
```gradle
// –û—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –µ—Å—Ç—å —Ç–µ–≥–∏
afterEvaluate {
    tasks.named("appDistributionUploadReleaseBundle").configure {
        onlyIf {
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å–ª–æ–≤–∏–π
            !gradle.startParameter.taskNames.contains("assembleDebug") &&
            project.hasProperty("distribute")
        }
    }
}
```

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```bash
# –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ —Å —Ñ–ª–∞–≥–æ–º
./gradlew appDistributionUploadReleaseBundle -Pdistribute
```

---

## **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤—â–∏–∫–∞–º–∏:**

### **1. –°–æ–∑–¥–∞–Ω–∏–µ –≥—Ä—É–ø–ø –≤ Firebase Console:**
```
–ì—Ä—É–ø–ø—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤—â–∏–∫–æ–≤:
- qa-team (QA –∏–Ω–∂–µ–Ω–µ—Ä—ã)
- beta-testers (–±–µ—Ç–∞-—Ç–µ—Å—Ç–µ—Ä—ã)
- internal-team (–≤–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –∫–æ–º–∞–Ω–¥–∞)
- vip-users (–∫–ª—é—á–µ–≤—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏)
```

### **2. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤—â–∏–∫–æ–≤ —á–µ—Ä–µ–∑ CSV:**
```csv
email,display_name,groups
user1@example.com,–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤,qa-team;beta-testers
user2@example.com,–ü–µ—Ç—Ä –ü–µ—Ç—Ä–æ–≤,beta-testers
```

### **3. –ß–µ—Ä–µ–∑ Firebase CLI:**
```bash
# –î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç–∏—Ä–æ–≤—â–∏–∫–∞
firebase appdistribution:testers:add user@example.com \
  --app 1:123456789012:android:abcdef \
  --groups "qa-team"

# –£–¥–∞–ª–∏—Ç—å —Ç–µ—Å—Ç–∏—Ä–æ–≤—â–∏–∫–∞
firebase appdistribution:testers:remove user@example.com
```

---

## **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞:**

### **1. –¢—Ä–µ–∫–∏–Ω–≥ —É—Å—Ç–∞–Ω–æ–≤–æ–∫:**
```kotlin
// –í –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –º–æ–∂–Ω–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å:
class AppDistributionTracker {
    
    fun checkForNewRelease() {
        FirebaseAppDistribution.getInstance()
            .checkForNewRelease()
            .addOnCompleteListener { task ->
                if (task.isSuccessful) {
                    val updateInfo = task.result
                    if (updateInfo != null) {
                        // –ï—Å—Ç—å –Ω–æ–≤–∞—è –≤–µ—Ä—Å–∏—è
                        logEvent("app_distribution_update_available")
                    }
                }
            }
    }
    
    fun logDistributionEvent() {
        FirebaseAnalytics.getInstance(context)
            .logEvent("app_distribution_install", Bundle().apply {
                putString("install_source", "firebase_app_distribution")
                putString("tester_group", "beta-testers")
            })
    }
}
```

### **2. –°–±–æ—Ä –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏:**
```kotlin
// –í–∫–ª—é—á–µ–Ω–∏–µ –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏
FirebaseAppDistribution.getInstance().isFeedbackEnabled = true

// –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–∫—Ä–∏–Ω—à–æ—Ç —Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–º
```

---

## **–ü—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è (Middle):**

### **–ü—Ä–æ–±–ª–µ–º–∞: "No mapping file found" –¥–ª—è Crashlytics**
**–†–µ—à–µ–Ω–∏–µ:**
```gradle
firebaseAppDistribution {
    // –í–∫–ª—é—á–∏—Ç—å –∑–∞–≥—Ä—É–∑–∫—É mapping —Ñ–∞–π–ª–∞
    artifactType = "AAB"
}
```

### **–ü—Ä–æ–±–ª–µ–º–∞: –û—à–∏–±–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ —Å–µ—Ä–≤–∏—Å–Ω–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞**
**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è
gcloud auth activate-service-account --key-file=firebase-app-distribution-key.json
gcloud projects list  # –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –≤–∏–¥–∏—Ç –ø—Ä–æ–µ–∫—Ç
```

### **–ü—Ä–æ–±–ª–µ–º–∞: App Bundle —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π**
**–†–µ—à–µ–Ω–∏–µ:**
```gradle
android {
    bundle {
        // –í–∫–ª—é—á–∏—Ç—å —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –ø–æ ABI
        abi {
            enableSplit = true
        }
        // –í–∫–ª—é—á–∏—Ç—å —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –ø–æ density
        density {
            enableSplit = true
        }
        // –í–∫–ª—é—á–∏—Ç—å —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –ø–æ —è–∑—ã–∫–∞–º
        language {
            enableSplit = true
        }
    }
}
```

### **–ü—Ä–æ–±–ª–µ–º–∞: –†–∞–∑–Ω—ã–µ App ID –¥–ª—è —Ä–∞–∑–Ω—ã—Ö flavor**
**–†–µ—à–µ–Ω–∏–µ:**
```gradle
productFlavors {
    dev {
        firebaseAppDistribution {
            appId = "1:123456789012:android:abcdef_dev"
        }
    }
    production {
        firebaseAppDistribution {
            appId = "1:123456789012:android:abcdef"
        }
    }
}
```

---

## **Best Practices –¥–ª—è Middle:**

### **1. –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —Ä–µ–ª–∏–∑–Ω–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞:**
```bash
#!/bin/bash
# release.sh

# 1. –£–≤–µ–ª–∏—á–µ–Ω–∏–µ –≤–µ—Ä—Å–∏–∏
./gradlew incrementVersionCode

# 2. –°–±–æ—Ä–∫–∞ App Bundle
./gradlew bundleRelease

# 3. –ó–∞–≥—Ä—É–∑–∫–∞ –≤ Firebase App Distribution
./gradlew appDistributionUploadReleaseBundle \
  -PreleaseNotes="$(cat changelog.txt)"

# 4. –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã
curl -X POST -H 'Content-type: application/json' \
  --data "{\"text\":\"–ù–æ–≤—ã–π –±–∏–ª–¥ $VERSION –¥–æ—Å—Ç—É–ø–µ–Ω –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è\"}" \
  $SLACK_WEBHOOK_URL
```

### **2. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∫–æ–¥-—Ä–µ–≤—å—é:**
```yaml
# GitHub Actions - –æ—Ç–ø—Ä–∞–≤–∫–∞ –Ω–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ—Å–ª–µ PR
name: Test Build on PR

on: pull_request

jobs:
  distribute-pr-build:
    if: github.event.pull_request.head.ref == 'feature/*'
    runs-on: ubuntu-latest
    steps:
      - name: Build and distribute
        run: |
          ./gradlew bundleRelease appDistributionUploadReleaseBundle \
            -PreleaseNotes="PR: ${{ github.event.pull_request.title }}"
```

### **3. –ö–∞–Ω–∞–ª—ã –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏:**
```kotlin
// –°–±–æ—Ä —Ñ–∏–¥–±–µ–∫–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏
object FeedbackCollector {
    
    fun collectDistributionFeedback() {
        // 1. Firebase App Distribution feedback
        // 2. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Jira/YouTrack
        // 3. Slack —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –¥–ª—è –∫–æ–º–∞–Ω–¥—ã
        // 4. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –±–∞–≥-—Ä–µ–ø–æ—Ä—Ç—ã
    }
}
```

---

## **–ò—Ç–æ–≥ –¥–ª—è Middle:**

### **–û—Å–Ω–æ–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±—ã –æ—Ç–ø—Ä–∞–≤–∫–∏ App Bundle:**
1. **Firebase Console** ‚Äî —Ä—É—á–Ω–æ–π, –¥–ª—è —Ä–∞–∑–æ–≤—ã—Ö –æ—Ç–ø—Ä–∞–≤–æ–∫
2. **Gradle plugin** ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π, –¥–ª—è CI/CD
3. **Firebase CLI** ‚Äî –≥–∏–±–∫–∏–π, –¥–ª—è —Å–∫—Ä–∏–ø—Ç–æ–≤
4. **GitHub Actions** ‚Äî –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏
5. **Fastlane** ‚Äî –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤

### **–ö–ª—é—á–µ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:**
- –°–µ—Ä–≤–∏—Å–Ω—ã–π –∞–∫–∫–∞—É–Ω—Ç —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –ø—Ä–∞–≤–∞–º–∏
- –ì—Ä—É–ø–ø—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤—â–∏–∫–æ–≤
- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ release notes
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∞–Ω–∞–ª–∏—Ç–∏–∫–æ–π

### **–î–ª—è production use:**
- –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –≤—Å–µ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —É—Å—Ç–∞–Ω–æ–≤–æ–∫ –∏ —Ñ–∏–¥–±–µ–∫–∞
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º CI/CD
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–æ–º –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å—é

**App Distribution –∏–¥–µ–∞–ª–µ–Ω –¥–ª—è:** –±–µ—Ç–∞-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö —Å–±–æ—Ä–æ–∫, –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ–≥–æ rollout –Ω–æ–≤—ã—Ö –≤–µ—Ä—Å–∏–π.

  </details>

  
</details>


<details> 
  <summary> <h2> üå≥ Senior </h2> </summary>

  <details>
  <summary> –ö–∞–∫–æ–≤—ã –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è Firebase? </summary>

  ## **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è Firebase –¥–ª—è Senior —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞**

---

## **1. –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è**

### **Firestore –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:**
```javascript
// –ñ–µ—Å—Ç–∫–∏–µ –ª–∏–º–∏—Ç—ã –Ω–∞ –æ–ø–µ—Ä–∞—Ü–∏–∏
- –ó–∞–ø–∏—Å—å: 1 –æ–ø–µ—Ä–∞—Ü–∏—è/—Å–µ–∫ –Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç (500/—Å–µ–∫ –Ω–∞ –±–∞–∑—É)
- –ß—Ç–µ–Ω–∏–µ: 10,000 –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤/—Å–µ–∫ –Ω–∞ –±–∞–∑—É
- –†–∞–∑–º–µ—Ä –¥–æ–∫—É–º–µ–Ω—Ç–∞: 1 MiB
- –ì–ª—É–±–∏–Ω–∞ –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç–∏: 100 —É—Ä–æ–≤–Ω–µ–π
- –ú–∞–∫—Å–∏–º—É–º –∏–Ω–¥–µ–∫—Å–æ–≤: 200 —Å–æ—Å—Ç–∞–≤–Ω—ã—Ö, 40 –Ω–∞ –∫–æ–ª–ª–µ–∫—Ü–∏—é
```

**–ü—Ä–∏–º–µ—Ä –ø—Ä–æ–±–ª–µ–º—ã:**
```kotlin
// ‚ùå Counter –≤ Firestore (–∞–Ω—Ç–∏–ø–∞—Ç—Ç–µ—Ä–Ω)
class CounterService {
    fun incrementCounter() {
        // –ü—Ä–∏ 1000 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π ‚Üí 1000 –æ–ø–µ—Ä–∞—Ü–∏–π/—Å–µ–∫ –Ω–∞ –æ–¥–∏–Ω –¥–æ–∫—É–º–µ–Ω—Ç
        // –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ: 1 –æ–ø–µ—Ä–∞—Ü–∏—è/—Å–µ–∫
        db.collection("counters").document("global")
            .update("count", FieldValue.increment(1))
    }
}
```

**–†–µ—à–µ–Ω–∏–µ –¥–ª—è Senior:**
```kotlin
// ‚úÖ –®–∞—Ä–¥–∏–Ω–≥ —Å—á–µ—Ç—á–∏–∫–æ–≤
class ShardedCounter {
    private val NUM_SHARDS = 10
    
    fun incrementCounter() {
        // –†–∞—Å–ø—Ä–µ–¥–µ–ª—è–µ–º –ø–æ 10 —à–∞—Ä–¥–∞–º
        val shardId = Random.nextInt(NUM_SHARDS)
        db.collection("counters")
            .document("global")
            .collection("shards")
            .document("shard_$shardId")
            .update("count", FieldValue.increment(1))
    }
    
    fun getCount(): Long {
        // –°—É–º–º–∏—Ä—É–µ–º –≤—Å–µ —à–∞—Ä–¥—ã
        val shards = db.collection("counters/global/shards").get()
        return shards.documents.sumOf { it.getLong("count") ?: 0 }
    }
}
```

---

## **2. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è**

### **Vendor Lock-in:**
```kotlin
// Firebase-—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–π –∫–æ–¥ —Å–ª–æ–∂–Ω–æ –º–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å
class FirebaseSpecific {
    // –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç Firebase SDK
    val db = Firebase.firestore
    val auth = Firebase.auth
    
    // Firestore-—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
    fun queryWithFirestoreSyntax() {
        db.collection("users")
            .whereArrayContains("tags", "premium")
            .orderBy("createdAt") // –¢—Ä–µ–±—É–µ—Ç composite index
            .limit(50)
    }
}

// –ú–∏–≥—Ä–∞—Ü–∏—è —Ç—Ä–µ–±—É–µ—Ç –ø–æ–ª–Ω–æ–≥–æ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞
```

**–†–µ—à–µ–Ω–∏–µ:**
```kotlin
// ‚úÖ –ê–±—Å—Ç—Ä–∞–∫—Ü–∏—è —Å–ª–æ—è –¥–∞–Ω–Ω—ã—Ö
interface UserRepository {
    suspend fun getUsers(filters: UserFilters): List<User>
    suspend fun createUser(user: User)
}

class FirebaseUserRepository : UserRepository {
    private val db = Firebase.firestore
    
    override suspend fun getUsers(filters: UserFilters): List<User> {
        // Firebase-—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
        // –ù–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ø–æ–∑–≤–æ–ª—è–µ—Ç –º–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å
    }
}

class PostgresUserRepository : UserRepository {
    // –î—Ä—É–≥–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
}
```

---

## **3. –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤**

### **Firestore Query Limitations:**
```sql
-- –ù–ï–í–û–ó–ú–û–ñ–ù–û –≤ Firestore:
SELECT * FROM users 
WHERE age > 18 
  AND city = 'Moscow' 
  AND subscription = 'premium'
ORDER BY last_login DESC
LIMIT 20 OFFSET 40

-- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:
-- 1. –ù–µ–ª—å–∑—è —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –ø–æ –¥–≤—É–º –Ω–µ—Ä–∞–≤–µ–Ω—Å—Ç–≤–∞–º —Ä–∞–∑–Ω—ã—Ö –ø–æ–ª–µ–π
-- 2. –ù–µ–ª—å–∑—è –¥–µ–ª–∞—Ç—å OR –º–µ–∂–¥—É –ø–æ–ª—è–º–∏
-- 3. –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–∞—è –ø–∞–≥–∏–Ω–∞—Ü–∏—è (—Ç–æ–ª—å–∫–æ forward, –Ω–µ—Ç OFFSET)
-- 4. –°–ª–æ–∂–Ω—ã–µ JOIN –Ω–µ–≤–æ–∑–º–æ–∂–Ω—ã
```

**Workaround –¥–ª—è Senior:**
```kotlin
// ‚úÖ –ü–∞—Ç—Ç–µ—Ä–Ω: Materialized Views
object UserMaterializedView {
    
    // –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
    suspend fun updateUserView(user: User) {
        val viewData = mapOf(
            "age_city_subscription" to "${user.age}_${user.city}_${user.subscription}",
            "age_subscription" to "${user.age}_${user.subscription}",
            "city_subscription" to "${user.city}_${user.subscription}",
            "searchable" to "${user.name} ${user.email} ${user.city}".lowercase()
        )
        
        // –°–æ—Ö—Ä–∞–Ω—è–µ–º –ø—Ä–µ–∫–∞–ª—å–∫—É–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–ª—è
        db.collection("users_view").document(user.id)
            .set(viewData, SetOptions.merge())
    }
    
    // –¢–µ–ø–µ—Ä—å –º–æ–∂–µ–º —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –∏—Å–∫–∞—Ç—å
    suspend fun findPremiumUsersInMoscow(): List<User> {
        return db.collection("users_view")
            .whereEqualTo("city_subscription", "Moscow_premium")
            .get()
            .documents
            .map { getUserById(it.id) }
    }
}
```

---

## **4. –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–æ–Ω–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è**

### **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π:**
```kotlin
// Firestore —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏:
val db = Firebase.firestore

db.runTransaction { transaction ->
    // ‚ùå –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:
    // 1. –ú–∞–∫—Å–∏–º—É–º 500 –æ–ø–µ—Ä–∞—Ü–∏–π
    // 2. –¢–∞–π–º–∞—É—Ç 60 —Å–µ–∫—É–Ω–¥
    // 3. –ù–µ–ª—å–∑—è —á–∏—Ç–∞—Ç—å –ø–æ—Å–ª–µ –∑–∞–ø–∏—Å–∏
    // 4. –ù–µ–ª—å–∑—è –¥–µ–ª–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã —Å limit/offset
    
    val doc1 = transaction.get(docRef1)
    val doc2 = transaction.get(docRef2)
    
    // ... –ª–æ–≥–∏–∫–∞ ...
    
    transaction.update(docRef1, mapOf("status" to "completed"))
    transaction.update(docRef2, mapOf("status" to "pending"))
    
    // ‚ùå –ù–µ–ª—å–∑—è:
    // val docs = transaction.get(query.withLimit(10))
}
```

**–†–µ—à–µ–Ω–∏–µ:**
```kotlin
// ‚úÖ –ü–∞—Ç—Ç–µ—Ä–Ω: –ö–æ–º–ø–µ–Ω—Å–∏—Ä—É—é—â–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ (Saga)
class OrderSaga {
    
    suspend fun processOrder(order: Order) {
        try {
            // –®–∞–≥ 1: –†–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞
            reserveInventory(order.items)
            
            // –®–∞–≥ 2: –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø–ª–∞—Ç–µ–∂–∞
            val paymentId = processPayment(order)
            
            // –®–∞–≥ 3: –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞
            createOrderDocument(order.copy(paymentId = paymentId))
            
            // –®–∞–≥ 4: –û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
            sendOrderConfirmation(order)
            
        } catch (e: Exception) {
            // –ö–æ–º–ø–µ–Ω—Å–∏—Ä—É—é—â–∏–µ –¥–µ–π—Å—Ç–≤–∏—è
            compensate(order, e)
        }
    }
    
    private suspend fun compensate(order: Order, error: Exception) {
        // –û—Ç–∫–∞—Ç –∫–∞–∂–¥–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏
        when (error) {
            is InventoryReservationFailed -> {
                // –ù–∏—á–µ–≥–æ –Ω–µ –¥–µ–ª–∞–µ–º - —Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–µ –ø—Ä–æ—à–ª–æ
            }
            is PaymentFailed -> {
                releaseInventory(order.items) // –ö–æ–º–ø–µ–Ω—Å–∞—Ü–∏—è —à–∞–≥–∞ 1
            }
            is OrderCreationFailed -> {
                releaseInventory(order.items)
                refundPayment(order.paymentId)
            }
        }
    }
}
```

---

## **5. –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —Å—Ç–æ–∏–º–æ—Å—Ç–∏**

### **Cost Surprises:**
```javascript
// Firestore —Ü–µ–Ω–æ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ:
- –ß—Ç–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞: $0.06 –∑–∞ 100,000
- –ó–∞–ø–∏—Å—å –¥–æ–∫—É–º–µ–Ω—Ç–∞: $0.18 –∑–∞ 100,000
- –£–¥–∞–ª–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞: $0.02 –∑–∞ 100,000
- –•—Ä–∞–Ω–µ–Ω–∏–µ: $0.18/GB/–º–µ—Å—è—Ü

// –ü—Ä–∏–º–µ—Ä –¥–æ—Ä–æ–≥–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏:
function expensiveListener() {
  // –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–ª–ª–µ–∫—Ü–∏–∏ —Å 10,000 –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
  db.collection("messages").onSnapshot(snapshot => {
    // –ü—Ä–∏ –∫–∞–∂–¥–æ–º –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –ª—é–±–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞:
    // 1. –ß–∏—Ç–∞–µ–º –í–°–ï 10,000 –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
    // 2. –ü–ª–∞—Ç–∏–º –∑–∞ 10,000 –æ–ø–µ—Ä–∞—Ü–∏–π —á—Ç–µ–Ω–∏—è
    // 3. –ï—Å–ª–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è 1 —Ä–∞–∑ –≤ —Å–µ–∫—É–Ω–¥—É ‚Üí $3,110/–º–µ—Å—è—Ü
  });
}
```

**–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è Senior:**
```kotlin
// ‚úÖ –ü–∞—Ç—Ç–µ—Ä–Ω: –û–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ –±—é–¥–∂–µ—Ç—ã –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
class CostOptimizationManager {
    
    companion object {
        // –ë—é–¥–∂–µ—Ç—ã –Ω–∞ –æ–ø–µ—Ä–∞—Ü–∏–∏
        const val DAILY_READ_LIMIT = 1_000_000
        const val DAILY_WRITE_LIMIT = 100_000
        const val MONTHLY_STORAGE_LIMIT = 50 * 1024 * 1024 * 1024 // 50GB
    }
    
    private val operationCounters = mutableMapOf<String, Long>()
    
    suspend fun <T> withCostControl(
        operation: String,
        estimatedCost: Long,
        block: suspend () -> T
    ): T {
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–º–∏—Ç–æ–≤
        checkDailyLimit(operation, estimatedCost)
        
        // –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–æ–º
        val startTime = System.currentTimeMillis()
        val result = block()
        val actualTime = System.currentTimeMillis() - startTime
        
        // –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –∞–ª–µ—Ä—Ç—ã
        logOperationCost(operation, estimatedCost, actualTime)
        
        if (operationCounters[operation] ?: 0 > DAILY_READ_LIMIT * 0.8) {
            sendAlert("$operation –±–ª–∏–∑–∫–æ –∫ –ª–∏–º–∏—Ç—É")
        }
        
        return result
    }
    
    // –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
    fun getMessages(chatId: String, limit: Int): List<Message> {
        return withCostControl("messages_read", limit.toLong()) {
            db.collection("chats/$chatId/messages")
                .orderBy("timestamp")
                .limitToLast(limit)
                .get()
                .documents.map { it.toObject(Message::class.java)!! }
        }
    }
}
```

---

## **6. –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏**

### **Security Rules Complexity:**
```javascript
// –°–ª–æ–∂–Ω–æ—Å—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    match /orders/{orderId} {
      allow create: if // 50+ —Å—Ç—Ä–æ–∫ –ª–æ–≥–∏–∫–∏
        request.auth != null &&
        request.resource.data.userId == request.auth.uid &&
        request.resource.data.items.size() > 0 &&
        request.resource.data.items.size() <= 10 &&
        request.resource.data.total >= calculateMinTotal() &&
        isValidPaymentMethod(request.resource.data.paymentMethod) &&
        // ... –µ—â–µ 20 —É—Å–ª–æ–≤–∏–π
    }
  }
  
  // ‚ùå –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:
  // 1. –ù–µ—Ç unit —Ç–µ—Å—Ç–æ–≤ –¥–ª—è –ø—Ä–∞–≤–∏–ª
  // 2. –°–ª–æ–∂–Ω–æ—Å—Ç—å –æ—Ç–ª–∞–¥–∫–∏
  // 3. –ù–µ—Ç —Ç–∏–ø–∏–∑–∞—Ü–∏–∏
  // 4. –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
}
```

**–†–µ—à–µ–Ω–∏–µ:**
```kotlin
// ‚úÖ –ü–∞—Ç—Ç–µ—Ä–Ω: Backend –¥–ª—è —Å–ª–æ–∂–Ω–æ–π –ª–æ–≥–∏–∫–∏ + Firebase –¥–ª—è –ø—Ä–æ—Å—Ç–æ–π
class HybridSecurityArchitecture {
    
    // 1. –ü—Ä–æ—Å—Ç–∞—è –ª–æ–≥–∏–∫–∞ –≤ Security Rules
    private val simpleRules = """
        match /users/{userId} {
            allow read, write: if request.auth.uid == userId;
        }
    """.trimIndent()
    
    // 2. –°–ª–æ–∂–Ω–∞—è –ª–æ–≥–∏–∫–∞ –≤ Cloud Functions
    @Function("validateOrder")
    fun validateOrder(data: Map<String, Any>, context: EventContext) {
        val order = data.toOrder()
        
        // –ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω–∞—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
        val validationResult = OrderValidator.validate(order)
        
        if (!validationResult.isValid) {
            throw FunctionsError("invalid_order", validationResult.errors)
        }
        
        // –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ, –∞–Ω–∞–ª–∏—Ç–∏–∫–∞, –Ω–æ—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
        Analytics.logOrderValidation(order)
        NotifyAdmin.orderCreated(order)
        
        // –¢–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∑–∞–ø–∏—Å—ã–≤–∞–µ–º –≤ Firestore
        return admin.firestore().collection("orders").add(order.toMap())
    }
    
    // 3. –ö–ª–∏–µ–Ω—Ç –≤—ã–∑—ã–≤–∞–µ—Ç Function, –∞ –Ω–µ –Ω–∞–ø—Ä—è–º—É—é Firestore
    suspend fun createOrder(order: Order) {
        val result = Firebase.functions
            .getHttpsCallable("validateOrder")
            .call(order.toMap())
        
        if (result.data != null) {
            // –£—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω–æ —á–µ—Ä–µ–∑ Function
        }
    }
}
```

---

## **7. –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∏ –æ—Ç–ª–∞–¥–∫–∏**

### **–û—Ç–ª–∞–¥–∫–∞ –≤ production:**
```kotlin
// –ü—Ä–æ–±–ª–µ–º—ã:
// 1. –ù–µ—Ç –¥–µ—Ç–∞–ª—å–Ω—ã—Ö –ª–æ–≥–æ–≤ –∑–∞–ø—Ä–æ—Å–æ–≤
// 2. –°–ª–æ–∂–Ω–æ –æ—Ç—Å–ª–µ–¥–∏—Ç—å performance bottlenecks
// 3. –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø–æ –æ–ø–µ—Ä–∞—Ü–∏—è–º
// 4. –ù–µ—Ç —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π

class MonitoringWorkaround {
    
    // ‚úÖ –ö–∞—Å—Ç–æ–º–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
    suspend fun <T> withFirestoreLogging(
        operation: String,
        block: suspend () -> T
    ): T {
        val traceId = UUID.randomUUID().toString()
        val startTime = System.currentTimeMillis()
        
        Log.d("Firestore", "[$traceId] START $operation")
        
        try {
            val result = block()
            val duration = System.currentTimeMillis() - startTime
            
            Log.d("Firestore", 
                "[$traceId] END $operation - ${duration}ms")
            
            // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –º–µ—Ç—Ä–∏–∫–∏
            FirebaseAnalytics.logEvent("firestore_operation", mapOf(
                "operation" to operation,
                "duration" to duration,
                "success" to true
            ))
            
            return result
            
        } catch (e: Exception) {
            Log.e("Firestore", "[$traceId] ERROR $operation", e)
            
            FirebaseAnalytics.logEvent("firestore_error", mapOf(
                "operation" to operation,
                "error" to e.message,
                "error_type" to e::class.simpleName
            ))
            
            throw e
        }
    }
    
    // –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
    suspend fun getUser(userId: String): User? {
        return withFirestoreLogging("getUser") {
            db.collection("users").document(userId).get()
                .toObject(User::class.java)
        }
    }
}
```

---

## **8. –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —ç–∫–æ—Å–∏—Å—Ç–µ–º—ã**

### **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å enterprise-—Å–∏—Å—Ç–µ–º–∞–º–∏:**
```kotlin
// –ü—Ä–æ–±–ª–µ–º—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏:
class EnterpriseIntegrationChallenges {
    
    // 1. –ù–µ—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–∏:
    // - SAP, Oracle, Salesforce
    // - –ö–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–µ SSO (SAML, LDAP)
    // - –°–∏—Å—Ç–µ–º—ã –æ—á–µ—Ä–µ–¥–µ–π —Å–æ–æ–±—â–µ–Ω–∏–π (Kafka, RabbitMQ)
    // - Data warehouses (Snowflake, Redshift)
    
    // 2. –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–µ –ø—Ä–æ—Ç–æ–∫–æ–ª—ã:
    // - –¢–æ–ª—å–∫–æ REST/GraphQL —á–µ—Ä–µ–∑ Functions
    // - –ù–µ—Ç WebSockets –¥–ª—è real-time –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π
    // - –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ gRPC
    
    // 3. Data governance:
    // - –°–ª–æ–∂–Ω–æ—Å—Ç–∏ —Å GDPR compliance
    // - –ù–µ—Ç built-in data lineage
    // - –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π audit trail
}
```

**–†–µ—à–µ–Ω–∏–µ:**
```kotlin
// ‚úÖ –ü–∞—Ç—Ç–µ—Ä–Ω: Firebase –∫–∞–∫ presentation layer
class EnterpriseFirebaseAdapter {
    
    // Firebase —Ç–æ–ª—å–∫–æ –¥–ª—è –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–π —á–∞—Å—Ç–∏
    // –ë—ç–∫–µ–Ω–¥ - enterprise —Å–∏—Å—Ç–µ–º—ã
    
    suspend fun syncEnterpriseData() {
        // 1. –ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ –∏–∑ enterprise —Å–∏—Å—Ç–µ–º
        val sapData = SAPClient.getOrders()
        val crmData = SalesforceClient.getCustomers()
        
        // 2. –¢—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∏—Ä—É–µ–º –¥–ª—è Firebase
        val firebaseData = transformForFirebase(sapData, crmData)
        
        // 3. –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ–º –≤ Firebase
        batchUpdateFirestore(firebaseData)
        
        // 4. –õ–æ–≥–∏—Ä—É–µ–º —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é
        auditLogSync(sapData.size, crmData.size)
    }
    
    // –û–±—Ä–∞—Ç–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è
    suspend fun syncToEnterprise(firebaseData: FirebaseData) {
        // –ò–∑ Firebase –≤ enterprise —Å–∏—Å—Ç–µ–º—ã
        SAPClient.updateOrders(firebaseData.toSapFormat())
        SalesforceClient.updateCustomers(firebaseData.toSalesforceFormat())
    }
}
```

---

## **9. –ì–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–µ –∏ compliance –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è**

### **Data residency –∏ sovereignty:**
```kotlin
// –ü—Ä–æ–±–ª–µ–º—ã:
class GeoComplianceIssues {
    
    // 1. –í—ã–±–æ—Ä —Ä–µ–≥–∏–æ–Ω–æ–≤ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω:
    // - us-central1 (Iowa)
    // - europe-west1 (Belgium)
    // - asia-northeast1 (Tokyo)
    // - –ù–µ—Ç –†–æ—Å—Å–∏–∏, –ö–∏—Ç–∞—è, –¥—Ä—É–≥–∏—Ö —Å—Ç—Ä–∞–Ω
    
    // 2. Compliance:
    // - GDPR: —Å–ª–æ–∂–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å "right to be forgotten"
    // - HIPAA: —Ç—Ä–µ–±—É–µ—Ç—Å—è Business Associate Agreement
    // - PCI DSS: –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞
    // - Local laws: –º–æ–≥—É—Ç —Ç—Ä–µ–±–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ —Å—Ç—Ä–∞–Ω–µ
    
    // 3. Latency –¥–ª—è –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π:
    // - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –≤ –ê–∑–∏–∏ ‚Üí –¥–∞–Ω–Ω—ã–µ –≤ –°–®–ê
    // - –í—ã—Å–æ–∫–∏–π ping –¥–ª—è real-time –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π
}
```

**Workaround:**
```kotlin
// ‚úÖ Multi-region —Å—Ç—Ä–∞—Ç–µ–≥–∏—è
class MultiRegionFirebaseSetup {
    
    // –†–∞–∑–Ω—ã–µ Firebase –ø—Ä–æ–µ–∫—Ç—ã –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ä–µ–≥–∏–æ–Ω–æ–≤
    enum class Region(val projectId: String) {
        EU("myapp-eu"),
        US("myapp-us"),
        ASIA("myapp-asia")
    }
    
    // –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä —Ä–µ–≥–∏–æ–Ω–∞
    fun getFirebaseForRegion(region: Region): FirebaseApp {
        return Firebase.apps.find { it.name == region.name }
            ?: Firebase.initializeApp(context, getOptions(region), region.name)
    }
    
    // –ì–µ–æ-—Ä–æ—É—Ç–∏–Ω–≥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
    fun getUserRegion(userLocation: Location): Region {
        return when {
            userLocation.isInEurope() -> Region.EU
            userLocation.isInAsia() -> Region.ASIA
            else -> Region.US
        }
    }
    
    // –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –º–µ–∂–¥—É —Ä–µ–≥–∏–æ–Ω–∞–º–∏
    suspend fun syncCrossRegion(userId: String) {
        val userData = getUserDataFromPrimaryRegion(userId)
        
        // –†–µ–ø–ª–∏–∫–∞—Ü–∏—è –≤–æ –≤—Å–µ —Ä–µ–≥–∏–æ–Ω—ã
        listOf(Region.EU, Region.US, Region.ASIA).forEach { region ->
            withContext(Dispatchers.IO) {
                saveUserDataToRegion(userData, region)
            }
        }
    }
}
```

---

## **10. –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ DevOps**

### **DevOps –∏ Infrastructure as Code:**
```yaml
# –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:
# 1. –ù–µ—Ç –ø–æ–ª–Ω–æ–≥–æ Infrastructure as Code
# 2. –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏–æ–Ω–∏–∑–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π
# 3. –°–ª–æ–∂–Ω–æ—Å—Ç–∏ —Å blue/green deployments
# 4. –ù–µ—Ç canary releases –¥–ª—è Firestore rules
# 5. –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ staging

# –ü—Ä–∏–º–µ—Ä –ø—Ä–æ–±–ª–µ–º—ã - –¥–µ–ø–ª–æ–π –ø—Ä–∞–≤–∏–ª:
# ‚ùå –ù–µ—Ç rollback –µ—Å–ª–∏ –ø—Ä–∞–≤–∏–ª–∞ —Å–ª–æ–º–∞—é—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
# ‚ùå –ù–µ—Ç A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–∞–≤–∏–ª
# ‚ùå –°–ª–æ–∂–Ω–æ –¥–µ–ª–∞—Ç—å –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω—ã–π rollout
```

**–†–µ—à–µ–Ω–∏–µ:**
```kotlin
// ‚úÖ –ü–∞—Ç—Ç–µ—Ä–Ω: GitOps –¥–ª—è Firebase
class FirebaseGitOps {
    
    // 1. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∫–∞–∫ –∫–æ–¥
    data class FirebaseConfig(
        val firestoreRules: String,
        val securityRules: String,
        val indexes: List<String>,
        val functions: Map<String, String>
    )
    
    // 2. –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º
    suspend fun validateConfig(config: FirebaseConfig): ValidationResult {
        // –õ–æ–∫–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤–∏–ª
        val rulesResult = FirebaseRulesValidator.validate(config.firestoreRules)
        
        // –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ staging –ø—Ä–æ–µ–∫—Ç–µ
        val stagingResult = testOnStaging(config)
        
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
        val compatibilityResult = checkBackwardCompatibility(config)
        
        return combineResults(rulesResult, stagingResult, compatibilityResult)
    }
    
    // 3. –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω—ã–π –¥–µ–ø–ª–æ–π
    suspend fun gradualDeploy(config: FirebaseConfig) {
        // –≠—Ç–∞–ø 1: 1% —Ç—Ä–∞—Ñ–∏–∫–∞
        deployToPercentage(config, percentage = 1)
        monitorForErrors(duration = Duration.minutes(15))
        
        // –≠—Ç–∞–ø 2: 10% —Ç—Ä–∞—Ñ–∏–∫–∞
        if (noErrorsDetected()) {
            deployToPercentage(config, percentage = 10)
            monitorForErrors(duration = Duration.minutes(30))
        }
        
        // –≠—Ç–∞–ø 3: 100% —Ç—Ä–∞—Ñ–∏–∫–∞
        if (noErrorsDetected()) {
            fullDeploy(config)
        } else {
            rollback()
        }
    }
    
    // 4. Rollback —Å—Ç—Ä–∞—Ç–µ–≥–∏—è
    suspend fun rollbackToVersion(version: String) {
        val previousConfig = loadConfigFromGit(version)
        emergencyDeploy(previousConfig)
        notifyTeam("Rollback to $version completed")
    }
}
```

---

## **–ò—Ç–æ–≥ –¥–ª—è Senior:**

### **–ö–æ–≥–¥–∞ –ù–ï –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Firebase:**
1. **–°–ª–æ–∂–Ω—ã–µ enterprise –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è** —Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π –º–Ω–æ–≥–∏—Ö —Å–∏—Å—Ç–µ–º
2. **–í—ã—Å–æ–∫–æ–Ω–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã** (> 1M –æ–ø–µ—Ä–∞—Ü–∏–π/—Å–µ–∫)
3. **–°—Ç—Ä–æ–≥–∏–µ compliance —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è** (GDPR, HIPAA, PCI DSS)
4. **–ù—É–∂–µ–Ω –ø–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å** –Ω–∞–¥ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π
5. **–ë—é–¥–∂–µ—Ç–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è** –ø—Ä–∏ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–∏

### **–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Firebase:**
1. **–ü—Ä–æ—Ç–æ—Ç–∏–ø—ã –∏ MVP** ‚Äî –±—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
2. **–ú–æ–±–∏–ª—å–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è** —Å real-time —Ñ—É–Ω–∫—Ü–∏—è–º–∏
3. **–°—Ç–∞—Ä—Ç–∞–ø—ã** –±–µ–∑ DevOps –∫–æ–º–∞–Ω–¥—ã
4. **–ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è** —Å predictable scaling

### **Architecture recommendations:**
```kotlin
// –ì–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–¥—Ö–æ–¥
class HybridArchitecture {
    // Firebase –¥–ª—è:
    // - –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
    // - Real-time updates
    // - Push notifications
    // - –ü—Ä–æ—Å—Ç–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞
    
    // –°–≤–æ–π –±—ç–∫–µ–Ω–¥ –¥–ª—è:
    // - –°–ª–æ–∂–Ω–∞—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
    // - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
    // - Batch processing
    // - Data warehousing
}

// –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏
object ArchitectureLayers {
    // Presentation Layer: Firebase
    // Business Logic Layer: Cloud Functions + Custom Backend
    // Data Layer: Firestore + PostgreSQL + Redis
    // Integration Layer: Enterprise systems
}
```

### **–ú–∏–≥—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è:**
```kotlin
// –ü–ª–∞–Ω –≤—ã—Ö–æ–¥–∞ –∏–∑ Firebase
class FirebaseExitStrategy {
    
    // 1. –ê–±—Å—Ç—Ä–∞–∫—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
    interface DataRepository {
        suspend fun getData(): Data
    }
    
    // 2. Firebase —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
    class FirebaseRepository : DataRepository {
        // ...
    }
    
    // 3. –ù–æ–≤–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
    class CustomRepository : DataRepository {
        // ...
    }
    
    // 4. Dual-write –≤ —Ç–µ—á–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏
    suspend fun migrateData() {
        val firebaseData = firebaseRepo.getAllData()
        customRepo.saveData(firebaseData)
        
        // –ß–∏—Ç–∞–µ–º –∏–∑ –æ–±–æ–∏—Ö, –ø–∏—à–µ–º –≤ –æ–±–∞
        // –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ –ø–µ—Ä–µ–Ω–æ—Å–∏–º —Ç—Ä–∞—Ñ–∏–∫
    }
}
```

**–ö–ª—é—á–µ–≤–æ–µ:** Firebase –æ—Ç–ª–∏—á–Ω–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –Ω–∞—á–∞–ª–∞, –Ω–æ –Ω—É–∂–Ω–æ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å exit strategy —Å —Å–∞–º–æ–≥–æ –Ω–∞—á–∞–ª–∞ –¥–ª—è enterprise-grade –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π.

  </details>

  <details>
  <summary> –ö–∞–∫ –æ–±–Ω–æ–≤–∏—Ç—å –Ω–æ–≤–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ Firebase –∏–∑ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ —Å—Ç–∞—Ä–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è? </summary>

  ## **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ Firebase SDK –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ (Senior Guide)**

---

## **1. –ê–Ω–∞–ª–∏–∑ —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è**

### **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ–∫—É—â–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π:**
```gradle
// 1. –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ç–µ–∫—É—â–∏–µ –≤–µ—Ä—Å–∏–∏
// build.gradle (app)
dependencies {
    implementation 'com.google.firebase:firebase-core:16.0.9'       // –£—Å—Ç–∞—Ä–µ–ª–æ
    implementation 'com.google.firebase:firebase-auth:17.0.0'       // –£—Å—Ç–∞—Ä–µ–ª–æ  
    implementation 'com.google.firebase:firebase-database:19.7.0'   // –°—Ç–∞—Ä–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ
    implementation 'com.google.firebase:firebase-messaging:20.3.0'  // –°—Ç–∞—Ä–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ
}
```

### **–ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö API:**
```kotlin
// 2. –ù–∞–π—Ç–∏ —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ –≤—ã–∑–æ–≤—ã –≤ –∫–æ–¥–µ
// ‚ùå –£—Å—Ç–∞—Ä–µ–≤—à–∏–µ API:
FirebaseInstanceId.getInstance().instanceId  // –£—Å—Ç–∞—Ä–µ–ª–æ –≤ 2020
FirebaseDatabase.getInstance().setPersistenceEnabled(true)  // –ò–∑–º–µ–Ω–µ–Ω–æ
FirebaseApp.initializeApp(this)  // –¢–µ–ø–µ—Ä—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
```

---

## **2. –ü–ª–∞–Ω –º–∏–≥—Ä–∞—Ü–∏–∏**

### **–≠—Ç–∞–ø 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–∞–±–æ—Ç—ã**
```bash
# –°–æ–∑–¥–∞—Ç—å –≤–µ—Ç–∫—É –¥–ª—è –º–∏–≥—Ä–∞—Ü–∏–∏
git checkout -b firebase-migration

# –°–æ–∑–¥–∞—Ç—å backup –ø—Ä–æ–µ–∫—Ç–∞
cp -r project/ project-backup-firebase/

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω—é—é –≤–µ—Ä—Å–∏—é Android Studio
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω—é—é –≤–µ—Ä—Å–∏—é Gradle
```

### **–≠—Ç–∞–ø 2: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ Gradle –∏ –ø–ª–∞–≥–∏–Ω–æ–≤**
```gradle
// project-level build.gradle
buildscript {
    repositories {
        google()
        mavenCentral()
    }
    dependencies {
        // –û–±–Ω–æ–≤–∏—Ç—å –¥–æ –ø–æ—Å–ª–µ–¥–Ω–µ–π —Å—Ç–∞–±–∏–ª—å–Ω–æ–π
        classpath 'com.android.tools.build:gradle:8.1.0'
        classpath 'com.google.gms:google-services:4.4.0'
        classpath 'com.google.firebase:firebase-crashlytics-gradle:2.9.9'
        classpath 'com.google.firebase:perf-plugin:1.4.2'
    }
}
```

---

## **3. –ú–∏–≥—Ä–∞—Ü–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π**

### **–°—Ç–∞—Ä–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (–¥–æ BoM):**
```gradle
// ‚ùå –£—Å—Ç–∞—Ä–µ–≤—à–∏–π —Å–ø–æ—Å–æ–± (—Ä–∞–∑–Ω—ã–µ –≤–µ—Ä—Å–∏–∏)
dependencies {
    implementation 'com.google.firebase:firebase-auth:21.0.0'
    implementation 'com.google.firebase:firebase-firestore:24.0.0'
    implementation 'com.google.firebase:firebase-storage:20.0.0'
    implementation 'com.google.firebase:firebase-messaging:23.0.0'
    // –ü—Ä–æ–±–ª–µ–º–∞: —Ä–∞–∑–Ω—ã–µ –≤–µ—Ä—Å–∏–∏, –≤–æ–∑–º–æ–∂–Ω—ã –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã
}
```

### **–ù–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (—Å BoM):**
```gradle
// ‚úÖ –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π —Å–ø–æ—Å–æ–± —Å Bill of Materials
dependencies {
    // Firebase BoM –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤–µ—Ä—Å–∏—è–º–∏
    implementation platform('com.google.firebase:firebase-bom:32.4.0')
    
    // –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –±–µ–∑ —É–∫–∞–∑–∞–Ω–∏—è –≤–µ—Ä—Å–∏–π
    implementation 'com.google.firebase:firebase-analytics'
    implementation 'com.google.firebase:firebase-auth'
    implementation 'com.google.firebase:firebase-firestore'
    implementation 'com.google.firebase:firebase-storage'
    implementation 'com.google.firebase:firebase-messaging'
    implementation 'com.google.firebase:firebase-crashlytics'
    implementation 'com.google.firebase:firebase-config'
    implementation 'com.google.firebase:firebase-perf'
    
    // Kotlin extensions (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ Kotlin)
    implementation 'com.google.firebase:firebase-firestore-ktx'
    implementation 'com.google.firebase:firebase-auth-ktx'
}
```

### **–¢–∞–±–ª–∏—Ü–∞ –º–∏–≥—Ä–∞—Ü–∏–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π:**
| –°—Ç–∞—Ä–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å | –ù–æ–≤–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å | –ü—Ä–∏–º–µ—á–∞–Ω–∏—è |
|-------------------|-------------------|------------|
| `firebase-database` | `firebase-database` –∏–ª–∏ `firebase-firestore` | Realtime DB –µ—â–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è |
| `firebase-ads` | `firebase-ads` | –ë–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π |
| `firebase-core` | –£–¥–∞–ª–∏—Ç—å | –ó–∞–º–µ–Ω–µ–Ω–æ –Ω–∞ firebase-analytics |
| `firebase-invites` | –£–¥–∞–ª–∏—Ç—å | –°–µ—Ä–≤–∏—Å –∑–∞–∫—Ä—ã—Ç |
| `firebase-dynamic-links` | `firebase-dynamic-links` | API –∏–∑–º–µ–Ω–∏–ª–æ—Å—å |

---

## **4. –ú–∏–≥—Ä–∞—Ü–∏—è –∫–æ–¥–∞**

### **–ú–∏–≥—Ä–∞—Ü–∏—è Instance ID ‚Üí Firebase Installations:**
```kotlin
// ‚ùå –£—Å—Ç–∞—Ä–µ–≤—à–∏–π —Å–ø–æ—Å–æ–± (–¥–æ 2020)
FirebaseInstanceId.getInstance().instanceId
    .addOnCompleteListener { task ->
        val token = task.result?.token
        // –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞
    }

// ‚úÖ –ù–æ–≤—ã–π —Å–ø–æ—Å–æ–± (2020+)
FirebaseInstallations.getInstance().id
    .addOnCompleteListener { task ->
        val installationId = task.result
        // –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ installationId
    }

// –î–ª—è FCM —Ç–æ–∫–µ–Ω–∞:
FirebaseMessaging.getInstance().token
    .addOnCompleteListener { task ->
        val fcmToken = task.result
        // –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ FCM —Ç–æ–∫–µ–Ω–∞
    }
```

### **–ú–∏–≥—Ä–∞—Ü–∏—è Firebase Database API:**
```kotlin
// ‚ùå –°—Ç–∞—Ä—ã–π API (–¥–æ Kotlin extensions)
val database = FirebaseDatabase.getInstance()
val ref = database.getReference("path")
ref.addValueEventListener(object : ValueEventListener {
    override fun onDataChange(snapshot: DataSnapshot) {
        // –û–±—Ä–∞–±–æ—Ç–∫–∞
    }
    override fun onCancelled(error: DatabaseError) {
        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–∫–∏
    }
})

// ‚úÖ –ù–æ–≤—ã–π API (—Å Kotlin extensions)
val ref = Firebase.database.reference.child("path")
ref.addValueEventListener { snapshot ->
    // –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö
    // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Ç–º–µ–Ω–∞ –ø—Ä–∏ –æ—à–∏–±–∫–µ
}
```

### **–ú–∏–≥—Ä–∞—Ü–∏—è Cloud Firestore:**
```kotlin
// ‚ùå –°—Ç–∞—Ä—ã–π API
val db = FirebaseFirestore.getInstance()
db.collection("users")
    .document(userId)
    .get()
    .addOnCompleteListener { task ->
        if (task.isSuccessful) {
            val user = task.result?.toObject(User::class.java)
        }
    }

// ‚úÖ –ù–æ–≤—ã–π API (—Å Kotlin extensions)
val user = Firebase.firestore
    .collection("users")
    .document(userId)
    .get()
    .await()
    .toObject(User::class.java)
```

---

## **5. –û–±—Ä–∞–±–æ—Ç–∫–∞ breaking changes**

### **Cloud Messaging breaking changes:**
```kotlin
// ‚ùå –£—Å—Ç–∞—Ä–µ–≤—à–∏–π FirebaseMessagingService
class MyFirebaseMessagingService : FirebaseMessagingService() {
    override fun onMessageReceived(remoteMessage: RemoteMessage) {
        // –¢—Ä–µ–±—É–µ—Ç Android 6.0+
    }
    
    override fun onNewToken(token: String) {
        // –í—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ —Ç–æ–∫–µ–Ω–∞
    }
}

// ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –Ω–æ–≤—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.O) {
    // –°–æ–∑–¥–∞–Ω–∏–µ notification channel –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ
    createNotificationChannel()
}

// ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
override fun onMessageReceived(remoteMessage: RemoteMessage) {
    // –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏:
    // 1. Data messages (–≤—Å–µ–≥–¥–∞ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è)
    // 2. Notification messages (—Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ –ø–µ—Ä–µ–¥–Ω–µ–º –ø–ª–∞–Ω–µ)
    
    remoteMessage.data.isNotEmpty().let { data ->
        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö
    }
    
    remoteMessage.notification?.let { notification ->
        // –ü–æ–∫–∞–∑ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
    }
}
```

### **Firebase Auth breaking changes:**
```kotlin
// ‚ùå –£—Å—Ç–∞—Ä–µ–≤—à–∏–µ –º–µ—Ç–æ–¥—ã
FirebaseAuth.getInstance()
    .signInWithEmailAndPassword(email, password)
    .addOnCompleteListener(this) { task ->
        // Deprecated: Activity context
    }

// ‚úÖ –ù–æ–≤—ã–µ –º–µ—Ç–æ–¥—ã —Å –±–µ–∑–æ–ø–∞—Å–Ω–æ–π –æ—Ç–º–µ–Ω–æ–π
val auth = Firebase.auth

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Lifecycle-aware –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
lifecycleScope.launch {
    try {
        val result = auth.signInWithEmailAndPassword(email, password).await()
        // –û–±—Ä–∞–±–æ—Ç–∫–∞ —É—Å–ø–µ—Ö–∞
    } catch (e: Exception) {
        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–∫–∏
    }
}

// ‚úÖ Safe API calls
suspend fun safeSignIn(email: String, password: String): AuthResult {
    return suspendCoroutine { continuation ->
        auth.signInWithEmailAndPassword(email, password)
            .addOnSuccessListener { continuation.resume(it) }
            .addOnFailureListener { continuation.resumeWithException(it) }
            .addOnCanceledListener { 
                continuation.resumeWithException(CancellationException())
            }
    }
}
```

---

## **6. –ú–∏–≥—Ä–∞—Ü–∏—è Crashlytics**

### **–ò–∑ Fabric/Firebase Crashlytics migration:**
```gradle
// –°—Ç–∞—Ä—ã–π Fabric Crashlytics:
implementation 'com.crashlytics.sdk.android:crashlytics:2.10.1'

// –ù–æ–≤—ã–π Firebase Crashlytics:
implementation 'com.google.firebase:firebase-crashlytics'
```

```kotlin
// ‚ùå –°—Ç–∞—Ä—ã–π Fabric API
Crashlytics.logException(e)
Crashlytics.setString("key", "value")

// ‚úÖ –ù–æ–≤—ã–π Firebase Crashlytics API
FirebaseCrashlytics.getInstance().recordException(e)
FirebaseCrashlytics.getInstance().setCustomKey("key", "value")

// ‚úÖ –ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
FirebaseCrashlytics.getInstance().apply {
    setCrashlyticsCollectionEnabled(true)  // –ö–æ–Ω—Ç—Ä–æ–ª—å —Å–±–æ—Ä–∞
    sendUnsentReports()  // –û—Ç–ø—Ä–∞–≤–∫–∞ –Ω–∞–∫–æ–ø–ª–µ–Ω–Ω—ã—Ö –æ—Ç—á–µ—Ç–æ–≤
    deleteUnsentReports()  // –£–¥–∞–ª–µ–Ω–∏–µ –æ—Ç—á–µ—Ç–æ–≤
    log("Custom log message")  // –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
}
```

---

## **7. –ú–∏–≥—Ä–∞—Ü–∏—è Performance Monitoring**

```kotlin
// ‚ùå –°—Ç–∞—Ä—ã–π API (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è)
val trace = FirebasePerformance.getInstance().newTrace("trace_name")
trace.start()

// ... –∫–æ–¥ ...

trace.stop()

// ‚úÖ –ù–æ–≤—ã–π API —Å —É–ª—É—á—à–µ–Ω–∏—è–º–∏
val trace = Firebase.performance.newTrace("trace_name").apply {
    incrementMetric("attempts", 1)
    putAttribute("user_type", "premium")
}

trace.start()

// ... –∫–æ–¥ ...

// –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –∞—Ç—Ä–∏–±—É—Ç–æ–≤ –≤–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
trace.putAttribute("result", "success")
trace.incrementMetric("items_processed", items.size)

trace.stop()
```

---

## **8. –†–∞–±–æ—Ç–∞ —Å Dynamic Links**

```kotlin
// ‚ùå –°—Ç–∞—Ä—ã–π API
FirebaseDynamicLinks.getInstance()
    .getDynamicLink(intent)
    .addOnSuccessListener { pendingDynamicLinkData ->
        val deepLink = pendingDynamicLinkData?.link
    }

// ‚úÖ –ù–æ–≤—ã–π API —Å —É–ª—É—á—à–µ–Ω–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–æ–π
Firebase.dynamicLinks
    .getDynamicLink(intent)
    .addOnSuccessListener { pendingDynamicLinkData ->
        pendingDynamicLinkData?.let { linkData ->
            // –£–ª—É—á—à–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
            val deepLink = linkData.link
            val minAppVersion = linkData.minimumAppVersion
            val utmParameters = linkData.utmParameters
            
            // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤ Play Store
            if (linkData.updateAppIntent != null) {
                startActivity(linkData.updateAppIntent)
            }
        }
    }
```

---

## **9. –°—Ç—Ä–∞—Ç–µ–≥–∏—è –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ–π –º–∏–≥—Ä–∞—Ü–∏–∏**

### **–ü–∞—Ç—Ç–µ—Ä–Ω: Feature Flags –¥–ª—è –º–∏–≥—Ä–∞—Ü–∏–∏**
```kotlin
object MigrationFlags {
    // –ö–æ–Ω—Ç—Ä–æ–ª—å –º–∏–≥—Ä–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ Remote Config
    private const val USE_NEW_FIREBASE_API = "use_new_firebase_api"
    private const val USE_BOM_VERSIONING = "use_bom_versioning"
    
    suspend fun isMigrationEnabled(feature: String): Boolean {
        val remoteConfig = FirebaseRemoteConfig.getInstance()
        remoteConfig.fetchAndActivate().await()
        return remoteConfig.getBoolean(feature)
    }
}

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ñ–ª–∞–≥–æ–≤
class FirebaseMigrationManager {
    
    suspend fun getDatabase(): Any {
        return if (MigrationFlags.isMigrationEnabled("use_new_firebase_api")) {
            // –ù–æ–≤—ã–π API
            Firebase.firestore
        } else {
            // –°—Ç–∞—Ä—ã–π API
            FirebaseFirestore.getInstance()
        }
    }
    
    fun getAuth(): FirebaseAuth {
        return if (BuildConfig.USE_NEW_AUTH_API) {
            Firebase.auth
        } else {
            FirebaseAuth.getInstance()
        }
    }
}
```

### **–ü–∞—Ç—Ç–µ—Ä–Ω: Adapter –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏**
```kotlin
interface FirebaseAuthAdapter {
    suspend fun signIn(email: String, password: String): User
    suspend fun signOut()
    fun getCurrentUser(): User?
}

// –°—Ç–∞—Ä–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
class LegacyFirebaseAuthAdapter : FirebaseAuthAdapter {
    private val auth = FirebaseAuth.getInstance()
    
    override suspend fun signIn(email: String, password: String): User {
        return suspendCoroutine { continuation ->
            auth.signInWithEmailAndPassword(email, password)
                .addOnSuccessListener { result ->
                    continuation.resume(result.user?.toDomainUser()!!)
                }
                .addOnFailureListener { continuation.resumeWithException(it) }
        }
    }
}

// –ù–æ–≤–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è  
class ModernFirebaseAuthAdapter : FirebaseAuthAdapter {
    private val auth = Firebase.auth
    
    override suspend fun signIn(email: String, password: String): User {
        val result = auth.signInWithEmailAndPassword(email, password).await()
        return result.user?.toDomainUser()!!
    }
}

// –§–∞–±—Ä–∏–∫–∞ –≤—ã–±–∏—Ä–∞–µ—Ç —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é
object FirebaseAdapterFactory {
    fun createAuthAdapter(): FirebaseAuthAdapter {
        return if (isNewFirebaseEnabled()) {
            ModernFirebaseAuthAdapter()
        } else {
            LegacyFirebaseAuthAdapter()
        }
    }
}
```

---

## **10. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏**

### **Unit —Ç–µ—Å—Ç—ã –¥–ª—è –º–∏–≥—Ä–∞—Ü–∏–∏:**
```kotlin
@Test
fun testFirebaseAuthMigration() {
    // –¢–µ—Å—Ç–∏—Ä—É–µ–º —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å API
    val oldAuth = FirebaseAuth.getInstance()
    val newAuth = Firebase.auth
    
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –æ–±–∞ API —Ä–∞–±–æ—Ç–∞—é—Ç
    assertNotNull(oldAuth)
    assertNotNull(newAuth)
    
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º —ç–∫–≤–∏–≤–∞–ª–µ–Ω—Ç–Ω–æ—Å—Ç—å
    assertEquals(oldAuth.currentUser?.uid, newAuth.currentUser?.uid)
}

@Test
fun testFirestoreDataCompatibility() {
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –¥–∞–Ω–Ω—ã–µ —á–∏—Ç–∞—é—Ç—Å—è –æ–±–æ–∏–º–∏ API
    val oldDb = FirebaseFirestore.getInstance()
    val newDb = Firebase.firestore
    
    // –ß–∏—Ç–∞–µ–º –æ–¥–Ω–∏ –∏ —Ç–µ –∂–µ –¥–∞–Ω–Ω—ã–µ
    val oldData = oldDb.collection("test").document("1").get().await()
    val newData = newDb.collection("test").document("1").get().await()
    
    assertEquals(oldData.data, newData.data)
}
```

### **Integration —Ç–µ—Å—Ç—ã:**
```kotlin
@RunWith(AndroidJUnit4::class)
class FirebaseMigrationIntegrationTest {
    
    @get:Rule
    val activityRule = ActivityTestRule(MainActivity::class.java)
    
    @Test
    fun testCompleteMigrationScenario() {
        // 1. –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ä—ã–π API
        onView(withId(R.id.old_login_button)).perform(click())
        
        // 2. –ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º –Ω–∞ –Ω–æ–≤—ã–π API
        TestMigrationFlags.enableNewFirebaseAPI()
        
        // 3. –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–æ–≤—ã–π API
        onView(withId(R.id.new_login_button)).perform(click())
        
        // 4. –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω–∏–ª–∏—Å—å
        onView(withId(R.id.user_data))
            .check(matches(withText(containsString("test@example.com"))))
    }
}
```

### **Performance —Ç–µ—Å—Ç—ã:**
```kotlin
@RunWith(AndroidJUnit4::class)
class FirebaseMigrationPerformanceTest {
    
    @Test
    fun testNewApiPerformance() {
        val metrics = ArrayList<Long>()
        
        repeat(100) {
            val startTime = System.nanoTime()
            
            // –¢–µ—Å—Ç–∏—Ä—É–µ–º –Ω–æ–≤—ã–π API
            Firebase.auth.signInWithEmailAndPassword("test", "pass").await()
            
            val duration = System.nanoTime() - startTime
            metrics.add(duration)
        }
        
        val avg = metrics.average() / 1_000_000.0
        assertTrue("New API too slow: ${avg}ms", avg < 100.0)
    }
}
```

---

## **11. –î–µ–ø–ª–æ–π –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –º–∏–≥—Ä–∞—Ü–∏–∏**

### **–ü–æ—ç—Ç–∞–ø–Ω—ã–π rollout:**
```kotlin
// –≠—Ç–∞–ø 1: 1% –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
object MigrationRollout {
    
    private val rolloutPercentage = mapOf(
        "firebase_auth_new" to 1,
        "firestore_new_api" to 1,
        "crashlytics_new" to 5,
        "complete_migration" to 0
    )
    
    fun shouldUserGetNewFirebase(userId: String): Boolean {
        val hash = userId.hashCode() % 100
        return hash < rolloutPercentage["firebase_auth_new"]!!
    }
}
```

### **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –º–∏–≥—Ä–∞—Ü–∏–∏:**
```kotlin
class MigrationMonitor {
    
    fun trackMigrationEvent(event: String, success: Boolean) {
        FirebaseAnalytics.getInstance(context).logEvent(
            "firebase_migration",
            Bundle().apply {
                putString("event", event)
                putBoolean("success", success)
                putString("sdk_version", FirebaseApp.getInstance().options.applicationId)
                putString("app_version", BuildConfig.VERSION_NAME)
            }
        )
        
        // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –≤ Crashlytics –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –æ—à–∏–±–æ–∫
        if (!success) {
            FirebaseCrashlytics.getInstance().log("Migration failed: $event")
        }
    }
    
    fun comparePerformanceMetrics() {
        // –°—Ä–∞–≤–Ω–∏–≤–∞–µ–º –º–µ—Ç—Ä–∏–∫–∏ —Å—Ç–∞—Ä–æ–≥–æ –∏ –Ω–æ–≤–æ–≥–æ API
        val oldLatency = getMetric("auth_latency_old")
        val newLatency = getMetric("auth_latency_new")
        
        val improvement = (oldLatency - newLatency) / oldLatency * 100
        log.info("Performance improvement: ${improvement}%")
    }
}
```

---

## **12. Rollback —Å—Ç—Ä–∞—Ç–µ–≥–∏—è**

```kotlin
object RollbackManager {
    
    // –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –æ—Ç–∫–∞—Ç–∞
    private val rollbackConfig = mapOf(
        "firebase_dependencies" to """
            implementation 'com.google.firebase:firebase-auth:21.0.0'
            implementation 'com.google.firebase:firebase-firestore:24.0.0'
        """.trimIndent(),
        "gradle_plugin" to "classpath 'com.google.gms:google-services:4.3.10'"
    )
    
    fun prepareRollback() {
        // 1. Backup —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è
        createGitBranch("rollback-backup-${System.currentTimeMillis()}")
        
        // 2. –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å —Å—Ç–∞—Ä—ã–µ –≤–µ—Ä—Å–∏–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
        writeRollbackDependencies()
        
        // 3. –°–æ–∑–¥–∞—Ç—å patch –¥–ª—è –æ—Ç–∫–∞—Ç–∞ –∫–æ–¥–∞
        createCodeRollbackPatch()
    }
    
    fun executeRollback() {
        // 1. –í–µ—Ä–Ω—É—Ç—å —Å—Ç–∞—Ä—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
        restoreGradleFiles()
        
        // 2. –í–µ—Ä–Ω—É—Ç—å —Å—Ç–∞—Ä—ã–π –∫–æ–¥
        applyRollbackPatch()
        
        // 3. –û—á–∏—Å—Ç–∏—Ç—å –∫—ç—à Gradle
        cleanGradleCache()
        
        // 4. –£–≤–µ–¥–æ–º–∏—Ç—å –∫–æ–º–∞–Ω–¥—É
        sendRollbackNotification()
    }
}
```

---

## **–ò—Ç–æ–≥ –¥–ª—è Senior:**

### **–ö–ª—é—á–µ–≤—ã–µ —à–∞–≥–∏ –º–∏–≥—Ä–∞—Ü–∏–∏:**
1. **–ê–Ω–∞–ª–∏–∑** —Ç–µ–∫—É—â–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –∏ API
2. **–ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ** –ø–æ—ç—Ç–∞–ø–Ω–æ–π –º–∏–≥—Ä–∞—Ü–∏–∏
3. **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ** Gradle –∏ –ø–ª–∞–≥–∏–Ω–æ–≤
4. **–ú–∏–≥—Ä–∞—Ü–∏—è** –Ω–∞ BoM –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤–µ—Ä—Å–∏—è–º–∏
5. **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ** —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö API –≤—ã–∑–æ–≤–æ–≤
6. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** –Ω–∞ –≤—Å–µ—Ö —É—Ä–æ–≤–Ω—è—Ö
7. **–ü–æ—Å—Ç–µ–ø–µ–Ω–Ω—ã–π rollout** —Å feature flags
8. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏ –æ—à–∏–±–æ–∫
9. **–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞** rollback —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏

### **–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Ç–æ—á–∫–∏:**
- **Instance ID ‚Üí Firebase Installations** ‚Äî breaking change
- **Fabric Crashlytics ‚Üí Firebase Crashlytics** ‚Äî –º–µ–Ω—è–µ—Ç—Å—è API
- **–°—Ç–∞—Ä—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è –ø–∞–∫–µ—Ç–æ–≤** (firebase-database ‚Üí firebase-firestore)
- **Kotlin extensions** ‚Äî –Ω–æ–≤—ã–π, –±–æ–ª–µ–µ –±–µ–∑–æ–ø–∞—Å–Ω—ã–π API

### **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
1. **–ù–µ –º–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –≤—Å—ë —Å—Ä–∞–∑—É** ‚Äî –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å feature flags
2. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö** ‚Äî —ç–º—É–ª—è—Ç–æ—Ä—ã –º–æ–≥—É—Ç –Ω–µ –ø–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ—Ö –ø—Ä–æ–±–ª–µ–º
3. **–ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å Crashlytics** –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ —ç—Ç–∞–ø–∞ –º–∏–≥—Ä–∞—Ü–∏–∏
4. **–ò–º–µ—Ç—å backup** –Ω–∞ –∫–∞–∂–¥–æ–º —ç—Ç–∞–ø–µ
5. **–ö–æ–º–º—É–Ω–∏—Ü–∏—Ä–æ–≤–∞—Ç—å —Å –∫–æ–º–∞–Ω–¥–æ–π** ‚Äî –º–∏–≥—Ä–∞—Ü–∏—è –≤–ª–∏—è–µ—Ç –Ω–∞ –≤—Å–µ—Ö —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤

### **–ú–µ—Ç—Ä–∏–∫–∏ —É—Å–ø–µ—Ö–∞:**
- ‚úÖ –ù–µ—Ç —Ä–µ–≥—Ä–µ—Å—Å–∏–∏ –≤ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- ‚úÖ –°–Ω–∏–∂–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∫—Ä–∞—à–µ–π
- ‚úÖ –£–ª—É—á—à–µ–Ω–∏–µ developer experience
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–æ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π Firebase
- ‚úÖ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ª–µ–≥–∫–æ –æ–±–Ω–æ–≤–ª—è—Ç—å—Å—è –≤ –±—É–¥—É—â–µ–º

  </details>

   <details>
  <summary> –ö–ö–∞–∫ –ø–æ–¥–∫–ª—é—á–∏—Ç—å App Distribution? </summary>

  </details>

  </details>
  
</details>

-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
**–†–∞–Ω–µ–µ**

- []()
- 
**–î–∞–ª–µ–µ**
- []()
