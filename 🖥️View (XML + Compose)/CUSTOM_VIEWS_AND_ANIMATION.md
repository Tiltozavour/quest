
# Custom views and animation

<details> 
  <summary> <h2> üåø Middle </h2> </summary>

  <details>
  <summary> –†–∞—Å—Å–∫–∞–∂–∏—Ç–µ –ø—Ä–æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é —Åustom View –∏ custom ViewGroup. –ù–∞–∑–æ–≤–∏—Ç–µ –æ—Ç–ª–∏—á–∏—è –≤ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è—Ö.  </summary> 

  **Custom View:**
1. **–°–æ–∑–¥–∞–Ω–∏–µ:** –ù–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –æ—Ç `View` –∏–ª–∏ –µ–≥–æ –ø–æ–¥–∫–ª–∞—Å—Å–æ–≤ (`TextView`, `ImageView`).
2. **–û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã:**
   - `onDraw(canvas: Canvas)` ‚Äì –æ—Ç—Ä–∏—Å–æ–≤–∫–∞ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ.
   - `onMeasure(widthMeasureSpec, heightMeasureSpec)` ‚Äì –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–æ–≤.
3. **–ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è:** –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –≥—Ä–∞—Ñ–∏–∫–∏, –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∫–∞—Å–∞–Ω–∏–π (–ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏).
4. **–ê–Ω–∏–º–∞—Ü–∏–∏:** –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `ValueAnimator`, `ObjectAnimator` –∏–ª–∏ `ViewPropertyAnimator`.

**Custom ViewGroup:**
1. **–°–æ–∑–¥–∞–Ω–∏–µ:** –ù–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –æ—Ç `ViewGroup` (`LinearLayout`, `RelativeLayout`).
2. **–û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã:**
   - `onMeasure(widthMeasureSpec, heightMeasureSpec)` ‚Äì –∏–∑–º–µ—Ä–µ–Ω–∏–µ —Å–≤–æ–∏—Ö —Ä–∞–∑–º–µ—Ä–æ–≤ –∏ —Ä–∞–∑–º–µ—Ä–æ–≤ –¥–æ—á–µ—Ä–Ω–∏—Ö View.
   - `onLayout(changed: Boolean, l, t, r, b)` ‚Äì —Ä–∞—Å—Å—Ç–∞–Ω–æ–≤–∫–∞ –¥–æ—á–µ—Ä–Ω–∏—Ö View.
3. **–ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è:** –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø—Ä–∞–≤–∏–ª —Ä–∞–∑–º–µ—â–µ–Ω–∏—è –¥–æ—á–µ—Ä–Ω–∏—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤.
4. **–ê–Ω–∏–º–∞—Ü–∏–∏:** –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ View + –∞–Ω–∏–º–∞—Ü–∏–∏ –∫–æ–º–ø–æ–Ω–æ–≤–∫–∏ (–ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ `layoutParams`).

**–ö–ª—é—á–µ–≤—ã–µ –æ—Ç–ª–∏—á–∏—è:**
1. **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** 
   - **View** ‚Äì –æ—Ç—Ä–∏—Å–æ–≤–∫–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞.
   - **ViewGroup** ‚Äì –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –¥—Ä—É–≥–∏—Ö View, —É–ø—Ä–∞–≤–ª—è–µ—Ç –∏—Ö —Ä–∞–∑–º–µ—Ä–∞–º–∏ –∏ –ø–æ–∑–∏—Ü–∏—è–º–∏.
2. **–ò–∑–º–µ—Ä–µ–Ω–∏–µ –∏ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:**
   - **View** –∏–∑–º–µ—Ä—è–µ—Ç —Å–µ–±—è (–∏–Ω–æ–≥–¥–∞ —É—á–∏—Ç—ã–≤–∞–µ—Ç `padding`).
   - **ViewGroup** –∏–∑–º–µ—Ä—è–µ—Ç —Å–µ–±—è **–∏ –≤—Å–µ—Ö –¥–æ—á–µ—Ä–Ω–∏—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤**, –∑–∞—Ç–µ–º —Ä–∞–∑–º–µ—â–∞–µ—Ç –∏—Ö.
3. **–ú–µ—Ç–æ–¥—ã:** 
   - **View** –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç `onDraw()`.
   - **ViewGroup** –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç `onMeasure()` –∏ `onLayout()`.
4. **–°–ª–æ–∂–Ω–æ—Å—Ç—å:** 
   - **View** –æ–±—ã—á–Ω–æ –ø—Ä–æ—â–µ.
   - **ViewGroup** —Å–ª–æ–∂–Ω–µ–µ –∏–∑-–∑–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã —Å –¥–æ—á–µ—Ä–Ω–∏–º–∏ —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏.

**–í—ã–≤–æ–¥:** Custom View —Ä–∏—Å—É–µ—Ç —Å–µ–±—è, custom ViewGroup —É–ø—Ä–∞–≤–ª—è–µ—Ç –¥—Ä—É–≥–∏–º–∏ View.

  </details>


   <details>
  <summary>  –ö–∞–∫ –∏–∑–±–µ–∂–∞—Ç—å –¥–≤–æ–π–Ω–æ–≥–æ LinearLayout –ø—Ä–∏ inflate? </summary>

  **–ö–∞–∫ –∏–∑–±–µ–∂–∞—Ç—å –¥–≤–æ–π–Ω–æ–≥–æ `LinearLayout` –ø—Ä–∏ inflate:**

**–ü—Ä–æ–±–ª–µ–º–∞:**
```kotlin
// –í custom ViewGroup, –Ω–∞—Å–ª–µ–¥—É—é—â–µ–º—Å—è –æ—Ç LinearLayout
inflater.inflate(R.layout.my_layout, this, true)
```
–ö–æ—Ä–Ω–µ–≤–æ–π —Ç–µ–≥ –≤ XML ‚Äî `<LinearLayout>`. –ü–æ–ª—É—á–∞–µ—Ç—Å—è `LinearLayout` –≤–Ω—É—Ç—Ä–∏ `LinearLayout`.

**–†–µ—à–µ–Ω–∏–µ 1 (–ø—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª—å–Ω–æ–µ):**
```kotlin
inflater.inflate(R.layout.my_layout, this)
```
–í—Ç–æ—Ä–æ–π –ø–∞—Ä–∞–º–µ—Ç—Ä ‚Äî –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä, –Ω–æ `attachToRoot = false`. View –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤ `this` –ø–æ–∑–∂–µ.

**–†–µ—à–µ–Ω–∏–µ 2 (–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å merge –≤ XML):**
```xml
<!-- R.layout.my_layout -->
<merge xmlns:android="...">
    <!-- –î–æ—á–µ—Ä–Ω–∏–µ View -->
    <TextView ... />
</merge>
```
–¢–µ–≥ `<merge>` —É–±–∏—Ä–∞–µ—Ç—Å—è –ø—Ä–∏ inflate, –¥–æ—á–µ—Ä–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç—ã –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä.

**–†–µ—à–µ–Ω–∏–µ 3 (–ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ View):**
```kotlin
// –í–º–µ—Å—Ç–æ inflate —Å–æ–∑–¥–∞–µ–º View –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ
addView(TextView(context).apply { ... })
```
–ù–æ —Ç–µ—Ä—è—é—Ç—Å—è –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ XML.

**–õ—É—á—à–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞:**
1. –ï—Å–ª–∏ custom ViewGroup –Ω–∞—Å–ª–µ–¥—É–µ—Ç—Å—è –æ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ Layout, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ **`merge`** –≤ XML + `inflate(..., this)`.
2. –ï—Å–ª–∏ ViewGroup —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `inflate(..., this, false)` + `addView()` –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏.

**–ü—Ä–∏–º–µ—Ä —Å `merge`:**
```kotlin
// –í –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–µ custom LinearLayout
LayoutInflater.from(context).inflate(R.layout.my_merge_layout, this, true)
```
–î–æ—á–µ—Ä–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç—ã –∏–∑ XML —Å—Ç–∞–Ω—É—Ç –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ –¥–µ—Ç—å–º–∏ `this`.

  </details>

  <details>
  <summary> –º–µ—Ç–æ–¥—ã onMeasure() onLayout() onDraw() –∫–æ–≥–¥–∞ –≤—ã–∑—ã–≤–∞—é—Ç—Å—è –∏ –¥–ª—è —á–µ–≥–æ –Ω—É–∂–Ω—ã?  </summary> 

  **onMeasure()**  
**–ö–æ–≥–¥–∞:** –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ä–∞–∑–º–µ—Ä–æ–≤ View/ViewGroup –∏–ª–∏ –ø—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ `requestLayout()`.  
**–ó–∞—á–µ–º:** –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Å–≤–æ–∏ —Ä–∞–∑–º–µ—Ä—ã (–∏ —Ä–∞–∑–º–µ—Ä—ã –¥–æ—á–µ—Ä–Ω–∏—Ö View –¥–ª—è ViewGroup). –†–µ–∑—É–ª—å—Ç–∞—Ç ‚Äî –≤ `setMeasuredDimension(width, height)`.  
**–í—ã–∑—ã–≤–∞–µ—Ç:** —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∞—è ViewGroup (—á–µ—Ä–µ–∑ `measure()`).

**onLayout()**  
**–ö–æ–≥–¥–∞:** –ü–æ—Å–ª–µ `onMeasure()`, –∫–æ–≥–¥–∞ —Ä–∞–∑–º–µ—Ä—ã –∏–∑–≤–µ—Å—Ç–Ω—ã.  
**–ó–∞—á–µ–º:** –†–∞–∑–º–µ—Å—Ç–∏—Ç—å –¥–æ—á–µ—Ä–Ω–∏–µ View (–¥–ª—è ViewGroup) ‚Äî –∑–∞–¥–∞—Ç—å –∏—Ö –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã —á–µ—Ä–µ–∑ `child.layout(l, t, r, b)`. –î–ª—è –æ–±—ã—á–Ω–æ–π View –º–µ—Ç–æ–¥ –ø—É—Å—Ç–æ–π.  
**–í—ã–∑—ã–≤–∞–µ—Ç:** —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∞—è ViewGroup (—á–µ—Ä–µ–∑ `layout()`).

**onDraw()**  
**–ö–æ–≥–¥–∞:** –ü–æ—Å–ª–µ `onLayout()` –∏–ª–∏ –ø—Ä–∏ –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏–∏ (`invalidate()`).  
**–ó–∞—á–µ–º:** –ù–∞—Ä–∏—Å–æ–≤–∞—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ View (—á–µ—Ä–µ–∑ Canvas). –ù–µ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è —É ViewGroup, –µ—Å–ª–∏ —É –Ω–µ—ë –Ω–µ—Ç —Ñ–æ–Ω–∞ –∏–ª–∏ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞.  
**–í—ã–∑—ã–≤–∞–µ—Ç:** —Å–∏—Å—Ç–µ–º–∞ (—á–µ—Ä–µ–∑ `dispatchDraw()`).

**–ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤—ã–∑–æ–≤–æ–≤ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ View:**  
`onMeasure()` ‚Üí `onLayout()` ‚Üí `onDraw()`

**–ö–ª—é—á–µ–≤–æ–µ:**  
- **ViewGroup:** —Ä–µ–∞–ª–∏–∑—É–µ—Ç `onMeasure()` + `onLayout()` –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–µ—Ç—å–º–∏.  
- **View:** —á–∞—Å—Ç–æ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç `onDraw()` –¥–ª—è –∫–∞—Å—Ç–æ–º–Ω–æ–π –æ—Ç—Ä–∏—Å–æ–≤–∫–∏.  
- `onMeasure()` –∏ `onLayout()` –º–æ–≥—É—Ç –≤—ã–∑—ã–≤–∞—Ç—å—Å—è –º–Ω–æ–≥–æ–∫—Ä–∞—Ç–Ω–æ, `onDraw()` ‚Äî –ø—Ä–∏ –∫–∞–∂–¥–æ–π –ø–µ—Ä–µ—Ä–∏—Å–æ–≤–∫–µ.

  </details>


  <details>
  <summary> –ö–æ–≥–¥–∞ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –∏ —á—Ç–æ —Å–ª–µ–¥—É–µ—Ç –¥–µ–ª–∞—Ç—å –≤ –º–µ—Ç–æ–¥–µ onSizeChanged()?  </summary> 

  **onSizeChanged(int w, int h, int oldw, int oldh)**  

**–ö–æ–≥–¥–∞ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è:**  
- –ü—Ä–∏ **–ø–µ—Ä–≤–æ–º –ø—Ä–∏—Å–≤–æ–µ–Ω–∏–∏ —Ä–∞–∑–º–µ—Ä–æ–≤** View –ø–æ—Å–ª–µ `onMeasure()`/`onLayout()`.  
- –ü—Ä–∏ **–∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ä–∞–∑–º–µ—Ä–æ–≤** View (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∏–∑-–∑–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è layout, –ø–æ–≤–æ—Ä–æ—Ç–∞ —ç–∫—Ä–∞–Ω–∞, –∞–Ω–∏–º–∞—Ü–∏–∏ resize).  
- –í—ã–∑—ã–≤–∞–µ—Ç—Å—è **–¥–æ** `onDraw()`, –µ—Å–ª–∏ —Ä–∞–∑–º–µ—Ä—ã –∏–∑–º–µ–Ω–∏–ª–∏—Å—å.  

**–ß—Ç–æ —Å–ª–µ–¥—É–µ—Ç –¥–µ–ª–∞—Ç—å:**  
1. **–ü–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞—Ç—å –∑–∞–≤–∏—Å—è—â–∏–µ –æ—Ç —Ä–∞–∑–º–µ—Ä–æ–≤ –∑–Ω–∞—á–µ–Ω–∏—è** (—Ä–∞–¥–∏—É—Å—ã, –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã, –º–∞—Ç—Ä–∏—Ü—ã).  
2. **–û–±–Ω–æ–≤–ª—è—Ç—å –ø—É—Ç–∏ (Path) –∏–ª–∏ —à–µ–π–ø—ã** –¥–ª—è –∫–∞—Å—Ç–æ–º–Ω–æ–π –æ—Ç—Ä–∏—Å–æ–≤–∫–∏.  
3. **–ü–µ—Ä–µ–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –≥—Ä–∞–¥–∏–µ–Ω—Ç—ã/–±–∏—Ç–º–∞–ø—ã**, –µ—Å–ª–∏ –æ–Ω–∏ –∑–∞–≤–∏—Å—è—Ç –æ—Ç —Ä–∞–∑–º–µ—Ä–æ–≤.  
4. **–ó–∞–ø—É—Å–∫–∞—Ç—å/–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∞–Ω–∏–º–∞—Ü–∏–∏**, –ø—Ä–∏–≤—è–∑–∞–Ω–Ω—ã–µ –∫ —Ä–∞–∑–º–µ—Ä–∞–º.  

**–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**  
```kotlin
override fun onSizeChanged(w: Int, h: Int, oldw: Int, oldh: Int) {
    super.onSizeChanged(w, h, oldw, oldh)
    // –ü–µ—Ä–µ—Å—á–µ—Ç —Ü–µ–Ω—Ç—Ä–∞ –¥–ª—è –∫—Ä—É–≥–∞
    centerX = w / 2f
    centerY = h / 2f
    radius = min(w, h) / 3f
    
    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ Path
    rectPath.reset()
    rectPath.addRect(0f, 0f, w.toFloat(), h.toFloat(), Path.Direction.CW)
    
    // –°–æ–∑–¥–∞–Ω–∏–µ –≥—Ä–∞–¥–∏–µ–Ω—Ç–∞ –ø–æ–¥ –Ω–æ–≤—ã–µ —Ä–∞–∑–º–µ—Ä—ã
    gradient = LinearGradient(0f, 0f, w.toFloat(), 0f, colors, null, Shader.TileMode.CLAMP)
}
```

**–í–∞–∂–Ω–æ:**  
- –ù–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `onSizeChanged()` –¥–ª—è **–∏–∑–º–µ–Ω–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–æ–≤** (—ç—Ç–æ –≤—ã–∑–æ–≤–µ—Ç –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π —Ü–∏–∫–ª).  
- –î–ª—è –ø–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–æ–π –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ —Ä–∞–∑–º–µ—Ä–æ–≤ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `onSizeChanged()`, –∞ –Ω–µ `onMeasure()`.  
- –ü—Ä–∏ –ø–æ–≤–æ—Ä–æ—Ç–µ —ç–∫—Ä–∞–Ω–∞ –≤—ã–∑–æ–≤–µ—Ç—Å—è –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ (—Å—Ç–∞—Ä—ã–µ —Ä–∞–∑–º–µ—Ä—ã ‚â† –Ω–æ–≤—ã–µ).

  </details> 

  
  <details>
  <summary> –ö–∞–∫ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞—Ç—å View –≤–Ω—É—Ç—Ä–∏ FrameLayout? –ü–æ—á–µ–º—É –≤–∞—Ä–∏–∞–Ω—Ç —Å –∏–∑–º–µ–Ω–µ–Ω–∏–µ–º margin –ø–ª–æ—Ö?  </summary> 

  **–ü–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ View –≤–æ FrameLayout:**

1. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `layout_gravity`:**  
   –í—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ View –≤–Ω—É—Ç—Ä–∏ FrameLayout (top, bottom, left, right, center –∏ –∏—Ö –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏).

2. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –æ—Ç—Å—Ç—É–ø–æ–≤ —á–µ—Ä–µ–∑ `layout_margin`:**  
   –û—Ç—Å—Ç—É–ø—ã –æ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö –≥—Ä–∞–Ω–∏—Ü –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞.

3. **–ü—Ä–æ–≥—Ä–∞–º–º–Ω–æ–µ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ:**  
   –ò–∑–º–µ–Ω–µ–Ω–∏–µ `LayoutParams` (x, y, gravity, margins) –∏–ª–∏ `translationX/Y`.

**–ü–æ—á–µ–º—É –∏–∑–º–µ–Ω–µ–Ω–∏–µ margin (–ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ) ‚Äî –ø–ª–æ—Ö–æ–π –≤–∞—Ä–∏–∞–Ω—Ç:**

1. **–ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—ã–π –ø–µ—Ä–µ—Ä–∞—Å—á–µ—Ç layout:**  
   –ò–∑–º–µ–Ω–µ–Ω–∏–µ margin –≤—ã–∑—ã–≤–∞–µ—Ç `requestLayout()` —É –≤—Å–µ–π –∏–µ—Ä–∞—Ä—Ö–∏–∏ View ‚Üí –ø–∞–¥–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –ø—Ä–∏ —á–∞—Å—Ç—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤ –∞–Ω–∏–º–∞—Ü–∏—è—Ö).

2. **–°–ª–æ–∂–Ω–æ—Å—Ç—å –∞–Ω–∏–º–∞—Ü–∏–∏:**  
   –ê–Ω–∏–º–∞—Ü–∏—è margin –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –ø–æ—Å—Ç–æ—è–Ω–Ω—ã–º –ø–µ—Ä–µ—Å—á–µ—Ç–∞–º layout, —á—Ç–æ —Ç—è–∂–µ–ª–µ–µ –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏, —á–µ–º –∞–Ω–∏–º–∞—Ü–∏—è `translationX/Y`.

3. **–ö–æ–Ω—Ñ–ª–∏–∫—Ç—ã —Å –¥—Ä—É–≥–∏–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏:**  
   Margin –º–æ–∂–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤–∞—Ç—å —Å `layout_gravity` –∏ –¥—Ä—É–≥–∏–º–∏ –ø—Ä–∞–≤–∏–ª–∞–º–∏ –∫–æ–º–ø–æ–Ω–æ–≤–∫–∏.

4. **–ü–æ—Ç–µ—Ä—è —Å–µ–º–∞–Ω—Ç–∏–∫–∏:**  
   Margin –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö –æ—Ç—Å—Ç—É–ø–æ–≤, –∞ –Ω–µ –¥–ª—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è View.

**–õ—É—á—à–∏–µ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã –¥–ª—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è:**

1. **`translationX` / `translationY`:**  
   –õ—ë–≥–∫–æ–µ —Å–º–µ—â–µ–Ω–∏–µ View –±–µ–∑ –≤–ª–∏—è–Ω–∏—è –Ω–∞ layout. –ò–¥–µ–∞–ª—å–Ω–æ –¥–ª—è –∞–Ω–∏–º–∞—Ü–∏–π.
   ```kotlin
   view.animate().translationX(100f)
   ```

2. **–ò–∑–º–µ–Ω–µ–Ω–∏–µ `x` –∏ `y`:**  
   –ü—Ä—è–º–æ–µ –∑–∞–¥–∞–Ω–∏–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç (–æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ —Ä–æ–¥–∏—Ç–µ–ª—è).
   ```kotlin
   view.x = 100f
   ```

3. **`ViewPropertyAnimator`:**  
   –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∞–Ω–∏–º–∞—Ü–∏–∏ —Å–≤–æ–π—Å—Ç–≤ View.
   ```kotlin
   view.animate().x(100f).y(100f)
   ```

**–ò—Ç–æ–≥:**  
Margin ‚Äî –¥–ª—è —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–π –≤—ë—Ä—Å—Ç–∫–∏. –î–ª—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è/–∞–Ω–∏–º–∞—Ü–∏–π –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `translationX/Y` –∏–ª–∏ —Å–≤–æ–π—Å—Ç–≤–∞ `x`/`y`.

  </details> 

  <details>
  <summary> –ù–∞–∑–æ–≤–∏—Ç–µ –≤–∏–¥—ã –∞–Ω–∏–º–∞—Ü–∏–π. </summary> 

  **–í–∏–¥—ã –∞–Ω–∏–º–∞—Ü–∏–π –≤ Android:**

### 1. **View Animation (—É—Å—Ç–∞—Ä–µ–ª–∞)**
   - **Tween Animation** ‚Äì –∞–Ω–∏–º–∞—Ü–∏—è —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–π View (–∞–ª—å—Ñ–∞, –º–∞—Å—à—Ç–∞–±, –ø–æ–≤–æ—Ä–æ—Ç, –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ) —á–µ—Ä–µ–∑ XML.
   - **Frame Animation** ‚Äì –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∫–∞–¥—Ä–æ–≤ (–∫–∞–∫ GIF).

### 2. **Property Animation**
   - **ValueAnimator** ‚Äì –∞–Ω–∏–º–∏—Ä—É–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, –æ—Ç 0 –¥–æ 100), –º–æ–∂–Ω–æ –ø—Ä–∏–≤—è–∑–∞—Ç—å –∫ –ª—é–±–æ–º—É —Å–≤–æ–π—Å—Ç–≤—É.
   - **ObjectAnimator** ‚Äì –∞–Ω–∏–º–∏—Ä—É–µ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ —Å–≤–æ–π—Å—Ç–≤–æ –æ–±—ä–µ–∫—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `translationX`, `alpha`).
   - **AnimatorSet** ‚Äì –Ω–∞–±–æ—Ä –∞–Ω–∏–º–∞—Ü–∏–π –¥–ª—è –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –∏–ª–∏ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–≥–æ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è.
   - **ViewPropertyAnimator** ‚Äì –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω –¥–ª—è –∞–Ω–∏–º–∞—Ü–∏–∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Å–≤–æ–π—Å—Ç–≤ View –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ (`animate().translationX().alpha()`).

### 3. **Drawable Animation**
   - **AnimatedVectorDrawable** ‚Äì –∞–Ω–∏–º–∞—Ü–∏—è –≤–µ–∫—Ç–æ—Ä–Ω–æ–π –≥—Ä–∞—Ñ–∏–∫–∏ (SVG).
   - **AnimatedStateListDrawable** ‚Äì –∞–Ω–∏–º–∞—Ü–∏—è –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, –Ω–∞–∂–∞—Ç–∏–µ).
   - **AnimatedImageDrawable** ‚Äì –¥–ª—è GIF/WebP.

### 4. **Motion Layout (–ø–æ–¥–≤–∏–¥ ConstraintLayout)**
   - –°–ª–æ–∂–Ω—ã–µ –∞–Ω–∏–º–∞—Ü–∏–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ —á–µ—Ä–µ–∑ XML (–ø–µ—Ä–µ—Ö–æ–¥—ã –º–µ–∂–¥—É —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏).

### 5. **Physics-based Animation**
   - **SpringAnimation** ‚Äì –∞–Ω–∏–º–∞—Ü–∏—è —Å –ø—Ä—É–∂–∏–Ω–Ω—ã–º —ç—Ñ—Ñ–µ–∫—Ç–æ–º.
   - **FlingAnimation** ‚Äì –∞–Ω–∏–º–∞—Ü–∏—è —Å —É—á—ë—Ç–æ–º –∏–Ω–µ—Ä—Ü–∏–∏ (—Å–≤–∞–π–ø).

### 6. **Transition Framework**
   - –ê–Ω–∏–º–∞—Ü–∏–∏ –º–µ–∂–¥—É Activity/Fragment –∏–ª–∏ –≤–Ω—É—Ç—Ä–∏ –æ–¥–Ω–æ–≥–æ layout (`TransitionManager.beginDelayedTransition()`).

### 7. **Lottie**
   - –í–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ —Å–ª–æ–∂–Ω—ã—Ö –∞–Ω–∏–º–∞—Ü–∏–π –∏–∑ After Effects (JSON).

**–ö—Ä–∞—Ç–∫–∏–π –≤—ã–±–æ—Ä:**
- –ü—Ä–æ—Å—Ç—ã–µ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–∏ View ‚Üí **ViewPropertyAnimator**.
- –°–ª–æ–∂–Ω—ã–µ –∫–∞—Å—Ç–æ–º–Ω—ã–µ –∞–Ω–∏–º–∞—Ü–∏–∏ ‚Üí **ObjectAnimator**/**ValueAnimator**.
- –í–µ–∫—Ç–æ—Ä–Ω–∞—è –∞–Ω–∏–º–∞—Ü–∏—è ‚Üí **AnimatedVectorDrawable**.
- –°–ª–æ–∂–Ω—ã–µ UI-–ø–µ—Ä–µ—Ö–æ–¥—ã ‚Üí **MotionLayout**.
- –ü–ª–∞–≤–Ω—ã–µ —Ñ–∏–∑–∏—á–µ—Å–∫–∏–µ —ç—Ñ—Ñ–µ–∫—Ç—ã ‚Üí **SpringAnimation**.

  </details> 

  <details>
  <summary> –í —á–µ–º –æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∞–Ω–∏–º–∞—Ü–∏–∏ –∫–∞–¥—Ä –∑–∞ –∫–∞–¥—Ä–æ–º? </summary> 

  **–û–ø–∞—Å–Ω–æ—Å—Ç–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∞–Ω–∏–º–∞—Ü–∏–∏ –∫–∞–¥—Ä –∑–∞ –∫–∞–¥—Ä–æ–º (Frame-by-Frame):**

1. **–í—ã—Å–æ–∫–∞—è –ø–æ—Ç—Ä–µ–±–ª—è–µ–º–∞—è –ø–∞–º—è—Ç—å:**  
   –ö–∞–∂–¥—ã–π –∫–∞–¥—Ä ‚Äî —ç—Ç–æ –æ—Ç–¥–µ–ª—å–Ω—ã–π `Drawable` (—á–∞—Å—Ç–æ `Bitmap`), —Ö—Ä–∞–Ω—è—â–∏–π—Å—è –≤ –ø–∞–º—è—Ç–∏. –ë–æ–ª—å—à–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–∞–¥—Ä–æ–≤ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ `OutOfMemoryError`.

2. **–ù–∏–∑–∫–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**  
   –ß–∞—Å—Ç–∞—è —Å–º–µ–Ω–∞ –∫–∞–¥—Ä–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 30 FPS) –≤—ã–∑—ã–≤–∞–µ—Ç –ø–æ—Å—Ç–æ—è–Ω–Ω—É—é –ø–µ—Ä–µ—Ä–∏—Å–æ–≤–∫—É (`invalidate()`), —á—Ç–æ –Ω–∞–≥—Ä—É–∂–∞–µ—Ç –æ—Å–Ω–æ–≤–Ω–æ–π –ø–æ—Ç–æ–∫ –∏ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –ø—Ä–æ–ø—É—Å–∫—É –∫–∞–¥—Ä–æ–≤.

3. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∞–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç–∏:**  
   –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã –∏ –ø–ª–æ—Ç–Ω–æ—Å—Ç—å –ø–∏–∫—Å–µ–ª–µ–π –∫–∞–¥—Ä–æ–≤. –ù–∞ —ç–∫—Ä–∞–Ω–∞—Ö —Å —Ä–∞–∑–Ω—ã–º —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ–º –∏ –ø–ª–æ—Ç–Ω–æ—Å—Ç—å—é (`hdpi`, `xxhdpi`) –≤—ã–≥–ª—è–¥–∏—Ç —Ä–∞–∑–º—ã—Ç–æ –∏–ª–∏ –ø–∏–∫—Å–µ–ª—å–Ω–æ.

4. **–°–ª–æ–∂–Ω–æ—Å—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è:**  
   –õ—é–±–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –∞–Ω–∏–º–∞—Ü–∏–∏ —Ç—Ä–µ–±—É–µ—Ç –ø–µ—Ä–µ—Ä–∏—Å–æ–≤–∫–∏ –≤—Å–µ—Ö –∫–∞–¥—Ä–æ–≤ –≤ –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–æ–º —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ. –ù–µ–ª—å–∑—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –º–µ–Ω—è—Ç—å —Ü–≤–µ—Ç, —Ä–∞–∑–º–µ—Ä –∏–ª–∏ —Ñ–æ—Ä–º—É.

5. **–ë–æ–ª—å—à–æ–π —Ä–∞–∑–º–µ—Ä APK:**  
   –ú–Ω–æ–∂–µ—Å—Ç–≤–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π —É–≤–µ–ª–∏—á–∏–≤–∞—é—Ç —Ä–∞–∑–º–µ—Ä –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

6. **–ü—Ä–æ–±–ª–µ–º—ã —Å —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º:**  
   –ù—É–∂–Ω–æ –≤—Ä—É—á–Ω—É—é –∑–∞–ø—É—Å–∫–∞—Ç—å (`start()`) –∏ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å (`stop()`) –∞–Ω–∏–º–∞—Ü–∏—é, –æ—Å–æ–±–µ–Ω–Ω–æ –≤ `onPause()`/`onResume()`, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å —É—Ç–µ—á–µ–∫ –∏ –ª–∏—à–Ω–µ–π –Ω–∞–≥—Ä—É–∑–∫–∏.

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ—Å—Ç–æ—Ä–æ–∂–Ω–æ:**  
- –ü—Ä–æ—Å—Ç—ã–µ –∏ –∫–æ—Ä–æ—Ç–∫–∏–µ –∞–Ω–∏–º–∞—Ü–∏–∏ (5-10 –∫–∞–¥—Ä–æ–≤).  
- –ö–æ–≥–¥–∞ –Ω–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤–µ–∫—Ç–æ—Ä–Ω—É—é –∞–Ω–∏–º–∞—Ü–∏—é.  
- –î–ª—è —Å—Ç–∞—Ç–∏—á–Ω—ã—Ö –∏–∫–æ–Ω–æ–∫ —Å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–π.

**–õ—É—á—à–∏–µ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã:**  
- **`AnimatedVectorDrawable`** ‚Äî –¥–ª—è –≤–µ–∫—Ç–æ—Ä–Ω–æ–π –∞–Ω–∏–º–∞—Ü–∏–∏.  
- **`Lottie`** ‚Äî —Å–ª–æ–∂–Ω—ã–µ –∞–Ω–∏–º–∞—Ü–∏–∏ —Å –º–∞–ª—ã–º –≤–µ—Å–æ–º.  
- **`Property Animation`** (`ObjectAnimator`) ‚Äî –¥–ª—è —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–π —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö View.  
- **`MotionLayout`** ‚Äî –¥–ª—è –∞–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–µ—Ä–µ—Ö–æ–¥–æ–≤ UI.

**–í—ã–≤–æ–¥:** –ò–∑–±–µ–≥–∞–π—Ç–µ frame-by-frame –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö –∏ –¥–ª–∏—Ç–µ–ª—å–Ω—ã—Ö –∞–Ω–∏–º–∞—Ü–∏–π. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã.

  </details> 

   <details>
  <summary> –ö–∞–∫ —Å–¥–µ–ª–∞—Ç—å transition –∞–Ω–∏–º–∞—Ü–∏—é –º–µ–∂–¥—É –¥–≤—É–º—è —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞–º–∏?  </summary> 

  **Transition –∞–Ω–∏–º–∞—Ü–∏—è –º–µ–∂–¥—É —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞–º–∏:**

### 1. **–ß–µ—Ä–µ–∑ XML (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è –ø—Ä–æ—Å—Ç—ã—Ö –∞–Ω–∏–º–∞—Ü–∏–π)**

**–®–∞–≥ 1:** –°–æ–∑–¥–∞—Ç—å XML-–∞–Ω–∏–º–∞—Ü–∏–∏ –≤ `res/anim/`
```xml
<!-- res/anim/slide_in_right.xml -->
<set xmlns:android="http://schemas.android.com/apk/res/android">
    <translate android:fromXDelta="100%p" android:toXDelta="0"
        android:duration="300"/>
</set>

<!-- res/anim/slide_out_left.xml -->
<set xmlns:android="http://schemas.android.com/apk/res/android">
    <translate android:fromXDelta="0" android:toXDelta="-100%p"
        android:duration="300"/>
</set>

<!-- fade_in.xml, fade_out.xml –∏ —Ç.–¥. -->
```

**–®–∞–≥ 2:** –ü—Ä–∏–º–µ–Ω–∏—Ç—å –≤ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
```kotlin
supportFragmentManager.beginTransaction()
    .setCustomAnimations(
        R.anim.slide_in_right,    // enter
        R.anim.slide_out_left,    // exit
        R.anim.slide_in_left,     // popEnter (–ø—Ä–∏ back –Ω–∞–≤–∏–≥–∞—Ü–∏–∏)
        R.anim.slide_out_right    // popExit (–ø—Ä–∏ back –Ω–∞–≤–∏–≥–∞—Ü–∏–∏)
    )
    .replace(R.id.container, MyFragment())
    .addToBackStack(null)
    .commit()
```

### 2. **–ß–µ—Ä–µ–∑ Transition Framework (AndroidX Fragment 1.3.0+)**

**–®–∞–≥ 1:** –°–æ–∑–¥–∞—Ç—å XML-–ø–µ—Ä–µ—Ö–æ–¥—ã –≤ `res/transition/`
```xml
<!-- res/transition/fade_transition.xml -->
<fade xmlns:android="http://schemas.android.com/apk/res/android"
    android:duration="300" />
```

**–®–∞–≥ 2:** –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–µ—Ä–µ—Ö–æ–¥—ã –≤–æ —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞—Ö
```kotlin
// –í onCreate() —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞
exitTransition = TransitionInflater.from(context)
    .inflateTransition(R.transition.fade_transition)

enterTransition = ... // –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ
sharedElementEnterTransition = ... // –¥–ª—è shared element –ø–µ—Ä–µ—Ö–æ–¥–æ–≤
```

**–®–∞–≥ 3:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
```kotlin
parentFragmentManager.commit {
    setReorderingAllowed(true)
    setCustomAnimations(
        R.anim.fade_in,
        R.anim.fade_out,
        R.anim.fade_in,
        R.anim.fade_out
    )
    replace(R.id.container, MyFragment())
    addToBackStack(null)
}
```

### 3. **Shared Element Transition (–∞–Ω–∏–º–∞—Ü–∏—è –æ–±—â–∏—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤)**

```kotlin
// 1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å transitionName –≤ XML –∏–ª–∏ –∫–æ–¥–µ
<ImageView
    android:transitionName="shared_image" />

// 2. –í –ø–µ—Ä–≤–æ–º —Ñ—Ä–∞–≥–º–µ–Ω—Ç–µ
val options = FragmentOptionsCompat.makeSceneTransitionAnimation(
    requireActivity(),
    imageView, "shared_image"
)

// 3. –í–æ –≤—Ç–æ—Ä–æ–º —Ñ—Ä–∞–≥–º–µ–Ω—Ç–µ (–≤ onCreateView)
sharedElementEnterTransition = TransitionInflater.from(context)
    .inflateTransition(android.R.transition.move)

// 4. –ó–∞–ø—É—Å–∫
parentFragmentManager.commit {
    setReorderingAllowed(true)
    addSharedElement(imageView, "shared_image")
    replace(R.id.container, SecondFragment())
    addToBackStack(null)
}
```

### –í–∞–∂–Ω—ã–µ –Ω—é–∞–Ω—Å—ã:
1. **`setReorderingAllowed(true)`** ‚Äì —É–ª—É—á—à–∞–µ—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø–µ—Ä–µ—Ö–æ–¥–æ–≤.
2. **–ü–æ—Ä—è–¥–æ–∫ –∞–Ω–∏–º–∞—Ü–∏–π:** enter/exit –¥–ª—è –ø–µ—Ä–µ—Ö–æ–¥–∞ –≤–ø–µ—Ä—ë–¥, popEnter/popExit –¥–ª—è –≤–æ–∑–≤—Ä–∞—Ç–∞.
3. **–î–ª—è DialogFragment:** –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `.setTransitionStyle(STYLE_NO_FRAME)` –∏ –∫–∞—Å—Ç–æ–º–Ω—ã–µ –∞–Ω–∏–º–∞—Ü–∏–∏.
4. **–ò–∑–±–µ–≥–∞—Ç—å —Å–ª–æ–∂–Ω—ã—Ö –∞–Ω–∏–º–∞—Ü–∏–π** –Ω–∞ –Ω–∏–∑–∫–æ–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö.

### –ü—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è:
- **–ú–∏–≥–∞–Ω–∏–µ —Ñ–æ–Ω–∞:** –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å background —É –∫–æ—Ä–Ω–µ–≤–æ–≥–æ View —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞.
- **–ù–µ—Ç –∞–Ω–∏–º–∞—Ü–∏–∏ –ø—Ä–∏ back –Ω–∞–≤–∏–≥–∞—Ü–∏–∏:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å popEnter/popExit –∞–Ω–∏–º–∞—Ü–∏–∏.
- **Shared Element –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:** –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ `transitionName` —É–Ω–∏–∫–∞–ª–µ–Ω –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö Activity.

  </details>

</details>


<details> 
  <summary> <h2> üå≥ Senior </h2> </summary>

  <details>
  <summary>  –í —á–µ–º –ø—Ä–æ–±–ª–µ–º–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è dataBinding –≤ –∫–∞—Å—Ç–æ–º–Ω—ã—Ö –≤—å—é? </summary>
**–û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è DataBinding –≤ Custom View:**

## 1. **–ù–∞—Ä—É—à–µ–Ω–∏–µ Single Responsibility Principle**
- Custom View –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –æ—Ç—Ä–∏—Å–æ–≤–∫—É –∏ –ø–æ–≤–µ–¥–µ–Ω–∏–µ, –∞ –Ω–µ –∑–∞ –±–∏–Ω–¥–∏–Ω–≥ –¥–∞–Ω–Ω—ã—Ö.
- –°–º–µ—à–∏–≤–∞–µ—Ç—Å—è –ª–æ–≥–∏–∫–∞ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è –∏ –ª–æ–≥–∏–∫–∞ –±–∏–Ω–¥–∏–Ω–≥–∞.

## 2. **–°–ª–æ–∂–Ω–æ—Å—Ç–∏ —Å –∏–Ω–∫–∞–ø—Å—É–ª—è—Ü–∏–µ–π**
- –ü—Ä–∏–≤—è–∑–∫–∞ –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º –º–æ–¥–µ–ª—è–º –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ `<data>` –±–ª–æ–∫.
- –ù–∞—Ä—É—à–∞–µ—Ç—Å—è –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ View.
- –ñ—ë—Å—Ç–∫–∞—è –ø—Ä–∏–≤—è–∑–∫–∞ –∫ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑–≤–Ω–µ.

## 3. **–ü—Ä–æ–±–ª–µ–º—ã —Å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é**
- **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π overhead:** –°–æ–∑–¥–∞–Ω–∏–µ `ViewDataBinding` –æ–±—ä–µ–∫—Ç–∞ –¥–ª—è –∫–∞–∂–¥–æ–π View.
- **–ú–µ–¥–ª–µ–Ω–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è:** `DataBindingUtil.inflate()` –º–µ–¥–ª–µ–Ω–Ω–µ–µ –æ–±—ã—á–Ω–æ–≥–æ `LayoutInflater`.
- **–£—Ç–µ—á–∫–∏ –ø–∞–º—è—Ç–∏:** –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ lifecycle –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ —É—Ç–µ—á–∫–∞–º.

```kotlin
// –ü—Ä–æ–±–ª–µ–º–∞: binding –∂–∏–≤–µ—Ç –¥–æ–ª—å—à–µ, —á–µ–º –Ω—É–∂–Ω–æ
class MyCustomView @JvmOverloads constructor(
    context: Context,
    attrs: AttributeSet? = null
) : FrameLayout(context, attrs) {
    
    private val binding = MyCustomViewBinding.inflate(
        LayoutInflater.from(context), this, true
    )
    
    // binding —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Å—Å—ã–ª–∫—É –¥–∞–∂–µ –∫–æ–≥–¥–∞ View detached
}
```

## 4. **–°–ª–æ–∂–Ω–æ—Å—Ç–∏ —Å –∫–∞—Å—Ç–æ–º–Ω—ã–º–∏ –∞—Ç—Ä–∏–±—É—Ç–∞–º–∏**
- DataBinding –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É–µ—Ç —Å `obtainStyledAttributes()`.
- –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–≥–∏–∫–∏: –∞—Ç—Ä–∏–±—É—Ç—ã –≤ XML –∏ –≤ –±–∏–Ω–¥–∏–Ω–≥–µ.

```kotlin
// –ü—É—Ç–∞–Ω–∏—Ü–∞: –æ—Ç–∫—É–¥–∞ –ø—Ä–∏—Ö–æ–¥—è—Ç –¥–∞–Ω–Ω—ã–µ?
<com.MyCustomView
    app:title="@{viewModel.title}"          <!-- DataBinding -->
    app:customTitle="Static Text"          <!-- Custom attribute -->
    />
```

## 5. **–ü—Ä–æ–±–ª–µ–º—ã —Å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º**
- –¢—Ä—É–¥–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ (–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç DataBinding –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã).
- –°–ª–æ–∂–Ω–µ–µ –ø–∏—Å–∞—Ç—å unit-—Ç–µ—Å—Ç—ã –¥–ª—è View –ª–æ–≥–∏–∫–∏.

## 6. **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∏ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ —Å ViewGroup**
- –î–ª—è ViewGroup —Å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–º–∏ –¥–µ—Ç—å–º–∏ DataBinding —É—Å–ª–æ–∂–Ω—è–µ—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ.
- –ü—Ä–æ–±–ª–µ–º—ã —Å `merge` —Ç–µ–≥–∞–º–∏ –≤ XML.

## 7. **–î–µ–ø–µ–Ω–¥–µ–Ω—Å–∏ –∏ —Ä–∞–∑–º–µ—Ä APK**
- –£–≤–µ–ª–∏—á–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ –∑–∞ —Å—á–µ—Ç DataBinding –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –∏ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∫–ª–∞—Å—Å–æ–≤.

## **–ö–æ–≥–¥–∞ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å (—Å –æ—Å—Ç–æ—Ä–æ–∂–Ω–æ—Å—Ç—å—é):**

### –î–æ–ø—É—Å—Ç–∏–º—ã–µ —Å–ª—É—á–∞–∏:
1. **–ü—Ä–æ—Å—Ç–∞—è –ø—Ä–∏–≤—è–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –±–µ–∑ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏:**
```kotlin
class LabelValueView @JvmOverloads constructor(
    context: Context,
    attrs: AttributeSet? = null
) : ConstraintLayout(context, attrs) {
    
    private val binding: ViewLabelValueBinding
    
    init {
        binding = ViewLabelValueBinding.inflate(
            LayoutInflater.from(context), this, true
        )
    }
    
    fun setData(label: String, value: String) {
        binding.label = label
        binding.value = value
    }
}
```

2. **–î–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–Ω–∞—è –ø—Ä–∏–≤—è–∑–∫–∞ —Å–æ–±—ã—Ç–∏–π (–±–µ–∑ ViewModel):**
```xml
<com.MyCustomView
    app:onAction="@{() -> handler.onAction()}"
    />
```

## **–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –ø–æ–¥—Ö–æ–¥—ã –¥–ª—è Senior —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞:**

### 1. **–†—É—á–Ω–æ–π –±–∏–Ω–¥–∏–Ω–≥ —á–µ—Ä–µ–∑ –º–µ—Ç–æ–¥—ã:**
```kotlin
class MyCustomView : FrameLayout {
    
    fun bind(data: MyData) {
        titleView.text = data.title
        subtitleView.text = data.subtitle
        // –õ–æ–≥–∏–∫–∞ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, –∞–Ω–∏–º–∞—Ü–∏–∏ –∏ —Ç.–¥.
    }
    
    fun setListeners(listener: MyClickListener) {
        setOnClickListener { listener.onClick() }
    }
}
```

### 2. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ ViewBinding (–±–µ–∑ –±–∏–Ω–¥–∏–Ω–≥–∞ –¥–∞–Ω–Ω—ã—Ö):**
```kotlin
class MyCustomView : FrameLayout {
    
    private val binding: MyCustomViewBinding
    
    init {
        binding = MyCustomViewBinding.inflate(
            LayoutInflater.from(context), this, true
        )
    }
    
    fun setTitle(title: String) {
        binding.titleView.text = title
    }
}
```

### 3. **–ö–æ–º–ø–æ–∑–∏—Ü–∏—è —Å Delegates:**
```kotlin
class MyCustomView : FrameLayout {
    
    var title: String by Delegates.observable("") { _, _, new ->
        binding.titleView.text = new
    }
    
    var icon: Drawable? by Delegates.observable(null) { _, _, new ->
        binding.iconView.setImageDrawable(new)
    }
}
```

### 4. **–†–µ–∞–∫—Ç–∏–≤–Ω—ã–π –ø–æ–¥—Ö–æ–¥ —Å Kotlin Flow:**
```kotlin
class MyCustomView : FrameLayout {
    
    private val _state = MutableStateFlow(MyViewState())
    val state: StateFlow<MyViewState> = _state
    
    init {
        lifecycleScope.launch {
            state.collect { render(it) }
        }
    }
    
    private fun render(state: MyViewState) {
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ UI
    }
}
```

## **–í—ã–≤–æ–¥ –¥–ª—è Senior —É—Ä–æ–≤–Ω—è:**
- **–ò–∑–±–µ–≥–∞–π—Ç–µ DataBinding –≤ Custom View** –¥–ª—è —Å–ª–æ–∂–Ω–æ–π –ª–æ–≥–∏–∫–∏.
- **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ DataBinding —Ç–æ–ª—å–∫–æ** –¥–ª—è –ø—Ä–æ—Å—Ç–æ–π –¥–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–Ω–æ–π –ø—Ä–∏–≤—è–∑–∫–∏.
- **–ü—Ä–µ–¥–ø–æ—á–∏—Ç–∞–π—Ç–µ —è–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã** (`bind()`, `setData()`) –¥–ª—è –ª—É—á—à–µ–π —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏ –∏ —Ç–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç–∏.
- **–£—á–∏—Ç—ã–≤–∞–π—Ç–µ —Å—Ç–æ–∏–º–æ—Å—Ç—å –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã** DataBinding –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.
- **–î–µ–∫–æ–º–ø–æ–∑–∏—Ä—É–π—Ç–µ —Å–ª–æ–∂–Ω—ã–µ View** –Ω–∞ –ø—Ä–æ—Å—Ç—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã, –∫–∞–∂–¥—ã–π —Å–æ —Å–≤–æ–µ–π –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å—é.

**–ö–ª—é—á–µ–≤–æ–π –ø—Ä–∏–Ω—Ü–∏–ø:** Custom View –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –∏–¥–∏–æ–º–∞—Ç–∏—á–Ω—ã–º Android –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–º, –∞ –Ω–µ DataBinding-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–º.
  </details>

  <details>
  <summary>  –ü–æ—á–µ–º—É –≤ onLayout super.onLayout() –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤ –∫–æ–Ω—Ü–µ?  </summary> 

  **–ì–ª—É–±–æ–∫–æ–µ –ø–æ–Ω–∏–º–∞–Ω–∏–µ –ø–æ—Ä—è–¥–∫–∞ `super.onLayout()` –≤ custom ViewGroup:**

## **–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è —Ä–∞–∑–Ω–∏—Ü–∞: View vs ViewGroup**

### **–î–ª—è –æ–±—ã—á–Ω–æ–π View (–Ω–∞—Å–ª–µ–¥—É—é—â–µ–π –æ—Ç View):**
```kotlin
override fun onLayout(changed: Boolean, l: Int, t: Int, r: Int, b: Int) {
    super.onLayout(changed, l, t, r, b) // –ú–æ–∂–Ω–æ –≤—ã–∑—ã–≤–∞—Ç—å –≤ –Ω–∞—á–∞–ª–µ
    // –ö–∞—Å—Ç–æ–º–Ω–∞—è –ª–æ–≥–∏–∫–∞ –ü–û–°–õ–ï –±–∞–∑–æ–≤–æ–π
}
```
‚úÖ **–ù–µ –∫—Ä–∏—Ç–∏—á–Ω–æ**, —Ç–∞–∫ –∫–∞–∫ `View.onLayout()` –ø—É—Å—Ç–æ–π (no-op).

### **–î–ª—è ViewGroup (–Ω–∞—Å–ª–µ–¥—É—é—â–µ–π –æ—Ç ViewGroup –∏–ª–∏ Layout):**
```kotlin
override fun onLayout(changed: Boolean, l: Int, t: Int, r: Int, b: Int) {
    // –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û:
    super.onLayout(changed, l, t, r, b) // –†–æ–¥–∏—Ç–µ–ª—å—Å–∫–∞—è ViewGroup —É–∂–µ —Ä–∞–∑–º–µ—Å—Ç–∏–ª–∞ –¥–µ—Ç–µ–π!
    // –¢–µ–ø–µ—Ä—å –º–æ—è –∫–∞—Å—Ç–æ–º–Ω–∞—è –ª–æ–≥–∏–∫–∞ –º–æ–∂–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤–∞—Ç—å —Å —Ä–∞–∑–º–µ—â–µ–Ω–∏–µ–º –¥–µ—Ç–µ–π
}
```

## **–ü–æ—á–µ–º—É `super.onLayout()` –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤ –∫–æ–Ω—Ü–µ –¥–ª—è ViewGroup:**

### 1. **–ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∂–∏–∑–Ω–µ–Ω–Ω–æ–≥–æ —Ü–∏–∫–ª–∞ layout:**
```kotlin
// –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫:
override fun onLayout(changed: Boolean, l: Int, t: Int, r: Int, b: Int) {
    // 1. –°–Ω–∞—á–∞–ª–∞ –ö–ê–°–¢–û–ú–ù–ê–Ø –ª–æ–≥–∏–∫–∞ —Ä–∞–∑–º–µ—â–µ–Ω–∏—è –¥–µ—Ç–µ–π
    for (i in 0 until childCount) {
        val child = getChildAt(i)
        // –ö–∞—Å—Ç–æ–º–Ω—ã–µ —Ä–∞—Å—á–µ—Ç—ã –ø–æ–∑–∏—Ü–∏–∏
        child.layout(childLeft, childTop, childRight, childBottom)
    }
    
    // 2. –ü–û–¢–û–ú –≤—ã–∑—ã–≤–∞–µ–º super –¥–ª—è –æ—Å—Ç–∞—Ç–æ—á–Ω–æ–π –ª–æ–≥–∏–∫–∏
    super.onLayout(changed, l, t, r, b) // –ï—Å–ª–∏ –≤ —Ä–æ–¥–∏—Ç–µ–ª–µ –µ—Å—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞
}
```

### 2. **–ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã –ø—Ä–æ–±–ª–µ–º:**

**–ü—Ä–æ–±–ª–µ–º–∞ 1: –î–≤–æ–π–Ω–æ–µ —Ä–∞–∑–º–µ—â–µ–Ω–∏–µ –¥–µ—Ç–µ–π**
```kotlin
class MyLinearLayout : LinearLayout {
    override fun onLayout(changed: Boolean, l: Int, t: Int, r: Int, b: Int) {
        super.onLayout(changed, l, t, r, b) // LinearLayout —É–∂–µ —Ä–∞–∑–º–µ—Å—Ç–∏–ª –¥–µ—Ç–µ–π
        
        // –¢–µ–ø–µ—Ä—å —è –ø—ã—Ç–∞—é—Å—å —Ä–∞–∑–º–µ—Å—Ç–∏—Ç—å –∏—Ö —Å–Ω–æ–≤–∞ - –ö–û–ù–§–õ–ò–ö–¢!
        for (i in 0 until childCount) {
            val child = getChildAt(i)
            child.layout(myLeft, myTop, myRight, myBottom) // –ü–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç –ø–æ–∑–∏—Ü–∏–∏
        }
    }
}
```
–†–µ–∑—É–ª—å—Ç–∞—Ç: –î–µ—Ç–∏ "–ø—Ä—ã–≥–∞—é—Ç" –º–µ–∂–¥—É –ø–æ–∑–∏—Ü–∏—è–º–∏, –≤–æ–∑–º–æ–∂–Ω—ã –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã –æ—Ç—Ä–∏—Å–æ–≤–∫–∏.

**–ü—Ä–æ–±–ª–µ–º–∞ 2: –ù–∞—Ä—É—à–µ–Ω–∏–µ –æ–∂–∏–¥–∞–Ω–∏–π —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–≥–æ –∫–ª–∞—Å—Å–∞**
```kotlin
class MyFrameLayout : FrameLayout {
    override fun onLayout(changed: Boolean, l: Int, t: Int, r: Int, b: Int) {
        super.onLayout(changed, l, t, r, b) // FrameLayout —Ä–∞–∑–º–µ—Å—Ç–∏–ª –¥–µ—Ç–µ–π —Å —É—á–µ—Ç–æ–º layout_gravity
        
        // –ê —Ç–µ–ø–µ—Ä—å —è –º–µ–Ω—è—é –ø–æ–∑–∏—Ü–∏–∏, –∏–≥–Ω–æ—Ä–∏—Ä—É—è gravity
        customLayoutChildren() // –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ gravity —Å–ª–æ–º–∞–Ω—ã
    }
}
```

### 3. **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:**

**ViewGroup.onLayout() ‚Äî —ç—Ç–æ –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π –º–µ—Ç–æ–¥:**
```java
// –í Android source:
public abstract void onLayout(boolean changed, int l, int t, int r, int b);
```

**–ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ (LinearLayout, FrameLayout):**
- `LinearLayout.onLayout()` ‚Äî —Ä–∞–∑–º–µ—â–∞–µ—Ç –¥–µ—Ç–µ–π –ª–∏–Ω–µ–π–Ω–æ
- `FrameLayout.onLayout()` ‚Äî —Ä–∞–∑–º–µ—â–∞–µ—Ç —Å —É—á–µ—Ç–æ–º gravity
- `RelativeLayout.onLayout()` ‚Äî —Å–ª–æ–∂–Ω–∞—è –ª–æ–≥–∏–∫–∞ –ø–æ constraints

**–ï—Å–ª–∏ –≤—ã–∑–≤–∞—Ç—å super –î–û —Å–≤–æ–µ–π –ª–æ–≥–∏–∫–∏:**  
–í—ã –¥–µ–ª–µ–≥–∏—Ä—É–µ—Ç–µ —Ä–∞–∑–º–µ—â–µ–Ω–∏–µ –¥–µ—Ç–µ–π —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–º—É –∫–ª–∞—Å—Å—É, –∞ –ø–æ—Ç–æ–º –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç–µ –µ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã ‚Äî —ç—Ç–æ –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏—Ç –∏–Ω–∫–∞–ø—Å—É–ª—è—Ü–∏–∏.

### 4. **–ò—Å–∫–ª—é—á–µ–Ω–∏—è –∏ –æ—Å–æ–±—ã–µ —Å–ª—É—á–∞–∏:**

**–°–ª—É—á–∞–π 1: –î–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –ª–æ–≥–∏–∫–∏ —Ä–æ–¥–∏—Ç–µ–ª—è**
```kotlin
override fun onLayout(changed: Boolean, l: Int, t: Int, r: Int, b: Int) {
    // –ú–æ–∂–Ω–æ –≤—ã–∑–≤–∞—Ç—å super –≤ –Ω–∞—á–∞–ª–µ, –ï–°–õ–ò:
    // 1. –í—ã –ù–ï –º–µ–Ω—è–µ—Ç–µ –ø–æ–∑–∏—Ü–∏–∏ –¥–µ—Ç–µ–π, –∞ —Ç–æ–ª—å–∫–æ –¥–æ–±–∞–≤–ª—è–µ—Ç–µ –ª–æ–≥–∏–∫—É
    // 2. –í—ã —Ç–æ—á–Ω–æ –∑–Ω–∞–µ—Ç–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ —Ä–æ–¥–∏—Ç–µ–ª—è
    
    super.onLayout(changed, l, t, r, b)
    
    // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞, –Ω–µ –∑–∞—Ç—Ä–∞–≥–∏–≤–∞—é—â–∞—è layout –¥–µ—Ç–µ–π
    updateDecorationPositions() // –ù–∞–ø—Ä–∏–º–µ—Ä, —Ä–∏—Å–æ–≤–∞–Ω–∏–µ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª–µ–π
    cacheLayoutInfo() // –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏–π
}
```

**–°–ª—É—á–∞–π 2: –ü–æ–ª–Ω–∞—è –∑–∞–º–µ–Ω–∞ –ª–æ–≥–∏–∫–∏ layout**
```kotlin
override fun onLayout(changed: Boolean, l: Int, t: Int, r: Int, b: Int) {
    // –ü–æ–ª–Ω–æ—Å—Ç—å—é —Å–≤–æ—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
    layoutChildrenCustom()
    
    // super –ù–ï –≤—ã–∑—ã–≤–∞–µ–º –≤–æ–æ–±—â–µ, –µ—Å–ª–∏ –ø–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–º–µ–Ω—è–µ–º –ª–æ–≥–∏–∫—É
    // super.onLayout(changed, l, t, r, b) // –ù–ï –í–´–ó–´–í–ê–¢–¨!
}
```

### 5. **–ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã:**

**–ü–∞—Ç—Ç–µ—Ä–Ω 1: –î–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å –ø–æ—Å–ª–µ–¥—É—é—â–∏–º –≤—ã–∑–æ–≤–æ–º super**
```kotlin
override fun onLayout(changed: Boolean, l: Int, t: Int, r: Int, b: Int) {
    if (useCustomLayout) {
        customLayoutChildren()
        // super –ù–ï –≤—ã–∑—ã–≤–∞–µ–º, —Ç–∞–∫ –∫–∞–∫ –ø–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–º–µ–Ω–∏–ª–∏ –ª–æ–≥–∏–∫—É
    } else {
        super.onLayout(changed, l, t, r, b) // –ò—Å–ø–æ–ª—å–∑—É–µ–º —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫—É—é –ª–æ–≥–∏–∫—É
    }
}
```

**–ü–∞—Ç—Ç–µ—Ä–Ω 2: –ú–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ–∑–∏—Ü–∏–π –ü–ï–†–ï–î –≤—ã–∑–æ–≤–æ–º super (—Ä–µ–¥–∫–∏–π —Å–ª—É—á–∞–π)**
```kotlin
override fun onLayout(changed: Boolean, l: Int, t: Int, r: Int, b: Int) {
    // –¢–æ–ª—å–∫–æ –µ—Å–ª–∏ –Ω—É–∂–Ω–æ –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å —Ä–∞–∑–º–µ—Ä—ã/–ø–æ–∑–∏—Ü–∏–∏
    preLayoutAdjustments()
    
    // –ó–∞—Ç–µ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π layout
    super.onLayout(changed, l, t, r, b)
    
    // –ò –ø–æ—Å—Ç-–æ–±—Ä–∞–±–æ—Ç–∫–∞
    postLayoutCleanup()
}
```

### 6. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å:**

**–†–∞–Ω–Ω–∏–π –≤—ã–∑–æ–≤ super –º–æ–∂–µ—Ç –≤—ã–∑–≤–∞—Ç—å:**
- –õ–∏—à–Ω–∏–µ `requestLayout()` –Ω–∞ –¥–µ—Ç—è—Ö
- –ù–µ—Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–∏ –∫–∞—Å—Ç–æ–º–Ω—ã—Ö –∞–Ω–∏–º–∞—Ü–∏—è—Ö layout
- –ü—Ä–æ–±–ª–µ–º—ã —Å `layout_` –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ –¥–µ—Ç–µ–π

## **–í—ã–≤–æ–¥ –¥–ª—è Senior —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞:**

1. **–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è ViewGroup:** `super.onLayout()` –≤ –∫–æ–Ω—Ü–µ –∏–ª–∏ –Ω–µ –≤—ã–∑—ã–≤–∞—Ç—å –≤–æ–æ–±—â–µ.
2. **–î–ª—è View:** –ø–æ—Ä—è–¥–æ–∫ –Ω–µ –∫—Ä–∏—Ç–∏—á–µ–Ω (–Ω–æ –ª—É—á—à–µ –≤ –Ω–∞—á–∞–ª–µ –¥–ª—è –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏).
3. **–ê–Ω–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π –∫–ª–∞—Å—Å:** –ï—Å–ª–∏ –Ω–∞—Å–ª–µ–¥—É–µ—Ç–µ –æ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ Layout, –∏–∑—É—á–∏—Ç–µ –µ–≥–æ `onLayout()` —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é.
4. **–î–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:** –í –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è—Ö —É–∫–∞–∂–∏—Ç–µ, –ø–æ—á–µ–º—É super –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è/–Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è.
5. **–¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ edge cases:** –ü–æ–≤–æ—Ä–æ—Ç—ã —ç–∫—Ä–∞–Ω–∞, –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–æ–≤, –∞–Ω–∏–º–∞—Ü–∏–∏ layout.

**–ò—Ç–æ–≥:** –ü–æ—Ä—è–¥–æ–∫ –≤—ã–∑–æ–≤–∞ `super.onLayout()` ‚Äî —ç—Ç–æ –≤–æ–ø—Ä–æ—Å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –∏ –∏–Ω–∫–∞–ø—Å—É–ª—è—Ü–∏–∏, –∞ –Ω–µ —Ñ–æ—Ä–º–∞–ª—å–Ω–æ—Å—Ç—å. –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ –ª–æ–º–∞–µ—Ç –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏—Ö –∫–ª–∞—Å—Å–æ–≤ –∏ –≤–µ–¥–µ—Ç –∫ —Ç—Ä—É–¥–Ω–æ–æ—Ç–ª–∞–∂–∏–≤–∞–µ–º—ã–º –±–∞–≥–∞–º.

  </details> 

   <details>
  <summary>  –ö–∞–∫ –º–æ–∂–Ω–æ —Ä–∞–∑–≥—Ä–∞–Ω–∏—á–∏—Ç—å –∑—É–º –∏ —Å–∫—Ä–æ–ª–ª –≤ onTouchEvent?  </summary> 

  **–ì–ª—É–±–æ–∫–æ–µ —Ä–∞–∑–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –∑—É–º–∞ –∏ —Å–∫—Ä–æ–ª–ª–∞ –≤ `onTouchEvent()`:**

## **–û—Å–Ω–æ–≤–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞:**
–û–±–∞ –∂–µ—Å—Ç–∞ –∏—Å–ø–æ–ª—å–∑—É—é—Ç `MotionEvent.ACTION_MOVE`, –Ω–æ –∏–º–µ—é—Ç —Ä–∞–∑–Ω—ã–µ —Å–µ–º–∞–Ω—Ç–∏–∫–∏:
- **Scroll** ‚Äî –æ–¥–∏–Ω –ø–∞–ª–µ—Ü, –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ
- **Zoom** ‚Äî –¥–≤–∞ –ø–∞–ª—å—Ü–∞, –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è –º–µ–∂–¥—É –Ω–∏–º–∏

## **1. –ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π –ø–æ–¥—Ö–æ–¥ —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –∂–µ—Å—Ç–æ–≤ (GestureDetector)**

```kotlin
class CustomView : View {
    private val gestureDetector: GestureDetector
    private val scaleGestureDetector: ScaleGestureDetector
    private var isScrolling = false
    private var isZooming = false
    
    init {
        gestureDetector = GestureDetector(context, ScrollGestureListener())
        scaleGestureDetector = ScaleGestureDetector(context, ZoomGestureListener())
    }
    
    override fun onTouchEvent(event: MotionEvent): Boolean {
        // 1. –û–ø—Ä–µ–¥–µ–ª—è–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–∞—Å–∞–Ω–∏–π
        val pointerCount = event.pointerCount
        
        // 2. –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: –∑—É–º (2+ –ø–∞–ª—å—Ü–∞) > —Å–∫—Ä–æ–ª–ª (1 –ø–∞–ª–µ—Ü)
        if (pointerCount >= 2) {
            isZooming = true
            isScrolling = false
            scaleGestureDetector.onTouchEvent(event)
            
            // –í–∞–∂–Ω–æ: –æ—Ç–º–µ–Ω—è–µ–º —Å–∫—Ä–æ–ª–ª –ø—Ä–∏ –Ω–∞—á–∞–ª–µ –∑—É–º–∞
            if (event.actionMasked == MotionEvent.ACTION_POINTER_DOWN) {
                gestureDetector.onTouchEvent(
                    MotionEvent.obtain(event).apply {
                        action = MotionEvent.ACTION_CANCEL
                    }
                )
            }
            return true
        }
        
        // 3. –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–∫—Ä–æ–ª–ª–∞
        isZooming = false
        return gestureDetector.onTouchEvent(event).also {
            if (event.actionMasked == MotionEvent.ACTION_UP) {
                isScrolling = false
            } else if (it && event.actionMasked == MotionEvent.ACTION_MOVE) {
                isScrolling = true
            }
        }
    }
    
    inner class ScrollGestureListener : GestureDetector.SimpleOnGestureListener() {
        override fun onScroll(
            e1: MotionEvent, e2: MotionEvent, 
            distanceX: Float, distanceY: Float
        ): Boolean {
            if (isZooming) return false // –ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å —Å–∫—Ä–æ–ª–ª –≤–æ –≤—Ä–µ–º—è –∑—É–º–∞
            // –õ–æ–≥–∏–∫–∞ —Å–∫—Ä–æ–ª–ª–∞
            return true
        }
    }
    
    inner class ZoomGestureListener : ScaleGestureDetector.SimpleOnScaleGestureListener() {
        override fun onScale(detector: ScaleGestureDetector): Boolean {
            if (isScrolling) return false // –ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å –∑—É–º –≤–æ –≤—Ä–µ–º—è –∞–∫—Ç–∏–≤–Ω–æ–≥–æ —Å–∫—Ä–æ–ª–ª–∞
            // –õ–æ–≥–∏–∫–∞ –∑—É–º–∞
            return true
        }
    }
}
```

## **2. –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º —Å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–º —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ–º –∂–µ—Å—Ç–æ–≤**

```kotlin
class CustomView : View {
    private data class TouchPoint(var x: Float, var y: Float, var id: Int)
    
    private val activeTouches = mutableMapOf<Int, TouchPoint>()
    private var initialDistance = 0f
    private var currentMode = Mode.NONE
    private var scrollStartX = 0f
    private var scrollStartY = 0f
    
    private enum class Mode { NONE, SCROLL, ZOOM, POTENTIAL_ZOOM }
    
    override fun onTouchEvent(event: MotionEvent): Boolean {
        when (event.actionMasked) {
            MotionEvent.ACTION_DOWN -> {
                // –û–¥–Ω–æ –∫–∞—Å–∞–Ω–∏–µ - –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–π —Å–∫—Ä–æ–ª–ª
                activeTouches[event.getPointerId(0)] = 
                    TouchPoint(event.x, event.y, event.getPointerId(0))
                currentMode = Mode.POTENTIAL_ZOOM
                scrollStartX = event.x
                scrollStartY = event.y
            }
            
            MotionEvent.ACTION_POINTER_DOWN -> {
                // –í—Ç–æ—Ä–æ–µ –∫–∞—Å–∞–Ω–∏–µ - –ø–µ—Ä–µ—Ö–æ–¥–∏–º –≤ —Ä–µ–∂–∏–º –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–≥–æ –∑—É–º–∞
                for (i in 0 until event.pointerCount) {
                    activeTouches[event.getPointerId(i)] = 
                        TouchPoint(event.getX(i), event.getY(i), event.getPointerId(i))
                }
                
                if (event.pointerCount == 2) {
                    initialDistance = calculateDistance(event)
                    currentMode = Mode.POTENTIAL_ZOOM
                }
            }
            
            MotionEvent.ACTION_MOVE -> {
                // –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –ª–æ–≥–∏–∫–∞ —Ä–∞–∑–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
                when {
                    // –û–ø—Ä–µ–¥–µ–ª–∏–ª–∏ ZOOM (2 –ø–∞–ª—å—Ü–∞ –∏ –¥–≤–∏–∂–µ–Ω–∏–µ –≤ —Ä–∞–∑–Ω—ã—Ö –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è—Ö)
                    event.pointerCount == 2 && isZoomGesture(event) -> {
                        if (currentMode != Mode.ZOOM) {
                            // –ü–µ—Ä–µ—Ö–æ–¥ –∏–∑ SCROLL/OTHER –≤ ZOOM
                            cancelCurrentGesture()
                            currentMode = Mode.ZOOM
                        }
                        handleZoom(event)
                    }
                    
                    // –û–ø—Ä–µ–¥–µ–ª–∏–ª–∏ SCROLL (1 –ø–∞–ª–µ—Ü –∏–ª–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ 2 –ø–∞–ª—å—Ü–µ–≤)
                    event.pointerCount == 1 || 
                    (event.pointerCount == 2 && isScrollGesture(event)) -> {
                        if (currentMode != Mode.SCROLL) {
                            currentMode = Mode.SCROLL
                        }
                        handleScroll(event)
                    }
                }
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –ø–æ–∑–∏—Ü–∏–∏ –∞–∫—Ç–∏–≤–Ω—ã—Ö –∫–∞—Å–∞–Ω–∏–π
                for (i in 0 until event.pointerCount) {
                    val id = event.getPointerId(i)
                    activeTouches[id]?.apply {
                        x = event.getX(i)
                        y = event.getY(i)
                    }
                }
            }
            
            MotionEvent.ACTION_POINTER_UP -> {
                // –£–¥–∞–ª–∏–ª–∏ –æ–¥–Ω–æ –∫–∞—Å–∞–Ω–∏–µ
                val pointerIndex = event.actionIndex
                val pointerId = event.getPointerId(pointerIndex)
                activeTouches.remove(pointerId)
                
                // –ï—Å–ª–∏ –æ—Å—Ç–∞–ª—Å—è –æ–¥–∏–Ω –ø–∞–ª–µ—Ü - –ø–µ—Ä–µ—Ö–æ–¥–∏–º –≤ —Ä–µ–∂–∏–º —Å–∫—Ä–æ–ª–ª–∞
                if (event.pointerCount == 1) {
                    currentMode = Mode.SCROLL
                }
            }
            
            MotionEvent.ACTION_UP, MotionEvent.ACTION_CANCEL -> {
                activeTouches.clear()
                currentMode = Mode.NONE
            }
        }
        return true
    }
    
    private fun isZoomGesture(event: MotionEvent): Boolean {
        if (event.pointerCount < 2) return false
        
        val currentDistance = calculateDistance(event)
        val distanceDelta = abs(currentDistance - initialDistance)
        
        // 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è
        if (distanceDelta > touchSlop * 2) {
            // 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–≤–∏–∂–µ–Ω–∏—è –ø–∞–ª—å—Ü–µ–≤
            val pointer0 = activeTouches[event.getPointerId(0)]
            val pointer1 = activeTouches[event.getPointerId(1)]
            val prevPointer0 = getHistoricalPoint(event, 0, 5) // 5 –∫–∞–¥—Ä–æ–≤ –Ω–∞–∑–∞–¥
            val prevPointer1 = getHistoricalPoint(event, 1, 5)
            
            if (prevPointer0 != null && prevPointer1 != null) {
                // –í–µ–∫—Ç–æ—Ä—ã –¥–≤–∏–∂–µ–Ω–∏—è –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–∞–ª—å—Ü–∞
                val dx0 = pointer0!!.x - prevPointer0.x
                val dy0 = pointer0.y - prevPointer0.y
                val dx1 = pointer1!!.x - prevPointer1.x
                val dy1 = pointer1.y - prevPointer1.y
                
                // –ï—Å–ª–∏ –ø–∞–ª—å—Ü—ã –¥–≤–∏–∂—É—Ç—Å—è –Ω–∞–≤—Å—Ç—Ä–µ—á—É –∏–ª–∏ –¥—Ä—É–≥ –æ—Ç –¥—Ä—É–≥–∞ - —ç—Ç–æ –∑—É–º
                val dotProduct = dx0 * dx1 + dy0 * dy1
                return dotProduct < 0 // –î–≤–∏–∂–µ–Ω–∏–µ –≤ –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω—ã—Ö –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è—Ö
            }
        }
        return false
    }
    
    private fun isScrollGesture(event: MotionEvent): Boolean {
        if (event.pointerCount < 2) return false
        
        // –î–ª—è –¥–≤—É—Ö –ø–∞–ª—å—Ü–µ–≤ –ø—Ä–æ–≤–µ—Ä—è–µ–º —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å –¥–≤–∏–∂–µ–Ω–∏—è
        val pointer0 = activeTouches[event.getPointerId(0)]
        val pointer1 = activeTouches[event.getPointerId(1)]
        val prevPointer0 = getHistoricalPoint(event, 0, 3)
        val prevPointer1 = getHistoricalPoint(event, 1, 3)
        
        if (prevPointer0 != null && prevPointer1 != null) {
            val dx0 = pointer0!!.x - prevPointer0.x
            val dy0 = pointer0.y - prevPointer0.y
            val dx1 = pointer1!!.x - prevPointer1.x
            val dy1 = pointer1.y - prevPointer1.y
            
            // –ï—Å–ª–∏ –ø–∞–ª—å—Ü—ã –¥–≤–∏–∂—É—Ç—Å—è —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ - —ç—Ç–æ —Å–∫—Ä–æ–ª–ª
            val angle = atan2(dy0.toDouble(), dx0.toDouble()) - 
                       atan2(dy1.toDouble(), dx1.toDouble())
            return abs(angle) < 0.5 // ~30 –≥—Ä–∞–¥—É—Å–æ–≤ —Ä–∞–∑–Ω–∏—Ü—ã
        }
        return false
    }
    
    private fun calculateDistance(event: MotionEvent): Float {
        val dx = event.getX(0) - event.getX(1)
        val dy = event.getY(0) - event.getY(1)
        return hypot(dx, dy)
    }
    
    private fun cancelCurrentGesture() {
        // –°–±—Ä–æ—Å —Å–æ—Å—Ç–æ—è–Ω–∏—è —Ç–µ–∫—É—â–µ–≥–æ –∂–µ—Å—Ç–∞
        when (currentMode) {
            Mode.SCROLL -> {
                // –û—Ç–º–µ–Ω–∞ –∏–Ω–µ—Ä—Ü–∏–∏ —Å–∫—Ä–æ–ª–ª–∞ –∏ —Ç.–¥.
                velocityTracker?.clear()
            }
            Mode.ZOOM -> {
                // –û—Ç–º–µ–Ω–∞ –∞–Ω–∏–º–∞—Ü–∏–∏ –∑—É–º–∞
            }
            else -> {}
        }
    }
}
```

## **3. –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π production-–≤–∞—Ä–∏–∞–Ω—Ç —Å —É—á–µ—Ç–æ–º edge cases**

```kotlin
class ZoomScrollView : View {
    private enum class GestureState {
        IDLE, 
        SCROLL_DECIDING,   // –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Å–∫—Ä–æ–ª–ª —ç—Ç–æ –∏–ª–∏ –Ω–µ—Ç
        ZOOM_DECIDING,     // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –∑—É–º —ç—Ç–æ –∏–ª–∏ –Ω–µ—Ç  
        SCROLLING,
        ZOOMING,
        FLINGING          // –î–ª—è –∏–Ω–µ—Ä—Ü–∏–∏ –ø–æ—Å–ª–µ —Å–∫—Ä–æ–ª–ª–∞
    }
    
    private var gestureState = GestureState.IDLE
    private val touchSlop = ViewConfiguration.get(context).scaledTouchSlop
    private var touchDownTime = 0L
    
    // VelocityTracker –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ñ–ª–∏–Ω–≥–∞
    private var velocityTracker: VelocityTracker? = null
    private val maxFlingVelocity = ViewConfiguration.get(context).scaledMaximumFlingVelocity
    private val minFlingVelocity = ViewConfiguration.get(context).scaledMinimumFlingVelocity
    
    override fun onTouchEvent(event: MotionEvent): Boolean {
        when (event.actionMasked) {
            MotionEvent.ACTION_DOWN -> {
                // –ù–∞—á–∞–ª–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è
                gestureState = GestureState.SCROLL_DECIDING
                touchDownTime = System.currentTimeMillis()
                velocityTracker = VelocityTracker.obtain()
                velocityTracker?.addMovement(event)
            }
            
            MotionEvent.ACTION_MOVE -> {
                velocityTracker?.addMovement(event)
                
                when (gestureState) {
                    GestureState.SCROLL_DECIDING -> {
                        if (isPastTouchSlop(event)) {
                            if (event.pointerCount == 1) {
                                gestureState = GestureState.SCROLLING
                                startScrolling(event)
                            } else {
                                gestureState = GestureState.ZOOM_DECIDING
                            }
                        }
                    }
                    
                    GestureState.ZOOM_DECIDING -> {
                        if (event.pointerCount == 2 && isZoomPastThreshold(event)) {
                            gestureState = GestureState.ZOOMING
                            startZooming(event)
                        } else if (event.pointerCount == 1) {
                            gestureState = GestureState.SCROLLING
                            startScrolling(event)
                        }
                    }
                    
                    GestureState.SCROLLING -> {
                        if (event.pointerCount == 2 && shouldSwitchToZoom(event)) {
                            gestureState = GestureState.ZOOMING
                            cancelScrollForZoom()
                            startZooming(event)
                        } else {
                            continueScrolling(event)
                        }
                    }
                    
                    GestureState.ZOOMING -> {
                        if (event.pointerCount == 1 && shouldSwitchToScroll(event)) {
                            gestureState = GestureState.SCROLLING
                            cancelZoomForScroll()
                            startScrolling(event)
                        } else {
                            continueZooming(event)
                        }
                    }
                }
            }
            
            MotionEvent.ACTION_UP -> {
                when (gestureState) {
                    GestureState.SCROLLING -> {
                        velocityTracker?.computeCurrentVelocity(1000, maxFlingVelocity.toFloat())
                        val velocityX = velocityTracker?.xVelocity ?: 0f
                        val velocityY = velocityTracker?.yVelocity ?: 0f
                        
                        if (abs(velocityX) > minFlingVelocity || 
                            abs(velocityY) > minFlingVelocity) {
                            gestureState = GestureState.FLINGING
                            startFlinging(velocityX, velocityY)
                        } else {
                            gestureState = GestureState.IDLE
                        }
                    }
                    else -> gestureState = GestureState.IDLE
                }
                velocityTracker?.recycle()
                velocityTracker = null
            }
            
            MotionEvent.ACTION_CANCEL -> {
                gestureState = GestureState.IDLE
                velocityTracker?.recycle()
                velocityTracker = null
            }
        }
        return true
    }
    
    private fun shouldSwitchToZoom(event: MotionEvent): Boolean {
        // –ü–µ—Ä–µ—Ö–æ–¥ –æ—Ç —Å–∫—Ä–æ–ª–ª–∞ –∫ –∑—É–º—É:
        // 1. –í—Ä–µ–º—è —Å –Ω–∞—á–∞–ª–∞ –∂–µ—Å—Ç–∞ > 100ms (—á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å —Å–ª—É—á–∞–π–Ω—ã—Ö –ø–µ—Ä–µ—Ö–æ–¥–æ–≤)
        // 2. –†–∞—Å—Å—Ç–æ—è–Ω–∏–µ –º–µ–∂–¥—É –ø–∞–ª—å—Ü–∞–º–∏ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ
        // 3. –ü–∞–ª—å—Ü—ã –¥–≤–∏–∂—É—Ç—Å—è –≤ –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω—ã—Ö –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è—Ö
        val timeSinceStart = System.currentTimeMillis() - touchDownTime
        return timeSinceStart > 100 && 
               event.pointerCount == 2 && 
               isZoomPastThreshold(event)
    }
    
    private fun shouldSwitchToScroll(event: MotionEvent): Boolean {
        // –ü–µ—Ä–µ—Ö–æ–¥ –æ—Ç –∑—É–º–∞ –∫ —Å–∫—Ä–æ–ª–ª—É:
        // 1. –û—Å—Ç–∞–ª—Å—è –æ–¥–∏–Ω –∞–∫—Ç–∏–≤–Ω—ã–π –ø–∞–ª–µ—Ü
        // 2. –ò–ª–∏ –ø–∞–ª—å—Ü—ã –¥–≤–∏–∂—É—Ç—Å—è —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ
        return event.pointerCount == 1 || 
               (event.pointerCount == 2 && areFingersMovingTogether(event))
    }
}
```

## **–ö–ª—é—á–µ–≤—ã–µ –∏–Ω—Å–∞–π—Ç—ã –¥–ª—è Senior —É—Ä–æ–≤–Ω—è:**

### 1. **–ì–∏—Å—Ç–µ—Ä–µ–∑–∏—Å –∏ –ø–æ—Ä–æ–≥–∏:**
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `touchSlop` –¥–ª—è –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏—è –º–∏–∫—Ä–æ–¥–≤–∏–∂–µ–Ω–∏–π
- –î–æ–±–∞–≤–ª—è–π—Ç–µ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –∑–∞–¥–µ—Ä–∂–∫–∏ –¥–ª—è —Å–º–µ–Ω—ã —Ä–µ–∂–∏–º–æ–≤ (50-100ms)
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —É–≥–ª–æ–≤—ã–µ –ø–æ—Ä–æ–≥–∏ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 2. **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –∂–µ—Å—Ç–æ–≤:**
- –ü—Ä–∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–º –Ω–∞—á–∞–ª–µ: –∑—É–º > —Å–∫—Ä–æ–ª–ª
- –ü—Ä–∏ —Å–º–µ–Ω–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø–∞–ª—å—Ü–µ–≤: –ø–ª–∞–≤–Ω—ã–π –ø–µ—Ä–µ—Ö–æ–¥ –º–µ–∂–¥—É —Ä–µ–∂–∏–º–∞–º–∏
- –ü—Ä–∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–µ: –æ—Ç–º–µ–Ω–∞ —Ç–µ–∫—É—â–µ–≥–æ –∂–µ—Å—Ç–∞ –ø–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º –Ω–æ–≤–æ–≥–æ

### 3. **Velocity –∏ –∏–Ω–µ—Ä—Ü–∏—è:**
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `VelocityTracker` –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ñ–ª–∏–Ω–≥–∞ –ø–æ—Å–ª–µ —Å–∫—Ä–æ–ª–ª–∞
- –î–ª—è –∑—É–º–∞ –∏–Ω–µ—Ä—Ü–∏—è –æ–±—ã—á–Ω–æ –Ω–µ –Ω—É–∂–Ω–∞ (–∏–ª–∏ –æ—á–µ–Ω—å –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è)
- –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–π—Ç–µ `minFlingVelocity` –¥–ª—è —Å–≤–æ–µ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞

### 4. **Edge cases:**
- **–ë—ã—Å—Ç—Ä–∞—è —Å–º–µ–Ω–∞ –ø–∞–ª—å—Ü–µ–≤:** –≤—Ç–æ—Ä–æ–π –ø–∞–ª–µ—Ü –∫–æ—Å–Ω—É–ª—Å—è –¥–æ —Ç–æ–≥–æ, –∫–∞–∫ –ø–µ—Ä–≤—ã–π –æ—Ç–ø—É—â–µ–Ω
- **"–î—Ä–æ–∂–∞–Ω–∏–µ" –ø—Ä–∏ –∑—É–º–µ:** –ø–∞–ª—å—Ü—ã –¥–≤–∏–≥–∞—é—Ç—Å—è –Ω–µ—Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–æ
- **–ü–µ—Ä–µ—Ö–æ–¥ —á–µ—Ä–µ–∑ 1 –ø–∞–ª–µ—Ü:** zoom -> –æ–¥–∏–Ω –ø–∞–ª–µ—Ü –ø–æ–¥–Ω—è–ª–∏ -> –æ—Å—Ç–∞–ª—Å—è scroll
- **Multitouch –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —Ä—É–∫–∞—Ö:** —Ä–∞–∑–Ω—ã–µ touchSlop –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –ø–∞–ª—å—Ü–µ–≤

### 5. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**
- –ò–∑–±–µ–≥–∞–π—Ç–µ —Ç—è–∂–µ–ª—ã—Ö –≤—ã—á–∏—Å–ª–µ–Ω–∏–π –≤ `onTouchEvent()`
- –ö—ç—à–∏—Ä—É–π—Ç–µ `ViewConfiguration` –∑–Ω–∞—á–µ–Ω–∏—è
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `historical` –¥–∞–Ω–Ω—ã–µ MotionEvent –¥–ª—è —Å–≥–ª–∞–∂–∏–≤–∞–Ω–∏—è

### 6. **–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –ø–æ–¥—Ö–æ–¥—ã:**
```kotlin
// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ MotionEvent.obtain() –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è "—Ñ–µ–π–∫–æ–≤—ã—Ö" —Å–æ–±—ã—Ç–∏–π
// –ø—Ä–∏ —Å–º–µ–Ω–µ —Ä–µ–∂–∏–º–æ–≤ –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã GestureDetector

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ NestedScrolling –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å CoordinatorLayout

// –†–µ–∞–∫—Ç–∏–≤–Ω—ã–π –ø–æ–¥—Ö–æ–¥ —Å Flow<GestureEvent>
```

**–ò—Ç–æ–≥:** –†–∞–∑–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –∑—É–º–∞ –∏ —Å–∫—Ä–æ–ª–ª–∞ ‚Äî —ç—Ç–æ –Ω–µ –ø—Ä–æ—Å—Ç–æ `if-else`, –∞ state machine —Å —É—á–µ—Ç–æ–º –≤—Ä–µ–º–µ–Ω–∏, —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–π, –∏—Å—Ç–æ—Ä–∏–∏ —Å–æ–±—ã—Ç–∏–π –∏ —Ñ–∏–∑–∏–∫–∏ –∂–µ—Å—Ç–æ–≤. Production-—Ä–µ—à–µ–Ω–∏–µ —Ç—Ä–µ–±—É–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤—Å–µ—Ö –ø–µ—Ä–µ—Ö–æ–¥–æ–≤ –º–µ–∂–¥—É —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏ –∏ –ø–ª–∞–≤–Ω–æ–π –æ—Ç–º–µ–Ω—ã/–Ω–∞—á–∞–ª–∞ –∂–µ—Å—Ç–æ–≤.

  </details>  


  <details>
  <summary>  –ê–Ω–∏–º–∞—Ü–∏—è –∑–∞–Ω–∏–º–∞–µ—Ç –º–Ω–æ–≥–æ –ø–∞–º—è—Ç–∏, –∫–∞–∫ –µ–µ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å? (–±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π —Ü–∏–∫–ª –≤ –∞–Ω–∏–º–∞—Ü–∏–∏ —Å–≤–æ–π—Å—Ç–≤)   </summary> 

  **–ì–ª—É–±–æ–∫–∏–π —Ä–∞–∑–±–æ—Ä –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∞–Ω–∏–º–∞—Ü–∏–π –ø—Ä–∏ —É—Ç–µ—á–∫–∞—Ö –ø–∞–º—è—Ç–∏ –≤ –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã—Ö —Ü–∏–∫–ª–∞—Ö:**

## **1. –ö–æ—Ä–Ω–µ–≤—ã–µ –ø—Ä–∏—á–∏–Ω—ã —É—Ç–µ—á–µ–∫ –ø–∞–º—è—Ç–∏ –≤ –∞–Ω–∏–º–∞—Ü–∏—è—Ö:**

### **–ü—Ä–æ–±–ª–µ–º–∞ 1: –¶–∏–∫–ª–∏—á–µ—Å–∫–∏–µ —Å—Å—ã–ª–∫–∏ –≤ –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã—Ö –∞–Ω–∏–º–∞—Ü–∏—è—Ö**
```kotlin
// –ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –û–®–ò–ë–ö–ê:
ObjectAnimator.ofFloat(view, "rotation", 0f, 360f).apply {
    duration = 1000
    repeatCount = ObjectAnimator.INFINITE // ‚Üê –ü—Ä–æ–±–ª–µ–º–∞!
    interpolator = LinearInterpolator()
    start()
}
// –ê–Ω–∏–º–∞—Ü–∏—è –¥–µ—Ä–∂–∏—Ç —Å—Å—ã–ª–∫—É –Ω–∞ View, View –¥–µ—Ä–∂–∏—Ç —Å—Å—ã–ª–∫—É –Ω–∞ Context/Activity
// –î–∞–∂–µ –ø–æ—Å–ª–µ —É–Ω–∏—á—Ç–æ–∂–µ–Ω–∏—è Activity –∞–Ω–∏–º–∞—Ü–∏—è –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å!
```

### **–ü—Ä–æ–±–ª–µ–º–∞ 2: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ ValueAnimator.INFINITE**
```kotlin
ValueAnimator.ofFloat(0f, 1f).apply {
    addUpdateListener { animation ->
        // –ö–∞–∂–¥—ã–π –∫–∞–¥—Ä —Å–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—ã–µ –æ–±—ä–µ–∫—Ç—ã
        val value = animation.animatedValue as Float
        updateView(value)
    }
    repeatCount = ValueAnimator.INFINITE
    start()
    // UpdateListener –¥–µ—Ä–∂–∏—Ç —Å—Å—ã–ª–∫—É –Ω–∞ –≤–Ω–µ—à–Ω–∏–π –∫–ª–∞—Å—Å
}
```

## **2. –ü–æ–ª–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ –¥–ª—è Senior —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞:**

### **–®–∞–≥ 1: –ü–∞—Ç—Ç–µ—Ä–Ω Lifecycle-Aware Animator**

```kotlin
class LifecycleAnimator(
    private val view: View,
    private val lifecycle: Lifecycle
) {
    private var animator: ValueAnimator? = null
    
    fun startInfiniteAnimation() {
        animator = ValueAnimator.ofFloat(0f, 1f).apply {
            duration = 1000
            repeatCount = ValueAnimator.INFINITE
            interpolator = LinearInterpolator()
            
            addUpdateListener { animation ->
                if (view.isAttachedToWindow) {
                    val progress = animation.animatedValue as Float
                    view.rotation = 360 * progress
                } else {
                    cancel() // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º, –µ—Å–ª–∏ View –æ—Ç–∫—Ä–µ–ø–ª–µ–Ω–∞
                }
            }
            
            addListener(object : AnimatorListenerAdapter() {
                override fun onAnimationCancel(animation: Animator) {
                    cleanup()
                }
                
                override fun onAnimationEnd(animation: Animator) {
                    cleanup()
                }
            })
        }
        
        // –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ lifecycle
        lifecycle.addObserver(object : DefaultLifecycleObserver {
            override fun onPause(owner: LifecycleOwner) {
                animator?.pause()
            }
            
            override fun onResume(owner: LifecycleOwner) {
                animator?.resume()
            }
            
            override fun onDestroy(owner: LifecycleOwner) {
                cleanup()
                lifecycle.removeObserver(this)
            }
        })
        
        animator?.start()
    }
    
    private fun cleanup() {
        animator?.removeAllUpdateListeners()
        animator?.removeAllListeners()
        animator?.cancel()
        animator = null
    }
}
```

### **–®–∞–≥ 2: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ WeakReference –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ View —Å–æ—Å—Ç–æ—è–Ω–∏—è**

```kotlin
class SafeInfiniteAnimator {
    private var animator: ObjectAnimator? = null
    private weak var viewRef: WeakReference<View>? = null
    
    fun startRotationAnimation(view: View) {
        viewRef = WeakReference(view)
        
        animator = ObjectAnimator.ofFloat(view, "rotation", 0f, 360f).apply {
            duration = 1000
            repeatCount = ObjectAnimator.INFINITE
            interpolator = LinearInterpolator()
            
            // Weak listener pattern
            val weakListener = object : AnimatorListenerAdapter() {
                private val weakView = WeakReference(view)
                
                override fun onAnimationRepeat(animation: Animator) {
                    val view = weakView.get()
                    if (view == null || !view.isAttachedToWindow) {
                        animation.cancel()
                    }
                }
            }
            addListener(weakListener)
            
            // –°–ª–∞–±–∞—è —Å—Å—ã–ª–∫–∞ –¥–ª—è update listener
            val weakUpdateListener = ValueAnimator.AnimatorUpdateListener { animation ->
                val view = weakView.get()
                if (view == null || !view.isAttachedToWindow) {
                    animation.cancel()
                }
            }
            addUpdateListener(weakUpdateListener)
        }
        
        animator?.start()
    }
    
    fun stop() {
        animator?.let {
            it.removeAllListeners()
            it.removeAllUpdateListeners()
            it.cancel()
            it.setTarget(null) // –í–∞–∂–Ω–æ: –æ—Ç–≤—è–∑—ã–≤–∞–µ–º View
        }
        animator = null
        viewRef = null
    }
}
```

### **–®–∞–≥ 3: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ RenderThread –∏ Hardware Acceleration**

```kotlin
class HardwareOptimizedAnimator {
    
    fun startOptimizedAnimation(view: View) {
        // 1. –ò—Å–ø–æ–ª—å–∑—É–µ–º ViewPropertyAnimator (—Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ RenderThread)
        view.animate()
            .rotationBy(360f)
            .setDuration(1000)
            .setInterpolator(LinearInterpolator())
            .setUpdateListener {
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ View –µ—â–µ –∂–∏–≤–∞
                if (!view.isAttachedToWindow) {
                    view.animate().cancel()
                }
            }
            .withEndAction {
                // –î–ª—è –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–π –∞–Ω–∏–º–∞—Ü–∏–∏ - —Ä–µ–∫—É—Ä—Å–∏–≤–Ω—ã–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫
                if (view.isAttachedToWindow) {
                    startOptimizedAnimation(view)
                }
            }
            .start()
    }
    
    // –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞: Choreographer –¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª—è FPS
    fun startChoreographerAnimation(view: View) {
        val choreographer = Choreographer.getInstance()
        val frameCallback = object : Choreographer.FrameCallback {
            private var lastFrameTime = 0L
            
            override fun doFrame(frameTimeNanos: Long) {
                if (lastFrameTime == 0L) {
                    lastFrameTime = frameTimeNanos
                }
                
                val elapsed = (frameTimeNanos - lastFrameTime) / 1_000_000
                if (elapsed > 16) { // ~60 FPS
                    if (view.isAttachedToWindow) {
                        updateAnimation(view, elapsed)
                        choreographer.postFrameCallback(this)
                    } else {
                        // –û—á–∏—Å—Ç–∫–∞ –ø—Ä–∏ –æ—Ç–∫—Ä–µ–ø–ª–µ–Ω–∏–∏ View
                        choreographer.removeFrameCallback(this)
                    }
                    lastFrameTime = frameTimeNanos
                } else {
                    choreographer.postFrameCallback(this)
                }
            }
        }
        choreographer.postFrameCallback(frameCallback)
    }
}
```

### **–®–∞–≥ 4: Memory Pool –¥–ª—è –∞–Ω–∏–º–∞—Ü–∏–æ–Ω–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤**

```kotlin
object AnimationPool {
    private val animatorPool = mutableMapOf<String, ObjectAnimator>()
    private val configPool = mutableMapOf<String, AnimatorSet>()
    
    fun getOrCreateRotationAnimator(view: View): ObjectAnimator {
        val key = "${view.hashCode()}_rotation"
        
        return animatorPool[key] ?: ObjectAnimator.ofFloat(view, "rotation", 0f, 360f).apply {
            duration = 1000
            repeatCount = ObjectAnimator.INFINITE
            
            addListener(object : AnimatorListenerAdapter() {
                override fun onAnimationEnd(animation: Animator) {
                    // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –≤ pool –≤–º–µ—Å—Ç–æ —É–Ω–∏—á—Ç–æ–∂–µ–Ω–∏—è
                    recycleAnimator(key, animation as ObjectAnimator)
                }
            })
            
            animatorPool[key] = this
        }
    }
    
    private fun recycleAnimator(key: String, animator: ObjectAnimator) {
        animator.removeAllListeners()
        animator.removeAllUpdateListeners()
        animator.target = null
        // –ì–æ—Ç–æ–≤ –∫ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é
    }
}
```

### **–®–∞–≥ 5: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –¥–µ–±–∞–≥ —É—Ç–µ—á–µ–∫**

```kotlin
class LeakDetectionAnimator(
    private val tag: String
) : ValueAnimator() {
    
    private val createdStackTrace = Throwable("Animator created here")
    private var leaked = false
    
    init {
        // –¢—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è
        addListener(object : AnimatorListenerAdapter() {
            override fun onAnimationStart(animation: Animator) {
                AnimationLeakDetector.track(tag, this@LeakDetectionAnimator)
            }
            
            override fun onAnimationEnd(animation: Animator) {
                AnimationLeakDetector.untrack(tag)
            }
            
            override fun onAnimationCancel(animation: Animator) {
                AnimationLeakDetector.untrack(tag)
            }
        })
    }
    
    override fun start() {
        if (leaked) {
            Log.w("AnimationLeak", "Restarting leaked animator: $tag")
            Log.w("AnimationLeak", "Created at:", createdStackTrace)
        }
        super.start()
    }
    
    fun markAsLeaked() {
        leaked = true
    }
}

object AnimationLeakDetector {
    private val activeAnimations = mutableMapOf<String, WeakReference<Animator>>()
    
    fun track(tag: String, animator: Animator) {
        activeAnimations[tag] = WeakReference(animator)
    }
    
    fun untrack(tag: String) {
        activeAnimations.remove(tag)
    }
    
    fun detectLeaks() {
        activeAnimations.entries.removeAll { entry ->
            val animator = entry.value.get()
            if (animator == null) {
                true // –£–∂–µ —Å–æ–±—Ä–∞–Ω–æ GC
            } else if (!animator.isStarted && !animator.isRunning) {
                // –ê–Ω–∏–º–∞—Ü–∏—è –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –Ω–æ –Ω–µ —É–¥–∞–ª–µ–Ω–∞
                (animator as? LeakDetectionAnimator)?.markAsLeaked()
                false
            } else {
                false
            }
        }
    }
}
```

## **3. Production-—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã—Ö –∞–Ω–∏–º–∞—Ü–∏–π:**

### **–ü—Ä–∞–≤–∏–ª–æ 1: –í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Lifecycle**
```kotlin
class AnimatedFragment : Fragment() {
    private val animator = LifecycleAnimator()
    
    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {
        animator.attachToLifecycle(viewLifecycleOwner.lifecycle)
        animator.startInfiniteAnimation()
    }
    
    override fun onDestroyView() {
        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ —á–µ—Ä–µ–∑ LifecycleObserver
        super.onDestroyView()
    }
}
```

### **–ü—Ä–∞–≤–∏–ª–æ 2: –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ FPS –¥–ª—è —Ñ–æ–Ω–æ–≤—ã—Ö –∞–Ω–∏–º–∞—Ü–∏–π**
```kotlin
fun startLowFpsAnimation(view: View) {
    val animator = ValueAnimator.ofFloat(0f, 1f).apply {
        duration = 1000
        repeatCount = ValueAnimator.INFINITE
        
        // –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –¥–æ 30 FPS –≤–º–µ—Å—Ç–æ 60
        interpolator = object : TimeInterpolator {
            private var lastUpdate = 0L
            
            override fun getInterpolation(input: Float): Float {
                val now = System.currentTimeMillis()
                if (now - lastUpdate < 33) { // 30 FPS
                    return input
                }
                lastUpdate = now
                return input
            }
        }
    }
}
```

### **–ü—Ä–∞–≤–∏–ª–æ 3: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Lottie –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö –∞–Ω–∏–º–∞—Ü–∏–π**
```kotlin
// Lottie –æ–ø—Ç–∏–º–∏–∑–∏—Ä—É–µ—Ç —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ –∏ –ø–∞–º—è—Ç—å
val animationView = findViewById<LottieAnimationView>(R.id.animation_view)
animationView.setAnimation("loading.json")
animationView.repeatCount = LottieDrawable.INFINITE
animationView.enableMergePathsForKitKatAndAbove(true) // –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
```

### **–ü—Ä–∞–≤–∏–ª–æ 4: –ü—Ä–æ–≥—Ä–∞–º–º–Ω—ã–µ –∞–Ω–∏–º–∞—Ü–∏–∏ –≤–º–µ—Å—Ç–æ View –∞–Ω–∏–º–∞—Ü–∏–π**
```kotlin
// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Canvas –∏ ValueAnimator –¥–ª—è –∫–∞—Å—Ç–æ–º–Ω–æ–π –æ—Ç—Ä–∏—Å–æ–≤–∫–∏
class OptimizedAnimationView : View {
    private var progress = 0f
    private val paint = Paint()
    
    init {
        ValueAnimator.ofFloat(0f, 1f).apply {
            duration = 1000
            repeatCount = ValueAnimator.INFINITE
            addUpdateListener { 
                progress = it.animatedValue as Float
                invalidate() // –¢–æ–ª—å–∫–æ –ø–µ—Ä–µ—Ä–∏—Å–æ–≤–∫–∞, –Ω–µ relayout
            }
            start()
        }
    }
    
    override fun onDraw(canvas: Canvas) {
        // –õ–µ–≥–∫–∞—è –æ—Ç—Ä–∏—Å–æ–≤–∫–∞ –±–µ–∑ —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤
        canvas.drawCircle(width * progress, height / 2f, 20f, paint)
    }
}
```

## **4. –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ —É—Ç–µ—á–µ–∫:**

1. **LeakCanary —Å –∫–∞—Å—Ç–æ–º–Ω—ã–º–∏ watchers:**
```kotlin
class AnimationLeakWatcher : ObjectWatcher.Install {
    override fun install() {
        AppWatcher.objectWatcher.watch(
            watcher = this,
            expectedReachable = ObjectAnimator::class.java
        ) { animator ->
            (animator as ObjectAnimator).run {
                if (isStarted || isRunning) {
                    "Animator $this is still running"
                } else null
            }
        }
    }
}
```

2. **Android Studio Profiler:**
   - Memory Profiler + Allocation Tracking
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –ø–æ–≤—Ç–æ—Ä–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–æ–≤ –≤ –∞–Ω–∏–º–∞—Ü–∏—è—Ö
   - –ê–Ω–∞–ª–∏–∑ —Ü–µ–ø–æ—á–µ–∫ —É–¥–µ—Ä–∂–∞–Ω–∏—è GC Root

3. **–ö–∞—Å—Ç–æ–º–Ω—ã–µ —Å—á–µ—Ç—á–∏–∫–∏:**
```kotlin
object AnimationMetrics {
    private val activeAnimations = AtomicInteger(0)
    
    fun trackStart() {
        val count = activeAnimations.incrementAndGet()
        if (count > 10) {
            Log.w("AnimationMetrics", "Too many animations: $count")
        }
    }
    
    fun trackEnd() {
        activeAnimations.decrementAndGet()
    }
}
```

## **–ò—Ç–æ–≥ –¥–ª—è Senior —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞:**

1. **–í—Å–µ–≥–¥–∞ –ø—Ä–∏–≤—è–∑—ã–≤–∞–π—Ç–µ –∞–Ω–∏–º–∞—Ü–∏–∏ –∫ Lifecycle** –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
2. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ WeakReference** –¥–ª—è —Å–≤—è–∑–µ–π View-Animator
3. **–û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–π—Ç–µ –∞–Ω–∏–º–∞—Ü–∏–∏** –≤ `onPause()`/`onDestroyView()`
4. **–ü—Ä–µ–¥–ø–æ—á–∏—Ç–∞–π—Ç–µ ViewPropertyAnimator** –∏ Hardware Acceleration
5. **–û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–π—Ç–µ FPS** –¥–ª—è —Ñ–æ–Ω–æ–≤—ã—Ö/–Ω–µ–≤–∏–¥–∏–º—ã—Ö –∞–Ω–∏–º–∞—Ü–∏–π
6. **–ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö –∞–Ω–∏–º–∞—Ü–∏–π**
7. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—É–ª—ã** –¥–ª—è —á–∞—Å—Ç–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ–º—ã—Ö –∞–Ω–∏–º–∞—Ü–∏–π
8. **–î–ª—è —Å–ª–æ–∂–Ω—ã—Ö –∞–Ω–∏–º–∞—Ü–∏–π** –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ Lottie –∏–ª–∏ –∫–∞—Å—Ç–æ–º–Ω—ã–π Canvas

**–ö–ª—é—á–µ–≤–æ–π –ø—Ä–∏–Ω—Ü–∏–ø:** –ë–µ—Å–∫–æ–Ω–µ—á–Ω–∞—è –∞–Ω–∏–º–∞—Ü–∏—è ‚â† –±–µ—Å–∫–æ–Ω–µ—á–Ω–∞—è —É—Ç–µ—á–∫–∞ –ø–∞–º—è—Ç–∏. –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ —Å–≤–æ–µ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤ —Ä–µ—à–∞—é—Ç –ø—Ä–æ–±–ª–µ–º—É.

  </details>  

  

  </details>
  
</details>

-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
**–†–∞–Ω–µ–µ**

- []()
- 
**–î–∞–ª–µ–µ**
- []()
